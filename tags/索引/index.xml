<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>索引 on Hello, It&#39;s me</title>
        <link>https://x-xkang.com/tags/%E7%B4%A2%E5%BC%95/</link>
        <description>Recent content in 索引 on Hello, It&#39;s me</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>en-us</language>
        <lastBuildDate>Tue, 28 Feb 2023 10:29:46 +0800</lastBuildDate><atom:link href="https://x-xkang.com/tags/%E7%B4%A2%E5%BC%95/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>Mysql -- 索引性能分析</title>
        <link>https://x-xkang.com/p/mysql-%E7%B4%A2%E5%BC%95%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90/</link>
        <pubDate>Tue, 28 Feb 2023 10:29:46 +0800</pubDate>
        
        <guid>https://x-xkang.com/p/mysql-%E7%B4%A2%E5%BC%95%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90/</guid>
        <description>&lt;h3 id=&#34;查看sql执行频率&#34;&gt;查看SQL执行频率&lt;/h3&gt;
&lt;p&gt;MySQL 客户端连接成功后，通过show[session|global] status 命令可以提供服务器状态信息。通过如下指令可以查看当前数据库的&lt;code&gt;INSERT&lt;/code&gt;、&lt;code&gt;UPDATE&lt;/code&gt;、&lt;code&gt;DELETE&lt;/code&gt;、&lt;code&gt;SELECT&lt;/code&gt;的访问频次：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;k&#34;&gt;SHOW&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;GLOBAL&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;STATUS&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;LIKE&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;Com_______&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;一个&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;_&amp;#39;&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;代表一个字符&lt;/span&gt;  
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;结果如下：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;mysql&amp;gt; show global status like &amp;#39;Com_______&amp;#39;;
+---------------+-------+
| Variable_name | Value |
+---------------+-------+
| Com_binlog    | 0     |
| Com_commit    | 0     |
| Com_delete    | 0     |
| Com_import    | 0     |
| Com_insert    | 0     |
| Com_repair    | 0     |
| Com_revoke    | 0     |
| Com_select    | 8     |
| Com_signal    | 0     |
| Com_update    | 0     |
| Com_xa_end    | 0     |
+---------------+-------+
11 rows in set (0.00 sec)
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;hr&gt;
&lt;h3 id=&#34;查询慢日志&#34;&gt;查询慢日志&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;慢查询日志记录了所有执行时间超过指定参数（long_query_time，单位：秒，默认10秒）的所有SQL语句的日志。MySQL的慢查询日志默认没有开启，执行一下SQL查看慢日志开启状态：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;k&#34;&gt;SHOW&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;VARIABLES&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;LIKE&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;slow_query_log&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/blockquote&gt;
&lt;p&gt;需要在MySQL的配置文件（/etc/my.cnf）中配置如下信息：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 开启MySQL慢日志查询开关&lt;/span&gt;
&lt;span class=&#34;nv&#34;&gt;slow_query_log&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;# 设置慢日志的时间为2秒，SQL语句执行时间炒锅2秒就会视为慢查询，记录慢查询日志&lt;/span&gt;
&lt;span class=&#34;nv&#34;&gt;long_query_time&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;重启MySQL服务，本机环境为win10的WSL2，直接执行以下命令：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;sudo service mysql restart
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;hr&gt;
&lt;h3 id=&#34;profile详情&#34;&gt;profile详情&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;show profiles&lt;/code&gt; 能够在做SQL优化时帮助我们了解时间都耗费到哪去了。通过&lt;code&gt;have_profiling&lt;/code&gt;参数，能够看到当前MySQL是否支持profile操作：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;查看是否支持&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;SELECT&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;@@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;have_profiling&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;默认&lt;code&gt;profiling&lt;/code&gt;是关闭的，可以通过&lt;code&gt;set&lt;/code&gt;语句在&lt;code&gt;session&lt;/code&gt;/&lt;code&gt;global&lt;/code&gt;级别开启&lt;code&gt;profiling&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;查看开关状态&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;SELECT&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;@@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;profiling&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;设置开关状态&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;SET&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;profiling&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;执行完查询语句后再执行&lt;code&gt;show profiles&lt;/code&gt;，结果如下：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;+----------+------------+------------------------+
| Query_ID | Duration   | Query                  |
+----------+------------+------------------------+
|        1 | 0.00025800 | select @@profiling     |
|        2 | 0.00125875 | show tables            |
|        3 | 0.00014975 | select * form user     |
|        4 | 0.01059300 | select * from user     |
|        5 | 0.00152175 | select * from user_log |
+----------+------------+------------------------+
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;hr&gt;
&lt;h3 id=&#34;explain-执行计划&#34;&gt;explain 执行计划&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;EXPLAIN&lt;/code&gt; 或者 &lt;code&gt;DESC&lt;/code&gt; 命令获取MySQL如何执行SELECT语句的信息，包括在SELECT语句执行过程中表如何连接和连接的顺序。语法如下：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;直接在&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;select语句之前加上关键字&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;explain&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;desc&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;EXPLAIN&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;SELECT&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;字段列表&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;FROM&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;表名&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;WHERE&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;条件&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;结果如下：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;mysql&amp;gt; explain select * from user;
+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------+
| id | select_type | table | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra |
+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------+
|  1 | SIMPLE      | user  | NULL       | ALL  | NULL          | NULL | NULL    | NULL |    1 |   100.00 | NULL  |
+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------+
1 row in set, 1 warning (0.00 sec)
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;code&gt;EXPLAIN&lt;/code&gt; 输出列如下：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Column&lt;/th&gt;
&lt;th&gt;JSON Name&lt;/th&gt;
&lt;th&gt;Meaning&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a class=&#34;link&#34; href=&#34;#id&#34; &gt;id&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;select_id&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;SELECT&lt;/code&gt; 标识符&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a class=&#34;link&#34; href=&#34;#select_type&#34; &gt;select_type&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;None&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;SELECT&lt;/code&gt; 类型&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a class=&#34;link&#34; href=&#34;#table&#34; &gt;table&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;table_name&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;输出行table&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a class=&#34;link&#34; href=&#34;#partitions&#34; &gt;partitions&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;partitions&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;匹配的分区&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a class=&#34;link&#34; href=&#34;#type&#34; &gt;type&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;access_type&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;连接类型&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a class=&#34;link&#34; href=&#34;#possible_keys&#34; &gt;possible_keys&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;possible_keys&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;可能的索引选择&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a class=&#34;link&#34; href=&#34;#key&#34; &gt;key&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;key&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;实际选择的索引&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a class=&#34;link&#34; href=&#34;#key_len&#34; &gt;key_len&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;key_length&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;所选键的长度&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a class=&#34;link&#34; href=&#34;#ref&#34; &gt;ref&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ref&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;与索引比较的列&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a class=&#34;link&#34; href=&#34;#rows&#34; &gt;rows&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;rows&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;估计要检查的行&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a class=&#34;link&#34; href=&#34;#filtered&#34; &gt;filtered&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;filtered&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;按table条件过滤的行百分比&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a class=&#34;link&#34; href=&#34;#Extra&#34; &gt;Extra&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;None&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;扩展信息&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;😀 Note
详细解释可参考 &lt;a class=&#34;link&#34; href=&#34;https://dev.mysql.com/doc/refman/8.0/en/explain-output.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;[官方文档]&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;span id=&#34;id&#34;&gt;&lt;code&gt;id&lt;/code&gt;&lt;/span&gt;
行标识，如果没有子查询或者联合查询，这个值是1，id列值越大越先执行，如果一样大，那么就从上往下依次执行&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;span id=&#34;select_type&#34;&gt;&lt;code&gt;select_type&lt;/code&gt;&lt;/span&gt;
查询的类型，可以是下表的任何一种类型&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;select_type&lt;/th&gt;
&lt;th&gt;类型说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;SIMPLE&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;简单&lt;code&gt;SELECT&lt;/code&gt;（不使用&lt;code&gt;UNION&lt;/code&gt;或子查询）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;PROMARY&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;最外层的&lt;code&gt;SELECT&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;UNION&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;UNION&lt;/code&gt;中第二个或之后的&lt;code&gt;SELECT&lt;/code&gt;语句&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;DEPENDENT UNION&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;UNION&lt;/code&gt;中第二个或之后的&lt;code&gt;SELECT&lt;/code&gt;语句取决于外面的查询&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;UNION RESULT&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;UNION&lt;/code&gt;的结果&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;SUBQUERY&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;子查询中的第一个&lt;code&gt;SELECT&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;DEPENDENT SUBQUERY&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;子查询中的第一个&lt;code&gt;SELECT&lt;/code&gt;，取决于外面的查询&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;DERIVED&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;衍生表（FROM自居中的子查询）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;MATERIALIZED&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;物化子查询&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;UNCACHEABLE SUBQUERY&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;结果集无法缓存的子查询，必须重新评估外部查询的每一行&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;UNCACHEABLE UNION&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;UNION&lt;/code&gt;中第二个或之后的&lt;code&gt;SELECT&lt;/code&gt;，属于无法缓存的子查询&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;⭐ &lt;code&gt;DEPENDENT&lt;/code&gt; 意味着使用了关联子查询&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;span id=&#34;table&#34;&gt;&lt;code&gt;table&lt;/code&gt;&lt;/span&gt;：输出行所引用表的名称，也可以是以下值之一：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&amp;lt;unionM,N&amp;gt;: 引用id为M和N UNION之后的结果。&lt;/li&gt;
&lt;li&gt;&lt;derivedN&gt;: 引用id为N的结果派生出的表，派生表可以是一个结果集，例如派生自FROM中子查询的结果。&lt;/li&gt;
&lt;li&gt;&lt;subqueryN&gt;: 引用id为N的子查询结果物化得到的表，即生成一个临时表保存子查询的结果。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;span id=&#34;partitions&#34;&gt;&lt;code&gt;partitions&lt;/code&gt;&lt;/span&gt;：v5.7之前该项是&lt;code&gt;explain partitions&lt;/code&gt;显示的选项，v5.7之后成为了默认选项，该列显示的为分区表中的分区情况，非分区表该字段为空（null）。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;span id=&#34;type&#34;&gt;type&lt;/span&gt;( &lt;strong&gt;重要&lt;/strong&gt; )：连接类型&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;system&lt;/code&gt;
表中只有一行数据或者是空表，这是const类型的一个特例，且只能用于&lt;code&gt;MyISAM&lt;/code&gt;和&lt;code&gt;Memory&lt;/code&gt;表，如果是&lt;code&gt;InnoDB&lt;/code&gt;引擎表，&lt;code&gt;type&lt;/code&gt;列在这个情况通常都是&lt;code&gt;all&lt;/code&gt;或者&lt;code&gt;index&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;const&lt;/code&gt;
最多只有一行记录匹配。当联合主键或唯一索引的所有字段跟常量值比较时，&lt;code&gt;join&lt;/code&gt;类型为&lt;code&gt;const&lt;/code&gt;。其他数据库也叫做唯一索引扫描&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;eq_ref&lt;/code&gt;
多表&lt;code&gt;join&lt;/code&gt;时，对于来自前面表的每一行，在当前表中只能找到一行，这可能是除了&lt;code&gt;system&lt;/code&gt;和&lt;code&gt;const&lt;/code&gt;之外最好的类型，当主键或唯一非NULL索引的所有字段都被当做&lt;code&gt;join&lt;/code&gt;连接时会出现此类型。
&lt;code&gt;eq_ref&lt;/code&gt;可用于使用&#39;=&amp;lsquo;操作符作比较的索引列，比较的值可以是常量，也可以是使用此表之前读取的表的列表达式。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;ref&lt;/code&gt;
对于来自前面表的每一行，在此表的索引中可以匹配到多行，若连接只用到索引的最左前缀或索引不是主键或唯一索引时，使用 &lt;code&gt;ref&lt;/code&gt; 类型（也就是说，此类型能够匹配到多行连接）。
&lt;code&gt;ref&lt;/code&gt; 可用于使用 &lt;code&gt;=&lt;/code&gt; 或 &lt;code&gt;&amp;lt;=&amp;gt;&lt;/code&gt; 操作符作比较的索引列。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;fulltext&lt;/code&gt;
用于全文索引的时候是这个类型，要注意，&lt;strong&gt;全文索引的优先级很高&lt;/strong&gt;，若全文索引和普通索引同时存在，mysql不管代价，优先选择使用全文索引&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;ref_or_null&lt;/code&gt;
类似于&lt;code&gt;ref&lt;/code&gt;类型，只是增加了&lt;code&gt;null&lt;/code&gt;值得比较，实际用的不多&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;index_merge&lt;/code&gt;
此类型表示查询使用两个以上索引，最后取交集或者并集，常见 &lt;code&gt;and&lt;/code&gt;, &lt;code&gt;or&lt;/code&gt;的条件使用了不同的索引，官方排序这个在&lt;code&gt;ref_or_null&lt;/code&gt;之后，但是实际上由于要读取多个索引，性能可能大部分时间都不如&lt;code&gt;range&lt;/code&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;unique_subquery&lt;/code&gt;
用于&lt;code&gt;WHERE&lt;/code&gt;中的 &lt;code&gt;IN&lt;/code&gt; 形式子查询，子查询返回不重复值唯一值，可以完全替换子查询，效率更高。
该类型替换了下面形式的 &lt;code&gt;IN&lt;/code&gt; 子查询的 &lt;code&gt;ref&lt;/code&gt;:
&lt;code&gt;value IN (select primary_key FROM single_table WHERE some_expr)&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;index_subquery&lt;/code&gt;
该连接类型类似于&lt;code&gt;unique_subquery&lt;/code&gt;。适用于非唯一索引，可以返回重复值&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;range&lt;/code&gt;
索引范围查询，常见于使用&lt;code&gt;=&lt;/code&gt; &lt;code&gt;&amp;lt;&amp;gt;&lt;/code&gt; &lt;code&gt;&amp;gt;&lt;/code&gt; &lt;code&gt;&amp;gt;=&lt;/code&gt; &lt;code&gt;&amp;lt;&lt;/code&gt; &lt;code&gt;&amp;lt;=&lt;/code&gt; &lt;code&gt;IS NULL&lt;/code&gt; &lt;code&gt;&amp;lt;=&amp;gt;&lt;/code&gt; &lt;code&gt;BETWEEN&lt;/code&gt; &lt;code&gt;IN&lt;/code&gt; 或者 &lt;code&gt;LIKE&lt;/code&gt; 等运算符的查询中。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;index&lt;/code&gt;
索引全表扫描，把索引从头到尾扫一遍。这里包含两种情况：
一种是查询使用了覆盖索引，那么它只需要扫描索引就可以获得数据，这个效率要比全表扫描要快，因为索引通常比数据表小，而且还能避免二次查询。在 &lt;code&gt;extra&lt;/code&gt; 中显示 &lt;code&gt;Using index&lt;/code&gt;，反之，如果在索引上进行全表扫描，没有 &lt;code&gt;Using index&lt;/code&gt;的提示。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;all&lt;/code&gt;
全表扫描，性能较差&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;span id=&#34;possible_keys&#34;&gt;possible_keys&lt;/span&gt;：查询可能用到的索引，如果此列是 &lt;code&gt;NULL&lt;/code&gt;，则没有用到索引。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;span id=&#34;key&#34;&gt;key&lt;/span&gt;：表示MySQL实际决定使用的索引，如果MySQL决定使用其中一个 &lt;code&gt;possible_keys&lt;/code&gt; 索引来查找行，则该索引将作为键值列出。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;span id=&#34;key_length&#34;&gt;key_length&lt;/span&gt;：查询用到的索引长度（字节），
如果是单列索引，那就整个索引长度算进去，如果是多列索引，那么查询不一定都能使用到所有的列，用多少算多少。例如组合索引为&lt;code&gt;idx_username_create_time&lt;/code&gt;，当查询语句为 &lt;code&gt;select * from user where username=&#39;qqq&#39;&lt;/code&gt;时，只用到了&lt;code&gt;username&lt;/code&gt;字段，那么&lt;code&gt;key_len&lt;/code&gt;只会计算&lt;code&gt;username&lt;/code&gt;字段占用的字节数，假如&lt;code&gt;username&lt;/code&gt;字段类型为&lt;code&gt;varchar(50)&lt;/code&gt; NOT NULL，字符编码为&lt;code&gt;utf8mb3&lt;/code&gt;（utf8编码一个字符占用3个字节，gbk编码一个字符占2字节），记录字符串长度占用2字节，记录字段不为空占用1字节（若没有&lt;code&gt;NOT NULL&lt;/code&gt;限制则不占用这1个字节）那么&lt;code&gt;key_len&lt;/code&gt;为 50 * 3 + 2 + 1 = 153字节&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;span id=&#34;ref&#34;&gt;ref&lt;/span&gt;：如果使用的是常数等值查询，这里会显示&lt;code&gt;const&lt;/code&gt;，如果是连接查询，被驱动表的执行计划这里会显示驱动表的关联字段，如果是条件使用了表达式或者函数，或者条件列表发生了内部隐式转换，这里可能显示为&lt;code&gt;func&lt;/code&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;span id=&#34;rows&#34;&gt;rows&lt;/span&gt;( &lt;strong&gt;重要&lt;/strong&gt; ):&lt;code&gt;rows&lt;/code&gt;也是一个重要的字段，这是MySQL估算的需要扫描的行数（不是精确值）。这个值非常直观显示SQL的效率好坏，原则上&lt;code&gt;rows&lt;/code&gt;越少越好。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;span id=&#34;filtered&#34;&gt;filtered&lt;/span&gt;：该字段表示存储引擎返回的数据在server层过滤后，剩下多少满足查询的记录数量的比例，注意是百分比，不是具体记录数。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;span id=&#34;Extra&#34;&gt;Extra&lt;/span&gt;( &lt;strong&gt;重要&lt;/strong&gt; )：&lt;code&gt;EXPLAIN&lt;/code&gt;中很多额外的信息会在&lt;code&gt;Extra&lt;/code&gt;字段显示，常见的有以下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;distinct&lt;/code&gt;&lt;/strong&gt;: 在&lt;code&gt;select&lt;/code&gt;部分使用了&lt;code&gt;distinct&lt;/code&gt;关键字&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Using filesort&lt;/code&gt;&lt;/strong&gt;: 当&lt;code&gt;Extra&lt;/code&gt;中有&lt;code&gt;Using filesort&lt;/code&gt;时，表示MySQL需额外的排序操作，不能通过索引顺序到达排序效果，一般有 &lt;code&gt;Using filesort&lt;/code&gt; 都建议优化去掉，因为这样的查询CPU资源消耗较大。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Using index&lt;/code&gt;&lt;/strong&gt;: “覆盖索引扫描”，表示查询在索引树种就可查找所需数据，不用扫描表数据文件，往往说明性能不错。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Using temporary&lt;/code&gt;&lt;/strong&gt;: 查询有使用临时表，一般出现于排序，分组和多表join的情况，查询效率不高，建议优化。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- 以上即是`EXPLAIN`执行计划返回的结果集中个字段的含义。 --&gt;</description>
        </item>
        
    </channel>
</rss>

<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Database on Hello, It&#39;s me</title>
        <link>https://x-xkang.com/categories/database/</link>
        <description>Recent content in Database on Hello, It&#39;s me</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>en-us</language>
        <lastBuildDate>Tue, 28 Feb 2023 10:29:46 +0800</lastBuildDate><atom:link href="https://x-xkang.com/categories/database/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>Mysql -- ç´¢å¼•æ€§èƒ½åˆ†æ</title>
        <link>https://x-xkang.com/p/mysql-%E7%B4%A2%E5%BC%95%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90/</link>
        <pubDate>Tue, 28 Feb 2023 10:29:46 +0800</pubDate>
        
        <guid>https://x-xkang.com/p/mysql-%E7%B4%A2%E5%BC%95%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90/</guid>
        <description>&lt;h3 id=&#34;æŸ¥çœ‹sqlæ‰§è¡Œé¢‘ç‡&#34;&gt;æŸ¥çœ‹SQLæ‰§è¡Œé¢‘ç‡&lt;/h3&gt;
&lt;p&gt;MySQL å®¢æˆ·ç«¯è¿æ¥æˆåŠŸåï¼Œé€šè¿‡show[session|global] status å‘½ä»¤å¯ä»¥æä¾›æœåŠ¡å™¨çŠ¶æ€ä¿¡æ¯ã€‚é€šè¿‡å¦‚ä¸‹æŒ‡ä»¤å¯ä»¥æŸ¥çœ‹å½“å‰æ•°æ®åº“çš„&lt;code&gt;INSERT&lt;/code&gt;ã€&lt;code&gt;UPDATE&lt;/code&gt;ã€&lt;code&gt;DELETE&lt;/code&gt;ã€&lt;code&gt;SELECT&lt;/code&gt;çš„è®¿é—®é¢‘æ¬¡ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;k&#34;&gt;SHOW&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;GLOBAL&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;STATUS&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;LIKE&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;Com_______&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;ä¸€ä¸ª&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;_&amp;#39;&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;ä»£è¡¨ä¸€ä¸ªå­—ç¬¦&lt;/span&gt;  
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç»“æœå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;mysql&amp;gt; show global status like &amp;#39;Com_______&amp;#39;;
+---------------+-------+
| Variable_name | Value |
+---------------+-------+
| Com_binlog    | 0     |
| Com_commit    | 0     |
| Com_delete    | 0     |
| Com_import    | 0     |
| Com_insert    | 0     |
| Com_repair    | 0     |
| Com_revoke    | 0     |
| Com_select    | 8     |
| Com_signal    | 0     |
| Com_update    | 0     |
| Com_xa_end    | 0     |
+---------------+-------+
11 rows in set (0.00 sec)
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;hr&gt;
&lt;h3 id=&#34;æŸ¥è¯¢æ…¢æ—¥å¿—&#34;&gt;æŸ¥è¯¢æ…¢æ—¥å¿—&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;æ…¢æŸ¥è¯¢æ—¥å¿—è®°å½•äº†æ‰€æœ‰æ‰§è¡Œæ—¶é—´è¶…è¿‡æŒ‡å®šå‚æ•°ï¼ˆlong_query_timeï¼Œå•ä½ï¼šç§’ï¼Œé»˜è®¤10ç§’ï¼‰çš„æ‰€æœ‰SQLè¯­å¥çš„æ—¥å¿—ã€‚MySQLçš„æ…¢æŸ¥è¯¢æ—¥å¿—é»˜è®¤æ²¡æœ‰å¼€å¯ï¼Œæ‰§è¡Œä¸€ä¸‹SQLæŸ¥çœ‹æ…¢æ—¥å¿—å¼€å¯çŠ¶æ€ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;k&#34;&gt;SHOW&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;VARIABLES&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;LIKE&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;slow_query_log&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/blockquote&gt;
&lt;p&gt;éœ€è¦åœ¨MySQLçš„é…ç½®æ–‡ä»¶ï¼ˆ/etc/my.cnfï¼‰ä¸­é…ç½®å¦‚ä¸‹ä¿¡æ¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# å¼€å¯MySQLæ…¢æ—¥å¿—æŸ¥è¯¢å¼€å…³&lt;/span&gt;
&lt;span class=&#34;nv&#34;&gt;slow_query_log&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;# è®¾ç½®æ…¢æ—¥å¿—çš„æ—¶é—´ä¸º2ç§’ï¼ŒSQLè¯­å¥æ‰§è¡Œæ—¶é—´ç‚’é”…2ç§’å°±ä¼šè§†ä¸ºæ…¢æŸ¥è¯¢ï¼Œè®°å½•æ…¢æŸ¥è¯¢æ—¥å¿—&lt;/span&gt;
&lt;span class=&#34;nv&#34;&gt;long_query_time&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;é‡å¯MySQLæœåŠ¡ï¼Œæœ¬æœºç¯å¢ƒä¸ºwin10çš„WSL2ï¼Œç›´æ¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;sudo service mysql restart
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;hr&gt;
&lt;h3 id=&#34;profileè¯¦æƒ…&#34;&gt;profileè¯¦æƒ…&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;show profiles&lt;/code&gt; èƒ½å¤Ÿåœ¨åšSQLä¼˜åŒ–æ—¶å¸®åŠ©æˆ‘ä»¬äº†è§£æ—¶é—´éƒ½è€—è´¹åˆ°å“ªå»äº†ã€‚é€šè¿‡&lt;code&gt;have_profiling&lt;/code&gt;å‚æ•°ï¼Œèƒ½å¤Ÿçœ‹åˆ°å½“å‰MySQLæ˜¯å¦æ”¯æŒprofileæ“ä½œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;æŸ¥çœ‹æ˜¯å¦æ”¯æŒ&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;SELECT&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;@@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;have_profiling&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;é»˜è®¤&lt;code&gt;profiling&lt;/code&gt;æ˜¯å…³é—­çš„ï¼Œå¯ä»¥é€šè¿‡&lt;code&gt;set&lt;/code&gt;è¯­å¥åœ¨&lt;code&gt;session&lt;/code&gt;/&lt;code&gt;global&lt;/code&gt;çº§åˆ«å¼€å¯&lt;code&gt;profiling&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;æŸ¥çœ‹å¼€å…³çŠ¶æ€&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;SELECT&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;@@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;profiling&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;è®¾ç½®å¼€å…³çŠ¶æ€&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;SET&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;profiling&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ‰§è¡Œå®ŒæŸ¥è¯¢è¯­å¥åå†æ‰§è¡Œ&lt;code&gt;show profiles&lt;/code&gt;ï¼Œç»“æœå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;+----------+------------+------------------------+
| Query_ID | Duration   | Query                  |
+----------+------------+------------------------+
|        1 | 0.00025800 | select @@profiling     |
|        2 | 0.00125875 | show tables            |
|        3 | 0.00014975 | select * form user     |
|        4 | 0.01059300 | select * from user     |
|        5 | 0.00152175 | select * from user_log |
+----------+------------+------------------------+
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;hr&gt;
&lt;h3 id=&#34;explain-æ‰§è¡Œè®¡åˆ’&#34;&gt;explain æ‰§è¡Œè®¡åˆ’&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;EXPLAIN&lt;/code&gt; æˆ–è€… &lt;code&gt;DESC&lt;/code&gt; å‘½ä»¤è·å–MySQLå¦‚ä½•æ‰§è¡ŒSELECTè¯­å¥çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬åœ¨SELECTè¯­å¥æ‰§è¡Œè¿‡ç¨‹ä¸­è¡¨å¦‚ä½•è¿æ¥å’Œè¿æ¥çš„é¡ºåºã€‚è¯­æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;ç›´æ¥åœ¨&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;selectè¯­å¥ä¹‹å‰åŠ ä¸Šå…³é”®å­—&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;explain&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;desc&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;EXPLAIN&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;SELECT&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;å­—æ®µåˆ—è¡¨&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;FROM&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;è¡¨å&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;WHERE&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;æ¡ä»¶&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç»“æœå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;mysql&amp;gt; explain select * from user;
+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------+
| id | select_type | table | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra |
+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------+
|  1 | SIMPLE      | user  | NULL       | ALL  | NULL          | NULL | NULL    | NULL |    1 |   100.00 | NULL  |
+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------+
1 row in set, 1 warning (0.00 sec)
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;code&gt;EXPLAIN&lt;/code&gt; è¾“å‡ºåˆ—å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Column&lt;/th&gt;
&lt;th&gt;JSON Name&lt;/th&gt;
&lt;th&gt;Meaning&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a class=&#34;link&#34; href=&#34;#id&#34; &gt;id&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;select_id&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;SELECT&lt;/code&gt; æ ‡è¯†ç¬¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a class=&#34;link&#34; href=&#34;#select_type&#34; &gt;select_type&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;None&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;SELECT&lt;/code&gt; ç±»å‹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a class=&#34;link&#34; href=&#34;#table&#34; &gt;table&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;table_name&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è¾“å‡ºè¡Œtable&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a class=&#34;link&#34; href=&#34;#partitions&#34; &gt;partitions&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;partitions&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åŒ¹é…çš„åˆ†åŒº&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a class=&#34;link&#34; href=&#34;#type&#34; &gt;type&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;access_type&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è¿æ¥ç±»å‹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a class=&#34;link&#34; href=&#34;#possible_keys&#34; &gt;possible_keys&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;possible_keys&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å¯èƒ½çš„ç´¢å¼•é€‰æ‹©&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a class=&#34;link&#34; href=&#34;#key&#34; &gt;key&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;key&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å®é™…é€‰æ‹©çš„ç´¢å¼•&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a class=&#34;link&#34; href=&#34;#key_len&#34; &gt;key_len&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;key_length&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ‰€é€‰é”®çš„é•¿åº¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a class=&#34;link&#34; href=&#34;#ref&#34; &gt;ref&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;ref&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ä¸ç´¢å¼•æ¯”è¾ƒçš„åˆ—&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a class=&#34;link&#34; href=&#34;#rows&#34; &gt;rows&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;rows&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ä¼°è®¡è¦æ£€æŸ¥çš„è¡Œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a class=&#34;link&#34; href=&#34;#filtered&#34; &gt;filtered&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;filtered&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æŒ‰tableæ¡ä»¶è¿‡æ»¤çš„è¡Œç™¾åˆ†æ¯”&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a class=&#34;link&#34; href=&#34;#Extra&#34; &gt;Extra&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;None&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ‰©å±•ä¿¡æ¯&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;ğŸ˜€ Note
è¯¦ç»†è§£é‡Šå¯å‚è€ƒ &lt;a class=&#34;link&#34; href=&#34;https://dev.mysql.com/doc/refman/8.0/en/explain-output.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;[å®˜æ–¹æ–‡æ¡£]&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;span id=&#34;id&#34;&gt;&lt;code&gt;id&lt;/code&gt;&lt;/span&gt;
è¡Œæ ‡è¯†ï¼Œå¦‚æœæ²¡æœ‰å­æŸ¥è¯¢æˆ–è€…è”åˆæŸ¥è¯¢ï¼Œè¿™ä¸ªå€¼æ˜¯1ï¼Œidåˆ—å€¼è¶Šå¤§è¶Šå…ˆæ‰§è¡Œï¼Œå¦‚æœä¸€æ ·å¤§ï¼Œé‚£ä¹ˆå°±ä»ä¸Šå¾€ä¸‹ä¾æ¬¡æ‰§è¡Œ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;span id=&#34;select_type&#34;&gt;&lt;code&gt;select_type&lt;/code&gt;&lt;/span&gt;
æŸ¥è¯¢çš„ç±»å‹ï¼Œå¯ä»¥æ˜¯ä¸‹è¡¨çš„ä»»ä½•ä¸€ç§ç±»å‹&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;select_type&lt;/th&gt;
&lt;th&gt;ç±»å‹è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;SIMPLE&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ç®€å•&lt;code&gt;SELECT&lt;/code&gt;ï¼ˆä¸ä½¿ç”¨&lt;code&gt;UNION&lt;/code&gt;æˆ–å­æŸ¥è¯¢ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;PROMARY&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æœ€å¤–å±‚çš„&lt;code&gt;SELECT&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;UNION&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;UNION&lt;/code&gt;ä¸­ç¬¬äºŒä¸ªæˆ–ä¹‹åçš„&lt;code&gt;SELECT&lt;/code&gt;è¯­å¥&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;DEPENDENT UNION&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;UNION&lt;/code&gt;ä¸­ç¬¬äºŒä¸ªæˆ–ä¹‹åçš„&lt;code&gt;SELECT&lt;/code&gt;è¯­å¥å–å†³äºå¤–é¢çš„æŸ¥è¯¢&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;UNION RESULT&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;UNION&lt;/code&gt;çš„ç»“æœ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;SUBQUERY&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å­æŸ¥è¯¢ä¸­çš„ç¬¬ä¸€ä¸ª&lt;code&gt;SELECT&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;DEPENDENT SUBQUERY&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å­æŸ¥è¯¢ä¸­çš„ç¬¬ä¸€ä¸ª&lt;code&gt;SELECT&lt;/code&gt;ï¼Œå–å†³äºå¤–é¢çš„æŸ¥è¯¢&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;DERIVED&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è¡ç”Ÿè¡¨ï¼ˆFROMè‡ªå±…ä¸­çš„å­æŸ¥è¯¢ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;MATERIALIZED&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ç‰©åŒ–å­æŸ¥è¯¢&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;UNCACHEABLE SUBQUERY&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ç»“æœé›†æ— æ³•ç¼“å­˜çš„å­æŸ¥è¯¢ï¼Œå¿…é¡»é‡æ–°è¯„ä¼°å¤–éƒ¨æŸ¥è¯¢çš„æ¯ä¸€è¡Œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;UNCACHEABLE UNION&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;UNION&lt;/code&gt;ä¸­ç¬¬äºŒä¸ªæˆ–ä¹‹åçš„&lt;code&gt;SELECT&lt;/code&gt;ï¼Œå±äºæ— æ³•ç¼“å­˜çš„å­æŸ¥è¯¢&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;â­ &lt;code&gt;DEPENDENT&lt;/code&gt; æ„å‘³ç€ä½¿ç”¨äº†å…³è”å­æŸ¥è¯¢&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;span id=&#34;table&#34;&gt;&lt;code&gt;table&lt;/code&gt;&lt;/span&gt;ï¼šè¾“å‡ºè¡Œæ‰€å¼•ç”¨è¡¨çš„åç§°ï¼Œä¹Ÿå¯ä»¥æ˜¯ä»¥ä¸‹å€¼ä¹‹ä¸€ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&amp;lt;unionM,N&amp;gt;: å¼•ç”¨idä¸ºMå’ŒN UNIONä¹‹åçš„ç»“æœã€‚&lt;/li&gt;
&lt;li&gt;&lt;derivedN&gt;: å¼•ç”¨idä¸ºNçš„ç»“æœæ´¾ç”Ÿå‡ºçš„è¡¨ï¼Œæ´¾ç”Ÿè¡¨å¯ä»¥æ˜¯ä¸€ä¸ªç»“æœé›†ï¼Œä¾‹å¦‚æ´¾ç”Ÿè‡ªFROMä¸­å­æŸ¥è¯¢çš„ç»“æœã€‚&lt;/li&gt;
&lt;li&gt;&lt;subqueryN&gt;: å¼•ç”¨idä¸ºNçš„å­æŸ¥è¯¢ç»“æœç‰©åŒ–å¾—åˆ°çš„è¡¨ï¼Œå³ç”Ÿæˆä¸€ä¸ªä¸´æ—¶è¡¨ä¿å­˜å­æŸ¥è¯¢çš„ç»“æœã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;span id=&#34;partitions&#34;&gt;&lt;code&gt;partitions&lt;/code&gt;&lt;/span&gt;ï¼šv5.7ä¹‹å‰è¯¥é¡¹æ˜¯&lt;code&gt;explain partitions&lt;/code&gt;æ˜¾ç¤ºçš„é€‰é¡¹ï¼Œv5.7ä¹‹åæˆä¸ºäº†é»˜è®¤é€‰é¡¹ï¼Œè¯¥åˆ—æ˜¾ç¤ºçš„ä¸ºåˆ†åŒºè¡¨ä¸­çš„åˆ†åŒºæƒ…å†µï¼Œéåˆ†åŒºè¡¨è¯¥å­—æ®µä¸ºç©ºï¼ˆnullï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;span id=&#34;type&#34;&gt;type&lt;/span&gt;( &lt;strong&gt;é‡è¦&lt;/strong&gt; )ï¼šè¿æ¥ç±»å‹&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;system&lt;/code&gt;
è¡¨ä¸­åªæœ‰ä¸€è¡Œæ•°æ®æˆ–è€…æ˜¯ç©ºè¡¨ï¼Œè¿™æ˜¯constç±»å‹çš„ä¸€ä¸ªç‰¹ä¾‹ï¼Œä¸”åªèƒ½ç”¨äº&lt;code&gt;MyISAM&lt;/code&gt;å’Œ&lt;code&gt;Memory&lt;/code&gt;è¡¨ï¼Œå¦‚æœæ˜¯&lt;code&gt;InnoDB&lt;/code&gt;å¼•æ“è¡¨ï¼Œ&lt;code&gt;type&lt;/code&gt;åˆ—åœ¨è¿™ä¸ªæƒ…å†µé€šå¸¸éƒ½æ˜¯&lt;code&gt;all&lt;/code&gt;æˆ–è€…&lt;code&gt;index&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;const&lt;/code&gt;
æœ€å¤šåªæœ‰ä¸€è¡Œè®°å½•åŒ¹é…ã€‚å½“è”åˆä¸»é”®æˆ–å”¯ä¸€ç´¢å¼•çš„æ‰€æœ‰å­—æ®µè·Ÿå¸¸é‡å€¼æ¯”è¾ƒæ—¶ï¼Œ&lt;code&gt;join&lt;/code&gt;ç±»å‹ä¸º&lt;code&gt;const&lt;/code&gt;ã€‚å…¶ä»–æ•°æ®åº“ä¹Ÿå«åšå”¯ä¸€ç´¢å¼•æ‰«æ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;eq_ref&lt;/code&gt;
å¤šè¡¨&lt;code&gt;join&lt;/code&gt;æ—¶ï¼Œå¯¹äºæ¥è‡ªå‰é¢è¡¨çš„æ¯ä¸€è¡Œï¼Œåœ¨å½“å‰è¡¨ä¸­åªèƒ½æ‰¾åˆ°ä¸€è¡Œï¼Œè¿™å¯èƒ½æ˜¯é™¤äº†&lt;code&gt;system&lt;/code&gt;å’Œ&lt;code&gt;const&lt;/code&gt;ä¹‹å¤–æœ€å¥½çš„ç±»å‹ï¼Œå½“ä¸»é”®æˆ–å”¯ä¸€éNULLç´¢å¼•çš„æ‰€æœ‰å­—æ®µéƒ½è¢«å½“åš&lt;code&gt;join&lt;/code&gt;è¿æ¥æ—¶ä¼šå‡ºç°æ­¤ç±»å‹ã€‚
&lt;code&gt;eq_ref&lt;/code&gt;å¯ç”¨äºä½¿ç”¨&#39;=&amp;lsquo;æ“ä½œç¬¦ä½œæ¯”è¾ƒçš„ç´¢å¼•åˆ—ï¼Œæ¯”è¾ƒçš„å€¼å¯ä»¥æ˜¯å¸¸é‡ï¼Œä¹Ÿå¯ä»¥æ˜¯ä½¿ç”¨æ­¤è¡¨ä¹‹å‰è¯»å–çš„è¡¨çš„åˆ—è¡¨è¾¾å¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;ref&lt;/code&gt;
å¯¹äºæ¥è‡ªå‰é¢è¡¨çš„æ¯ä¸€è¡Œï¼Œåœ¨æ­¤è¡¨çš„ç´¢å¼•ä¸­å¯ä»¥åŒ¹é…åˆ°å¤šè¡Œï¼Œè‹¥è¿æ¥åªç”¨åˆ°ç´¢å¼•çš„æœ€å·¦å‰ç¼€æˆ–ç´¢å¼•ä¸æ˜¯ä¸»é”®æˆ–å”¯ä¸€ç´¢å¼•æ—¶ï¼Œä½¿ç”¨ &lt;code&gt;ref&lt;/code&gt; ç±»å‹ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œæ­¤ç±»å‹èƒ½å¤ŸåŒ¹é…åˆ°å¤šè¡Œè¿æ¥ï¼‰ã€‚
&lt;code&gt;ref&lt;/code&gt; å¯ç”¨äºä½¿ç”¨ &lt;code&gt;=&lt;/code&gt; æˆ– &lt;code&gt;&amp;lt;=&amp;gt;&lt;/code&gt; æ“ä½œç¬¦ä½œæ¯”è¾ƒçš„ç´¢å¼•åˆ—ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;fulltext&lt;/code&gt;
ç”¨äºå…¨æ–‡ç´¢å¼•çš„æ—¶å€™æ˜¯è¿™ä¸ªç±»å‹ï¼Œè¦æ³¨æ„ï¼Œ&lt;strong&gt;å…¨æ–‡ç´¢å¼•çš„ä¼˜å…ˆçº§å¾ˆé«˜&lt;/strong&gt;ï¼Œè‹¥å…¨æ–‡ç´¢å¼•å’Œæ™®é€šç´¢å¼•åŒæ—¶å­˜åœ¨ï¼Œmysqlä¸ç®¡ä»£ä»·ï¼Œä¼˜å…ˆé€‰æ‹©ä½¿ç”¨å…¨æ–‡ç´¢å¼•&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;ref_or_null&lt;/code&gt;
ç±»ä¼¼äº&lt;code&gt;ref&lt;/code&gt;ç±»å‹ï¼Œåªæ˜¯å¢åŠ äº†&lt;code&gt;null&lt;/code&gt;å€¼å¾—æ¯”è¾ƒï¼Œå®é™…ç”¨çš„ä¸å¤š&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;index_merge&lt;/code&gt;
æ­¤ç±»å‹è¡¨ç¤ºæŸ¥è¯¢ä½¿ç”¨ä¸¤ä¸ªä»¥ä¸Šç´¢å¼•ï¼Œæœ€åå–äº¤é›†æˆ–è€…å¹¶é›†ï¼Œå¸¸è§ &lt;code&gt;and&lt;/code&gt;, &lt;code&gt;or&lt;/code&gt;çš„æ¡ä»¶ä½¿ç”¨äº†ä¸åŒçš„ç´¢å¼•ï¼Œå®˜æ–¹æ’åºè¿™ä¸ªåœ¨&lt;code&gt;ref_or_null&lt;/code&gt;ä¹‹åï¼Œä½†æ˜¯å®é™…ä¸Šç”±äºè¦è¯»å–å¤šä¸ªç´¢å¼•ï¼Œæ€§èƒ½å¯èƒ½å¤§éƒ¨åˆ†æ—¶é—´éƒ½ä¸å¦‚&lt;code&gt;range&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;unique_subquery&lt;/code&gt;
ç”¨äº&lt;code&gt;WHERE&lt;/code&gt;ä¸­çš„ &lt;code&gt;IN&lt;/code&gt; å½¢å¼å­æŸ¥è¯¢ï¼Œå­æŸ¥è¯¢è¿”å›ä¸é‡å¤å€¼å”¯ä¸€å€¼ï¼Œå¯ä»¥å®Œå…¨æ›¿æ¢å­æŸ¥è¯¢ï¼Œæ•ˆç‡æ›´é«˜ã€‚
è¯¥ç±»å‹æ›¿æ¢äº†ä¸‹é¢å½¢å¼çš„ &lt;code&gt;IN&lt;/code&gt; å­æŸ¥è¯¢çš„ &lt;code&gt;ref&lt;/code&gt;:
&lt;code&gt;value IN (select primary_key FROM single_table WHERE some_expr)&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;index_subquery&lt;/code&gt;
è¯¥è¿æ¥ç±»å‹ç±»ä¼¼äº&lt;code&gt;unique_subquery&lt;/code&gt;ã€‚é€‚ç”¨äºéå”¯ä¸€ç´¢å¼•ï¼Œå¯ä»¥è¿”å›é‡å¤å€¼&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;range&lt;/code&gt;
ç´¢å¼•èŒƒå›´æŸ¥è¯¢ï¼Œå¸¸è§äºä½¿ç”¨&lt;code&gt;=&lt;/code&gt; &lt;code&gt;&amp;lt;&amp;gt;&lt;/code&gt; &lt;code&gt;&amp;gt;&lt;/code&gt; &lt;code&gt;&amp;gt;=&lt;/code&gt; &lt;code&gt;&amp;lt;&lt;/code&gt; &lt;code&gt;&amp;lt;=&lt;/code&gt; &lt;code&gt;IS NULL&lt;/code&gt; &lt;code&gt;&amp;lt;=&amp;gt;&lt;/code&gt; &lt;code&gt;BETWEEN&lt;/code&gt; &lt;code&gt;IN&lt;/code&gt; æˆ–è€… &lt;code&gt;LIKE&lt;/code&gt; ç­‰è¿ç®—ç¬¦çš„æŸ¥è¯¢ä¸­ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;index&lt;/code&gt;
ç´¢å¼•å…¨è¡¨æ‰«æï¼ŒæŠŠç´¢å¼•ä»å¤´åˆ°å°¾æ‰«ä¸€éã€‚è¿™é‡ŒåŒ…å«ä¸¤ç§æƒ…å†µï¼š
ä¸€ç§æ˜¯æŸ¥è¯¢ä½¿ç”¨äº†è¦†ç›–ç´¢å¼•ï¼Œé‚£ä¹ˆå®ƒåªéœ€è¦æ‰«æç´¢å¼•å°±å¯ä»¥è·å¾—æ•°æ®ï¼Œè¿™ä¸ªæ•ˆç‡è¦æ¯”å…¨è¡¨æ‰«æè¦å¿«ï¼Œå› ä¸ºç´¢å¼•é€šå¸¸æ¯”æ•°æ®è¡¨å°ï¼Œè€Œä¸”è¿˜èƒ½é¿å…äºŒæ¬¡æŸ¥è¯¢ã€‚åœ¨ &lt;code&gt;extra&lt;/code&gt; ä¸­æ˜¾ç¤º &lt;code&gt;Using index&lt;/code&gt;ï¼Œåä¹‹ï¼Œå¦‚æœåœ¨ç´¢å¼•ä¸Šè¿›è¡Œå…¨è¡¨æ‰«æï¼Œæ²¡æœ‰ &lt;code&gt;Using index&lt;/code&gt;çš„æç¤ºã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;all&lt;/code&gt;
å…¨è¡¨æ‰«æï¼Œæ€§èƒ½è¾ƒå·®&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;span id=&#34;possible_keys&#34;&gt;possible_keys&lt;/span&gt;ï¼šæŸ¥è¯¢å¯èƒ½ç”¨åˆ°çš„ç´¢å¼•ï¼Œå¦‚æœæ­¤åˆ—æ˜¯ &lt;code&gt;NULL&lt;/code&gt;ï¼Œåˆ™æ²¡æœ‰ç”¨åˆ°ç´¢å¼•ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;span id=&#34;key&#34;&gt;key&lt;/span&gt;ï¼šè¡¨ç¤ºMySQLå®é™…å†³å®šä½¿ç”¨çš„ç´¢å¼•ï¼Œå¦‚æœMySQLå†³å®šä½¿ç”¨å…¶ä¸­ä¸€ä¸ª &lt;code&gt;possible_keys&lt;/code&gt; ç´¢å¼•æ¥æŸ¥æ‰¾è¡Œï¼Œåˆ™è¯¥ç´¢å¼•å°†ä½œä¸ºé”®å€¼åˆ—å‡ºã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;span id=&#34;key_length&#34;&gt;key_length&lt;/span&gt;ï¼šæŸ¥è¯¢ç”¨åˆ°çš„ç´¢å¼•é•¿åº¦ï¼ˆå­—èŠ‚ï¼‰ï¼Œ
å¦‚æœæ˜¯å•åˆ—ç´¢å¼•ï¼Œé‚£å°±æ•´ä¸ªç´¢å¼•é•¿åº¦ç®—è¿›å»ï¼Œå¦‚æœæ˜¯å¤šåˆ—ç´¢å¼•ï¼Œé‚£ä¹ˆæŸ¥è¯¢ä¸ä¸€å®šéƒ½èƒ½ä½¿ç”¨åˆ°æ‰€æœ‰çš„åˆ—ï¼Œç”¨å¤šå°‘ç®—å¤šå°‘ã€‚ä¾‹å¦‚ç»„åˆç´¢å¼•ä¸º&lt;code&gt;idx_username_create_time&lt;/code&gt;ï¼Œå½“æŸ¥è¯¢è¯­å¥ä¸º &lt;code&gt;select * from user where username=&#39;qqq&#39;&lt;/code&gt;æ—¶ï¼Œåªç”¨åˆ°äº†&lt;code&gt;username&lt;/code&gt;å­—æ®µï¼Œé‚£ä¹ˆ&lt;code&gt;key_len&lt;/code&gt;åªä¼šè®¡ç®—&lt;code&gt;username&lt;/code&gt;å­—æ®µå ç”¨çš„å­—èŠ‚æ•°ï¼Œå‡å¦‚&lt;code&gt;username&lt;/code&gt;å­—æ®µç±»å‹ä¸º&lt;code&gt;varchar(50)&lt;/code&gt; NOT NULLï¼Œå­—ç¬¦ç¼–ç ä¸º&lt;code&gt;utf8mb3&lt;/code&gt;ï¼ˆutf8ç¼–ç ä¸€ä¸ªå­—ç¬¦å ç”¨3ä¸ªå­—èŠ‚ï¼Œgbkç¼–ç ä¸€ä¸ªå­—ç¬¦å 2å­—èŠ‚ï¼‰ï¼Œè®°å½•å­—ç¬¦ä¸²é•¿åº¦å ç”¨2å­—èŠ‚ï¼Œè®°å½•å­—æ®µä¸ä¸ºç©ºå ç”¨1å­—èŠ‚ï¼ˆè‹¥æ²¡æœ‰&lt;code&gt;NOT NULL&lt;/code&gt;é™åˆ¶åˆ™ä¸å ç”¨è¿™1ä¸ªå­—èŠ‚ï¼‰é‚£ä¹ˆ&lt;code&gt;key_len&lt;/code&gt;ä¸º 50 * 3 + 2 + 1 = 153å­—èŠ‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;span id=&#34;ref&#34;&gt;ref&lt;/span&gt;ï¼šå¦‚æœä½¿ç”¨çš„æ˜¯å¸¸æ•°ç­‰å€¼æŸ¥è¯¢ï¼Œè¿™é‡Œä¼šæ˜¾ç¤º&lt;code&gt;const&lt;/code&gt;ï¼Œå¦‚æœæ˜¯è¿æ¥æŸ¥è¯¢ï¼Œè¢«é©±åŠ¨è¡¨çš„æ‰§è¡Œè®¡åˆ’è¿™é‡Œä¼šæ˜¾ç¤ºé©±åŠ¨è¡¨çš„å…³è”å­—æ®µï¼Œå¦‚æœæ˜¯æ¡ä»¶ä½¿ç”¨äº†è¡¨è¾¾å¼æˆ–è€…å‡½æ•°ï¼Œæˆ–è€…æ¡ä»¶åˆ—è¡¨å‘ç”Ÿäº†å†…éƒ¨éšå¼è½¬æ¢ï¼Œè¿™é‡Œå¯èƒ½æ˜¾ç¤ºä¸º&lt;code&gt;func&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;span id=&#34;rows&#34;&gt;rows&lt;/span&gt;( &lt;strong&gt;é‡è¦&lt;/strong&gt; ):&lt;code&gt;rows&lt;/code&gt;ä¹Ÿæ˜¯ä¸€ä¸ªé‡è¦çš„å­—æ®µï¼Œè¿™æ˜¯MySQLä¼°ç®—çš„éœ€è¦æ‰«æçš„è¡Œæ•°ï¼ˆä¸æ˜¯ç²¾ç¡®å€¼ï¼‰ã€‚è¿™ä¸ªå€¼éå¸¸ç›´è§‚æ˜¾ç¤ºSQLçš„æ•ˆç‡å¥½åï¼ŒåŸåˆ™ä¸Š&lt;code&gt;rows&lt;/code&gt;è¶Šå°‘è¶Šå¥½ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;span id=&#34;filtered&#34;&gt;filtered&lt;/span&gt;ï¼šè¯¥å­—æ®µè¡¨ç¤ºå­˜å‚¨å¼•æ“è¿”å›çš„æ•°æ®åœ¨serverå±‚è¿‡æ»¤åï¼Œå‰©ä¸‹å¤šå°‘æ»¡è¶³æŸ¥è¯¢çš„è®°å½•æ•°é‡çš„æ¯”ä¾‹ï¼Œæ³¨æ„æ˜¯ç™¾åˆ†æ¯”ï¼Œä¸æ˜¯å…·ä½“è®°å½•æ•°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;span id=&#34;Extra&#34;&gt;Extra&lt;/span&gt;( &lt;strong&gt;é‡è¦&lt;/strong&gt; )ï¼š&lt;code&gt;EXPLAIN&lt;/code&gt;ä¸­å¾ˆå¤šé¢å¤–çš„ä¿¡æ¯ä¼šåœ¨&lt;code&gt;Extra&lt;/code&gt;å­—æ®µæ˜¾ç¤ºï¼Œå¸¸è§çš„æœ‰ä»¥ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;distinct&lt;/code&gt;&lt;/strong&gt;: åœ¨&lt;code&gt;select&lt;/code&gt;éƒ¨åˆ†ä½¿ç”¨äº†&lt;code&gt;distinct&lt;/code&gt;å…³é”®å­—&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Using filesort&lt;/code&gt;&lt;/strong&gt;: å½“&lt;code&gt;Extra&lt;/code&gt;ä¸­æœ‰&lt;code&gt;Using filesort&lt;/code&gt;æ—¶ï¼Œè¡¨ç¤ºMySQLéœ€é¢å¤–çš„æ’åºæ“ä½œï¼Œä¸èƒ½é€šè¿‡ç´¢å¼•é¡ºåºåˆ°è¾¾æ’åºæ•ˆæœï¼Œä¸€èˆ¬æœ‰ &lt;code&gt;Using filesort&lt;/code&gt; éƒ½å»ºè®®ä¼˜åŒ–å»æ‰ï¼Œå› ä¸ºè¿™æ ·çš„æŸ¥è¯¢CPUèµ„æºæ¶ˆè€—è¾ƒå¤§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Using index&lt;/code&gt;&lt;/strong&gt;: â€œè¦†ç›–ç´¢å¼•æ‰«æâ€ï¼Œè¡¨ç¤ºæŸ¥è¯¢åœ¨ç´¢å¼•æ ‘ç§å°±å¯æŸ¥æ‰¾æ‰€éœ€æ•°æ®ï¼Œä¸ç”¨æ‰«æè¡¨æ•°æ®æ–‡ä»¶ï¼Œå¾€å¾€è¯´æ˜æ€§èƒ½ä¸é”™ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Using temporary&lt;/code&gt;&lt;/strong&gt;: æŸ¥è¯¢æœ‰ä½¿ç”¨ä¸´æ—¶è¡¨ï¼Œä¸€èˆ¬å‡ºç°äºæ’åºï¼Œåˆ†ç»„å’Œå¤šè¡¨joinçš„æƒ…å†µï¼ŒæŸ¥è¯¢æ•ˆç‡ä¸é«˜ï¼Œå»ºè®®ä¼˜åŒ–ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- ä»¥ä¸Šå³æ˜¯`EXPLAIN`æ‰§è¡Œè®¡åˆ’è¿”å›çš„ç»“æœé›†ä¸­ä¸ªå­—æ®µçš„å«ä¹‰ã€‚ --&gt;</description>
        </item>
        <item>
        <title>Mysql -- çº¦æŸ</title>
        <link>https://x-xkang.com/p/mysql-%E7%BA%A6%E6%9D%9F/</link>
        <pubDate>Tue, 28 Feb 2023 10:24:41 +0800</pubDate>
        
        <guid>https://x-xkang.com/p/mysql-%E7%BA%A6%E6%9D%9F/</guid>
        <description>&lt;h3 id=&#34;æ¦‚å¿µ&#34;&gt;æ¦‚å¿µ&lt;/h3&gt;
&lt;p&gt;çº¦æŸæ˜¯ä½œç”¨äºè¡¨ä¸­å­—æ®µè¡Œçš„è§„åˆ™ï¼Œç”¨äºé™åˆ¶å­˜å‚¨åœ¨è¡¨ä¸­çš„æ•°æ®&lt;/p&gt;
&lt;h3 id=&#34;ç›®çš„&#34;&gt;ç›®çš„&lt;/h3&gt;
&lt;p&gt;ä¿è¯æ•°æ®åº“ä¸­æ•°æ®çš„æ­£ç¡®æ€§ã€æœ‰æ•ˆæ€§å’Œå®Œæ•´æ€§&lt;/p&gt;
&lt;h3 id=&#34;åˆ†ç±»&#34;&gt;åˆ†ç±»&lt;/h3&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;çº¦æŸ&lt;/th&gt;
&lt;th&gt;æè¿°&lt;/th&gt;
&lt;th&gt;å…³é”®å­—&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;éç©ºçº¦æŸ&lt;/td&gt;
&lt;td&gt;é™åˆ¶è¯¥å­—æ®µçš„æ•°æ®ä¸èƒ½ä¸ºnull&lt;/td&gt;
&lt;td&gt;&lt;code&gt;NOT NULL&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å”¯ä¸€çº¦æŸ&lt;/td&gt;
&lt;td&gt;ä¿è¯è¯¥å­—æ®µçš„æ‰€æœ‰æ•°æ®éƒ½æ˜¯å”¯ä¸€ã€ä¸é‡å¤çš„&lt;/td&gt;
&lt;td&gt;&lt;code&gt;UNIQUE&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ä¸»é”®çº¦æŸ&lt;/td&gt;
&lt;td&gt;ä¸»é”®æ˜¯ä¸€è¡Œæ•°æ®çš„å”¯ä¸€æ ‡è¯†ï¼Œè¦æ±‚éç©ºä¸”å”¯ä¸€&lt;/td&gt;
&lt;td&gt;&lt;code&gt;PRIMARY KEY&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;é»˜è®¤çº¦æŸ&lt;/td&gt;
&lt;td&gt;ä¿å­˜æ•°æ®æ—¶ï¼Œå¦‚æœæœªæŒ‡å®šè¯¥å­—æ®µçš„å€¼ï¼Œåˆ™é‡‡ç”¨é»˜è®¤å€¼&lt;/td&gt;
&lt;td&gt;&lt;code&gt;DEFAULT&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;æ£€æŸ¥çº¦æŸï¼ˆv8.0.16ä¹‹åï¼‰&lt;/td&gt;
&lt;td&gt;ä¿è¯å­—æ®µå€¼æ»¡è¶³æŸä¸€ä¸ªæ¡ä»¶&lt;/td&gt;
&lt;td&gt;&lt;code&gt;CHECK&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å¤–é”®çº¦æŸ&lt;/td&gt;
&lt;td&gt;ç”¨æ¥è®©ä¸¤å¼ è¡¨çš„æ•°æ®ä¹‹é—´å»ºç«‹è¿æ¥ï¼Œä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§&lt;/td&gt;
&lt;td&gt;&lt;code&gt;FOREIGN KEY&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;æ¼”ç¤º&#34;&gt;æ¼”ç¤º&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;k&#34;&gt;create&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;table&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;`&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;user_info&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;`&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
  &lt;span class=&#34;o&#34;&gt;`&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;`&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;11&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;not&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;null&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;primary&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;key&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;auto_increment&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;comment&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;ä¸»é”®ID&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;éç©ºçº¦æŸå’Œä¸»é”®çº¦æŸ&lt;/span&gt;
  &lt;span class=&#34;o&#34;&gt;`&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;phone&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;`&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;varchar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;not&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;null&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;unique&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;default&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;#39;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;comment&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;æ‰‹æœºå·ç &amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;éç©ºçº¦æŸå’Œå”¯ä¸€çº¦æŸ&lt;/span&gt;
  &lt;span class=&#34;o&#34;&gt;`&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nickname&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;`&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;varchar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;255&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;default&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;user&amp;#39;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;comment&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;æ˜µç§°&amp;#39;&lt;/span&gt;   &lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;é»˜è®¤çº¦æŸ&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;</description>
        </item>
        <item>
        <title>Mysql -- å¤šè¡¨æŸ¥è¯¢</title>
        <link>https://x-xkang.com/p/mysql-%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2/</link>
        <pubDate>Tue, 28 Feb 2023 10:12:34 +0800</pubDate>
        
        <guid>https://x-xkang.com/p/mysql-%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2/</guid>
        <description>&lt;h3 id=&#34;å†…è¿æ¥&#34;&gt;å†…è¿æ¥&lt;/h3&gt;
&lt;p&gt;å†…è¿æ¥æŸ¥è¯¢çš„æ˜¯ä¸¤å¼ è¡¨äº¤é›†çš„éƒ¨åˆ†&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;éšå¼å†…è¿æ¥&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;k&#34;&gt;SELECT&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;å­—æ®µåˆ—è¡¨&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;FROM&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;è¡¨&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;è¡¨&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;WHERE&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;æŸ¥è¯¢æ¡ä»¶&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;æ˜¾å¼å†…è¿æ¥&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;k&#34;&gt;SELECT&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;å­—æ®µåˆ—è¡¨&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;FROM&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;è¡¨&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;INNER&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;JOIN&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;è¡¨&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;ON&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;è¿æ¥æ¡ä»¶&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;  
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;hr&gt;
&lt;h3 id=&#34;å¤–è¿æ¥&#34;&gt;å¤–è¿æ¥&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å·¦å¤–è¿æ¥&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç›¸å½“äºæŸ¥è¯¢è¡¨1ï¼ˆå·¦è¡¨ï¼‰çš„æ‰€æœ‰æ•°æ®åŒ…å«è¡¨1å’Œè¡¨2äº¤é›†éƒ¨åˆ†çš„æ•°æ®&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;k&#34;&gt;SELECT&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;å­—æ®µåˆ—è¡¨&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;FROM&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;è¡¨&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;LEFT&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;OUTER&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;JOIN&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;è¡¨&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;ON&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;æ¡ä»¶&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;å³å¤–è¿æ¥&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç›¸å½“äºæŸ¥è¯¢è¡¨2ï¼ˆå³è¡¨ï¼‰çš„æ‰€æœ‰æ•°æ® åŒ…å« è¡¨1å’Œè¡¨2äº¤é›†éƒ¨åˆ†çš„æ•°æ®&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;è‡ªè¿æ¥&#34;&gt;è‡ªè¿æ¥&lt;/h3&gt;
&lt;p&gt;è‡ªè¿æ¥æŸ¥è¯¢ï¼Œå¯ä»¥æ˜¯å†…è¿æ¥æŸ¥è¯¢ï¼Œä¹Ÿå¯ä»¥æ˜¯å¤–è¿æ¥æŸ¥è¯¢ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;k&#34;&gt;SELECT&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;å­—æ®µåˆ—è¡¨&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;FROM&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;è¡¨&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;A&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;åˆ«å&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;A&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;JOIN&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;è¡¨&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;A&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;åˆ«å&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;B&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;ON&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;æ¡ä»¶&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;hr&gt;
&lt;h3 id=&#34;è”åˆæŸ¥è¯¢-union-union-all&#34;&gt;è”åˆæŸ¥è¯¢-union, union all&lt;/h3&gt;
&lt;p&gt;å¯¹äºunionæŸ¥è¯¢ï¼Œå°±æ˜¯æŠŠå¤šæ¬¡æŸ¥è¯¢çš„ç»“æœå¹¶èµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªæ–°çš„æŸ¥è¯¢ç»“æœé›†ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;k&#34;&gt;SELECT&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;å­—æ®µåˆ—è¡¨&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;FROM&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;è¡¨&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;A&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;UNION&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;ALL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;SELECT&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;å­—æ®µåˆ—è¡¨&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;FROM&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;è¡¨&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;B&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;hr&gt;
&lt;h3 id=&#34;å­æŸ¥è¯¢&#34;&gt;å­æŸ¥è¯¢&lt;/h3&gt;
&lt;p&gt;SQLè¯­å¥ä¸­åµŒå¥—SELECTè¯­å¥ï¼Œç§°ä¸ºåµŒå¥—æŸ¥è¯¢ï¼Œåˆç§°å­æŸ¥è¯¢ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;k&#34;&gt;SELECT&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;FROM&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;è¡¨&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;WHERE&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;å­—æ®µ&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;SELECT&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;å­—æ®µ&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;FROM&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;è¡¨&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å­æŸ¥è¯¢å¤–éƒ¨çš„è¯­å¥å¯ä»¥æ˜¯ INSERT / UPDATE / DELETE / SELECT çš„ä»»ä½•ä¸€ä¸ªã€‚&lt;/p&gt;
&lt;p&gt;æ ¹æ®å­æŸ¥è¯¢ç»“æœä¸åŒï¼Œåˆ†ä¸ºï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;æ ‡é‡å­æŸ¥è¯¢ï¼ˆå­æŸ¥è¯¢ç»“æœä¸ºå•ä¸ªå€¼ï¼‰&lt;/li&gt;
&lt;li&gt;åˆ—å­æŸ¥è¯¢ï¼ˆå­æŸ¥è¯¢ç»“æœä¸ºä¸€åˆ—ï¼‰&lt;/li&gt;
&lt;li&gt;è¡Œå­æŸ¥è¯¢ï¼ˆå­æŸ¥è¯¢ç»“æœä¸ºä¸€è¡Œï¼‰&lt;/li&gt;
&lt;li&gt;è¡¨å­æŸ¥è¯¢ï¼ˆå­æŸ¥è¯¢ç»“æœä¸ºå¤šè¡Œå¤šåˆ—ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ ¹æ®å­æŸ¥è¯¢ä½ç½®ï¼Œåˆ†ä¸ºï¼šWHEREä¹‹åã€FROMä¹‹åã€SELECTä¹‹åã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h4 id=&#34;å­æŸ¥è¯¢----æ ‡é‡å­æŸ¥è¯¢&#34;&gt;å­æŸ¥è¯¢ &amp;ndash; æ ‡é‡å­æŸ¥è¯¢&lt;/h4&gt;
&lt;p&gt;æ ‡é‡å­æŸ¥è¯¢è¿”å›çš„ç»“æœæ˜¯å•ä¸ªå€¼ï¼ˆæ•°å­—ã€å­—ç¬¦ä¸²ã€æ—¥æœŸç­‰ï¼‰ï¼Œæœ€ç®€å•çš„å½¢å¼ï¼Œè¿™ç§å­æŸ¥è¯¢ç§°ä¸ºæ ‡é‡å­æŸ¥è¯¢ã€‚
å¸¸ç”¨çš„æ“ä½œç¬¦ï¼š &lt;code&gt;=&lt;/code&gt; &lt;code&gt;&amp;lt;&amp;gt;&lt;/code&gt; &lt;code&gt;&amp;gt;&lt;/code&gt; &lt;code&gt;&amp;gt;=&lt;/code&gt; &lt;code&gt;&amp;lt;&lt;/code&gt; &lt;code&gt;&amp;lt;=&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;k&#34;&gt;SELECT&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;å­—æ®µåˆ—è¡¨&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;FROM&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;è¡¨&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;WHERE&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;å­—æ®µ&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;SELECT&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;å­—æ®µ&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;FROM&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;è¡¨&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;WHERE&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;æ¡ä»¶&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;hr&gt;
&lt;h4 id=&#34;å­æŸ¥è¯¢----åˆ—å­æŸ¥è¯¢&#34;&gt;å­æŸ¥è¯¢ &amp;ndash; åˆ—å­æŸ¥è¯¢&lt;/h4&gt;
&lt;p&gt;å­æŸ¥è¯¢è¿”å›çš„ç»“æœæ˜¯ä¸€åˆ—ï¼ˆå¯ä»¥æ˜¯å¤šè¡Œï¼‰ï¼Œè¿™ç§å­æŸ¥è¯¢ç§°ä¸ºåˆ—å­æŸ¥è¯¢ã€‚
å¸¸ç”¨çš„æ“ä½œç¬¦ï¼š&lt;code&gt;IN&lt;/code&gt; &lt;code&gt;NOT IN&lt;/code&gt; &lt;code&gt;ANY&lt;/code&gt; &lt;code&gt;SOME&lt;/code&gt; &lt;code&gt;ALL&lt;/code&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ“ä½œç¬¦&lt;/th&gt;
&lt;th&gt;æè¿°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;IN&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;åœ¨æŒ‡å®šçš„é›†åˆèŒƒå›´ä¹‹å†…ï¼Œå¤šé€‰ä¸€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;NOT IN&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ä¸åœ¨æŒ‡å®šçš„é›†åˆèŒƒå›´å†…&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;ANY&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å­æŸ¥è¯¢è¿”å›åˆ—è¡¨ä¸­ï¼Œæœ‰ä»»æ„ä¸€ä¸ªæ»¡è¶³å³å¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;SOME&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ä¸&lt;code&gt;ANY&lt;/code&gt;ç­‰åŒï¼Œä½¿ç”¨&lt;code&gt;SOME&lt;/code&gt;çš„åœ°æ–¹éƒ½å¯ä»¥ä½¿ç”¨&lt;code&gt;ANY&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;ALL&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å­æŸ¥è¯¢è¿”å›åˆ—è¡¨çš„æ‰€æœ‰å€¼éƒ½å¿…é¡»æ»¡è¶³&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;k&#34;&gt;SELECT&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;å­—æ®µåˆ—è¡¨&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;FROM&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;è¡¨&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;WHERE&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;å­—æ®µ&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;IN&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;SELECT&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;å­—æ®µ&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;FROM&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;è¡¨&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;WHERE&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;æ¡ä»¶&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;hr&gt;
&lt;h4 id=&#34;å­æŸ¥è¯¢----è¡Œå­æŸ¥è¯¢&#34;&gt;å­æŸ¥è¯¢ &amp;ndash; è¡Œå­æŸ¥è¯¢&lt;/h4&gt;
&lt;p&gt;å­æŸ¥è¯¢è¿”å›çš„ç»“æœæ˜¯ä¸€è¡Œï¼ˆå¯ä»¥æ˜¯å¤šåˆ—ï¼‰ï¼Œè¿™ç§æŸ¥è¯¢ç§°ä¸ºè¡Œå­æŸ¥è¯¢ã€‚&lt;/p&gt;
&lt;p&gt;å¸¸ç”¨çš„æ“ä½œç¬¦ï¼š&lt;code&gt;=&lt;/code&gt; &lt;code&gt;&amp;lt;&amp;gt;&lt;/code&gt; &lt;code&gt;IN&lt;/code&gt; &lt;code&gt;NOT IN&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;å­æŸ¥è¯¢è¿”å›ä¸€è¡Œæ•°æ®ï¼Œå¯ä»¥æœ‰å¤šä¸ªå­—æ®µ&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;SELECT&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;å­—æ®µåˆ—è¡¨&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;FROM&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;è¡¨&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;WHERE&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;å­—æ®µ&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ï¼Œ&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;å­—æ®µ&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;SELECT&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;å­—æ®µ&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ï¼Œ&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;å­—æ®µ&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;FROM&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;è¡¨&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;WHERE&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;è¡¨&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;hr&gt;
&lt;h4 id=&#34;å­æŸ¥è¯¢----è¡¨å­æŸ¥è¯¢&#34;&gt;å­æŸ¥è¯¢ &amp;ndash; è¡¨å­æŸ¥è¯¢&lt;/h4&gt;
&lt;p&gt;å­æŸ¥è¯¢è¿”å›çš„ç»“æœæ˜¯å¤šè¡Œå¤šåˆ—ï¼Œè¿™ç§å­æŸ¥è¯¢ç§°ä¸ºè¡¨å­æŸ¥è¯¢ã€‚
å¸¸ç”¨çš„æ“ä½œç¬¦ï¼š&lt;code&gt;IN&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;å­æŸ¥è¯¢è¿”å›çš„æ˜¯å¤šè¡Œå¤šåˆ—æ•°æ®ï¼Œå­—æ®µ&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;å’Œå­—æ®µ&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;åˆ†åˆ«åŒ¹é…å­æŸ¥è¯¢ç»“æœå„è¡Œä¸­çš„å­—æ®µ&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;å’Œå­—æ®µ&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;SELECT&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;å­—æ®µåˆ—è¡¨&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;FROM&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;è¡¨&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;WHERE&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;å­—æ®µ&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;å­—æ®µ&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;IN&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;SELECT&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;å­—æ®µ&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ï¼Œ&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;å­—æ®µ&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;FROM&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;è¡¨&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;</description>
        </item>
        <item>
        <title>Mysql -- é”åˆ†æ</title>
        <link>https://x-xkang.com/p/mysql-%E9%94%81%E5%88%86%E6%9E%90/</link>
        <pubDate>Fri, 16 Dec 2022 17:54:33 +0800</pubDate>
        
        <guid>https://x-xkang.com/p/mysql-%E9%94%81%E5%88%86%E6%9E%90/</guid>
        <description>&lt;h3 id=&#34;ä¸€å…¨å±€é”&#34;&gt;ä¸€ã€å…¨å±€é”&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å¯¹æ•´ä¸ªæ•°æ®åº“å®ä¾‹åŠ é”ï¼ŒåŠ é”åæ•´ä¸ªæ•°æ®åº“å®ä¾‹å¤„äºåªè¯»çŠ¶æ€ï¼Œåç»­çš„DMLçš„å†™è¯­å¥ï¼ŒDDLè¯­å¥å·²ç»æ›´æ–°æ“ä½œçš„äº‹åŠ¡æäº¤è¯­å¥éƒ½å°†é˜»å¡ã€‚&lt;/li&gt;
&lt;li&gt;å…¶å…¸å‹çš„ä½¿ç”¨åœºæ™¯æ˜¯åšå…¨åº“çš„é€»è¾‘å¤‡ä»½ï¼Œå¯¹æ‰€æœ‰çš„è¡¨è¿›è¡Œé”å®šï¼Œä»è€Œè·å–ä¸€è‡´æ€§çš„è§†å›¾ï¼Œä¿è¯æ•°æ®çš„å®Œæ•´æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åŠ é”æ“ä½œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;c1&#34;&gt;-- åŠ é”
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mysql&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;flush&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tables&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;with&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;read&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;lock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;-- TODO. é€»è¾‘å¤‡ä»½
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mysqldump&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;uroot&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p123456&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dbname&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dbname&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;sql&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;-- TODO. ä¸­é—´ç©¿æ’çš„ insert/update/delete è¯­å¥å°†é˜»å¡
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mysql&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;update&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;user&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;set&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;`&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;password&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;`=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;654321&amp;#39;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;where&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;`&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;`&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;-- é‡Šæ”¾é”
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mysql&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;unlock&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tables&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç‰¹ç‚¹ï¼š&lt;/p&gt;
&lt;p&gt;æ•°æ®åº“ä¸­åŠ å…¨å±€é”æ˜¯æ¯”è¾ƒé‡çš„æ“ä½œï¼Œå­˜åœ¨ä¸€ä¸‹é—®é¢˜&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚æœåœ¨ä¸»åº“ä¸Šå¤‡ä»½ï¼Œé‚£ä¹ˆåœ¨å¤‡ä»½æœŸé—´éƒ½ä¸èƒ½æ‰§è¡Œæ›´æ–°ï¼Œä¸šåŠ¡åŸºæœ¬ä¸Šå°±å¾—åœæ‘†ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœåœ¨ä»åº“ä¸Šå¤‡ä»½ï¼Œé‚£ä¹ˆåœ¨å¤‡ä»½æœŸé—´ä»åº“ä¸èƒ½æ‰§è¡Œä»ä¸»åº“åŒæ­¥è¿‡æ¥çš„äºŒè¿›åˆ¶æ–‡ä»¶(binlog)ï¼Œä¼šå¯¼è‡´ä¸»ä»å»¶è¿Ÿã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨Innodbå­˜å‚¨å¼•æ“ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å†å¤‡ä»½æ—¶åŠ ä¸Šå‚æ•° &amp;ndash;single-transaction å‚æ•°æ¥å®Œæˆä¸åŠ é”çš„ä¸€è‡´æ€§æ•°æ®å¤‡ä»½&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;n&#34;&gt;mysqldump&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;--single-transaction -uroot -p123456 [dbname] &amp;gt; dbname.sql
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;hr&gt;
&lt;h3 id=&#34;äºŒè¡¨çº§é”&#34;&gt;äºŒã€è¡¨çº§é”&lt;/h3&gt;
&lt;p&gt;ä»‹ç»
æ¯æ¬¡æ“ä½œé”ä½æ•´å¼ è¡¨ï¼Œé”å®šåŠ›åº¦å¤§ï¼Œå‘ç”Ÿé”å†²çªçš„æ¦‚ç‡æœ€é«˜ï¼Œå¹¶å‘åº¦æœ€ä½ã€‚åº”ç”¨åœ¨Innodb,MyIsamï¼ŒBDBç­‰å­˜å‚¨å¼•æ“ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;è¡¨çº§é”ä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š&lt;/p&gt;
&lt;h4 id=&#34;1-è¡¨é”&#34;&gt;1. è¡¨é”&lt;/h4&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;è¡¨å…±äº«è¯»é”&lt;/li&gt;
&lt;li&gt;è¡¨ç‹¬å å†™é”&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ“ä½œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;c1&#34;&gt;-- åŠ é”
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mysql&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;lock&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tables&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;table_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;read&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;write&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;-- é‡Šæ”¾é”
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mysql&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;unlock&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tables&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;è¯»é”ä¸ä¼šé˜»å¡å…¶ä»–å®¢æˆ·ç«¯çš„è¯»æ“ä½œï¼Œä½†æ˜¯ä¼šé˜»å¡å†™æ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;å†™é”æ—¢ä¼šé˜»å¡å…¶ä»–å®¢æˆ·ç«¯çš„è¯»ï¼Œä¹Ÿä¼šé˜»å¡å…¶ä»–å®¢æˆ·ç«¯çš„å†™ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h4 id=&#34;2-å…ƒæ•°æ®é”meta-data-lock-mdl&#34;&gt;2. å…ƒæ•°æ®é”(meta data lock, mdl)&lt;/h4&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;MDL&lt;/code&gt;åŠ é”è¿‡ç¨‹æ˜¯ç³»ç»Ÿè‡ªåŠ¨æ§åˆ¶çš„ï¼Œæ— éœ€æ˜¾å¼ä½¿ç”¨ï¼Œåœ¨è®¿é—®ä¸€å¼ è¡¨çš„æ—¶å€™ä¼šè‡ªåŠ¨åŠ ä¸Šï¼Œä¸»è¦ä½œç”¨æ˜¯ç»´æŠ¤è¡¨å…ƒæ•°æ®çš„æ•°æ®ä¸€è‡´æ€§ï¼Œåœ¨è¡¨ä¸Šæœ‰æ´»åŠ¨äº‹åŠ¡çš„æ—¶å€™ï¼Œä¸å¯ä»¥å¯¹å…ƒæ•°æ®è¿›è¡Œå†™æ“ä½œï¼Œä¸ºäº†é¿å…MDLå’ŒDDLçš„å†²çªï¼Œä¿è¯è¯»å†™çš„æ­£ç¡®æ€§&lt;/li&gt;
&lt;li&gt;åœ¨MySQL5.5ä¸­åŠ å…¥äº†MDLï¼Œå½“å¯¹ä¸€å¼ è¡¨è¿›è¡Œå¢åˆ æ”¹æŸ¥çš„æ—¶å€™ï¼ŒåŠ MDLè¯»é”ï¼ˆå…±äº«é”ï¼‰ï¼Œå½“å¯¹è¡¨ç»“æ„è¿›è¡Œä¿®æ”¹çš„æ—¶å€™ï¼ŒåŠ MDLå†™é”ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;æŸ¥çœ‹å…ƒæ•°æ®é”&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;n&#34;&gt;mysql&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;select&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;object_type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;object_schema&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;object_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;lock_type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;lock_duration&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;performance_schema&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;metadata_locks&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å¯¹åº”SQL&lt;/th&gt;
&lt;th&gt;é”ç±»å‹&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;lock tables [t_name] read/write&lt;/td&gt;
&lt;td&gt;&lt;code&gt;SHARED_READ_ONLY&lt;/code&gt; / &lt;code&gt;SHARED_NO_READ_WRITE&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;selectã€select &amp;hellip; lock in share mode&lt;/td&gt;
&lt;td&gt;&lt;code&gt;SHARED_READ&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ä¸&lt;code&gt;SHARED_READ&lt;/code&gt;/&lt;code&gt;SHARED_WRITE&lt;/code&gt;å…¼å®¹ï¼Œä¸&lt;code&gt;EXCLUSIVE&lt;/code&gt; äº’æ–¥&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;insertã€updateã€deleteã€select &amp;hellip; for update&lt;/td&gt;
&lt;td&gt;&lt;code&gt;SHARED_WRITE&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ä¸&lt;code&gt;SHARE_READ&lt;/code&gt;/ &lt;code&gt;SHARED_WRITE&lt;/code&gt;å…¼å®¹ï¼Œä¸&lt;code&gt;EXCLUSIVE&lt;/code&gt; äº’æ–¥&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;alter table &amp;hellip;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;EXCLUSIVE&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ä¸å…¶ä»–çš„ &lt;code&gt;MDL&lt;/code&gt; éƒ½äº’æ–¥&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h4 id=&#34;3-æ„å‘é”&#34;&gt;3. æ„å‘é”&lt;/h4&gt;
&lt;p&gt;ä¸ºäº†é¿å…&lt;code&gt;MDL&lt;/code&gt;åœ¨æ‰§è¡Œæ—¶ï¼ŒåŠ çš„è¡¨é”ä¸è¡Œé”å†²çªï¼Œåœ¨InnoDBä¸­å¼•å…¥äº†æ„å‘é”ï¼Œä½¿å¾—è¡¨é”ä¸ç”¨æ£€æŸ¥æ¯è¡Œæ•°æ®æ˜¯å¦åŠ é”ï¼Œä½¿ç”¨æ„å‘é”æ¥å‡å°‘è¡¨é”çš„æ£€æŸ¥ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;æ„å‘å…±äº«é”ï¼ˆISï¼‰ï¼šç”±è¯­å¥ select &amp;hellip; lock in share mode æ·»åŠ ï¼Œä¸è¡¨é”å…±äº«é”ï¼ˆreadï¼‰å…¼å®¹ï¼Œä¸è¡¨é”æ’å®ƒé”ï¼ˆwriteï¼‰äº’æ–¥ã€‚&lt;/li&gt;
&lt;li&gt;æ„å‘æ’å®ƒé”ï¼ˆIXï¼‰ï¼šç”±è¯­å¥ insertã€updateã€deleteã€select &amp;hellip; for update æ·»åŠ ï¼Œä¸è¡¨é”å…±äº«é”ï¼ˆreadï¼‰å’Œè¡¨é”äº’æ–¥é”ï¼ˆwriteï¼‰éƒ½äº’æ–¥ã€‚æ„å‘é”ä¹‹é—´ä¸ä¼šäº’æ–¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;æŸ¥çœ‹æ„å‘é”ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;n&#34;&gt;mysql&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;select&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;object_schema&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;object_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;index_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;lock_type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;lock_mode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;lock_data&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;performance_schema&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data_locks&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;ä¸‰è¡Œçº§é”&#34;&gt;ä¸‰ã€è¡Œçº§é”&lt;/h3&gt;
&lt;p&gt;æ¯æ¬¡æ“ä½œé”ä½å¯¹åº”çš„æ•°æ®è¡Œã€‚é”å®šç²’åº¦æœ€å°ï¼Œå‘ç”Ÿé”å†²çªçš„æ¦‚ç‡æœ€ä½ï¼Œå¹¶å‘åº¦æœ€é«˜ã€‚åº”ç”¨åœ¨Innodbå­˜å‚¨å¼•æ“ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;Innodbçš„æ•°æ®æ˜¯é²«é±¼ç´¢å¼•ç»„ç»‡çš„ï¼Œè¡Œé”æ˜¯é€šè¿‡å¯¹ç´¢å¼•ä¸Šçš„ç´¢å¼•é¡¹åŠ é”æ¥å®ç°çš„ï¼Œè€Œä¸æ˜¯å¯¹è®°å½•åŠ çš„é”ï¼Œå¯¹äºè¡Œçº§é”ï¼Œä¸»è¦åˆ†ä¸ºä»¥ä¸‹ä¸‰ç±»ï¼š&lt;/p&gt;
&lt;h4 id=&#34;1-è¡Œé”&#34;&gt;1. è¡Œé”&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;Record Lock&lt;/code&gt;ï¼šé”å®šå•ä¸ªè®°å½•çš„é”ï¼Œé˜²æ­¢å…¶ä»–äº‹åŠ¡å¯¹æ­¤è¿›è¡Œupdateå’Œdeleteï¼Œåœ¨ RC å’Œ RR éš”ç¦»çº§åˆ«ä¸‹éƒ½æ”¯æŒã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Innodbå®ç°äº†ä»¥ä¸‹ä¸¤ç§ç±»å‹çš„è¡Œé”ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;å…±äº«é”ï¼ˆSï¼‰ï¼šå…è®¸ä¸€ä¸ªäº‹åŠ¡å»è¯»ä¸€è¡Œï¼Œé˜»æ­¢å…¶ä»–äº‹åŠ¡è·å¾—ç›¸åŒæ•°æ®é›†çš„æ’å®ƒé”ã€‚&lt;/li&gt;
&lt;li&gt;æ’å®ƒé”ï¼ˆXï¼‰ï¼šå…è®¸è·å–æ’å®ƒé”çš„äº‹åŠ¡æ›´æ–°æ•°æ®ï¼Œé˜»æ­¢å…¶ä»–äº‹åŠ¡è·å¾—ç›¸åŒæ•°æ®é›†çš„å…±äº«é”å’Œæ’å®ƒé”ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å½“å‰é”ç±»å‹ \ è¯·æ±‚é”ç±»å‹&lt;/th&gt;
&lt;th&gt;Sï¼ˆå…±äº«é”ï¼‰&lt;/th&gt;
&lt;th&gt;Xï¼ˆæ’å®ƒé”ï¼‰&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;S ï¼ˆå…±äº«é”ï¼‰&lt;/td&gt;
&lt;td&gt;å…¼å®¹&lt;/td&gt;
&lt;td&gt;å†²çª&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;X ï¼ˆæ’å®ƒé”ï¼‰&lt;/td&gt;
&lt;td&gt;å†²çª&lt;/td&gt;
&lt;td&gt;å†²çª&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;ul&gt;
&lt;li&gt;ä¸åŒçš„SQLä½¿ç”¨çš„é”ç±»å‹ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;SQL&lt;/th&gt;
&lt;th&gt;è¡Œé”ç±»å‹&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;INSERT &amp;hellip;&lt;/td&gt;
&lt;td&gt;æ’å®ƒé”&lt;/td&gt;
&lt;td&gt;è‡ªåŠ¨åŠ é”&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;UPDATE &amp;hellip;&lt;/td&gt;
&lt;td&gt;æ’å®ƒé”&lt;/td&gt;
&lt;td&gt;è‡ªåŠ¨åŠ é”&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;DELETE &amp;hellip;&lt;/td&gt;
&lt;td&gt;æ’å®ƒé”&lt;/td&gt;
&lt;td&gt;è‡ªåŠ¨åŠ é”&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SELECTï¼ˆæ­£å¸¸ï¼‰&lt;/td&gt;
&lt;td&gt;ä¸åŠ ä»»ä½•é”&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SELECT &amp;hellip; LOCK IN SHARE MODE&lt;/td&gt;
&lt;td&gt;å…±äº«é”&lt;/td&gt;
&lt;td&gt;éœ€è¦æ‰‹åŠ¨åœ¨ &lt;code&gt;SELECT&lt;/code&gt; ä¹‹ååŠ  &lt;code&gt;LOCK IN SHARE MODE&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;SELECT &amp;hellip; FOR UPDATE&lt;/td&gt;
&lt;td&gt;æ’å®ƒé”&lt;/td&gt;
&lt;td&gt;éœ€è¦æ‰‹åŠ¨åœ¨ &lt;code&gt;SELECT&lt;/code&gt; ä¹‹ååŠ  &lt;code&gt;FOR UPDATE&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;ul&gt;
&lt;li&gt;è¡Œé”-æ¼”ç¤ºï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é»˜è®¤æƒ…å†µä¸‹ï¼ŒInnoDBåœ¨REPEATABLE READ äº‹åŠ¡éš”ç¦»ç•Œåˆ«è¿è¡Œï¼ŒInnoDB ä½¿ç”¨next key é”è¿›è¡Œæœç´¢å’Œç´¢å¼•æ‰«æï¼Œä»¥é˜²æ­¢å¹»è¯»ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;é’ˆå¯¹å”¯ä¸€ç´¢å¼•è¿›è¡Œæ£€ç´¢æ—¶ï¼Œå¯¹å·²å­˜åœ¨çš„è®°å½•è¿›è¡Œç­‰å€¼åŒ¹é…æ—¶ï¼Œå°†ä¼šè‡ªåŠ¨ä¼˜åŒ–ä¸ºè¡Œé”ã€‚&lt;/li&gt;
&lt;li&gt;InnoDBçš„è¡Œé”æ˜¯é’ˆå¯¹äºç´¢å¼•åŠ çš„é”ä¸é€šè¿‡ç´¢å¼•æ¡ä»¶æ£€ç´¢æ•°æ®ï¼Œé‚£ä¹ˆInnoDBå°†å¯¹è¡¨ä¸­çš„æ‰€æœ‰æ•°æ®è¿›è¡ŒåŠ é”ï¼Œæ­¤æ—¶å°±ä¼š&lt;strong&gt;å‡çº§ä¸ºè¡¨é”&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¯ä»¥é€šè¿‡ä¸€ä¸‹SQLï¼ŒæŸ¥çœ‹æ„å‘é”ä»¥åŠè¡Œé”çš„åŠ é”æƒ…å†µï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;n&#34;&gt;mysql&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;select&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;object_schema&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;object_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;index_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;lock_type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;lock_mode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;lock_data&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;performance_schema&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data_locks&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;hr&gt;
&lt;h4 id=&#34;2-é—´éš™é”&#34;&gt;2. é—´éš™é”&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;Gap Lock&lt;/code&gt;: é”å®šç´¢å¼•è®°å½•é—´éš™ï¼ˆä¸åŒ…å«è¯¥è®°å½•ï¼‰ï¼Œç¡®ä¿ç´¢å¼•è®°å½•é—´éš™ä¸å˜ï¼Œé˜²æ­¢å…¶ä»–äº‹åŠ¡åœ¨è¿™ä¸ªé—´éš™è¿›è¡Œinsertï¼Œäº§ç”Ÿå¹»è¯»ï¼Œåœ¨RRéš”ç¦»çº§åˆ«ä¸‹éƒ½æ”¯æŒã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h4 id=&#34;3-ä¸´é”®é”&#34;&gt;3. ä¸´é”®é”&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;Next-Key Lock&lt;/code&gt;: è¡Œé”å’Œé—´éš™é”ç»„åˆï¼ŒåŒæ—¶é”ä½æ•°æ®ï¼Œå¹¶é”ä½æ•°æ®å‰é¢çš„é—´éš™Gapã€‚åœ¨RRéš”ç¦»çº§åˆ«ä¸‹æ”¯æŒã€‚&lt;/p&gt;
&lt;h4 id=&#34;4-é—´éš™é”ä¸´é”®é”-æ¼”ç¤º&#34;&gt;4. é—´éš™é”/ä¸´é”®é” æ¼”ç¤º&lt;/h4&gt;
&lt;p&gt;é»˜è®¤æƒ…å†µä¸‹ï¼ŒInnoDBåœ¨Repeatable read äº‹åŠ¡éš”ç¦»çº§åˆ«è¿è¡Œï¼ŒInnoDBä½¿ç”¨ Next-key é”è¿›è¡Œæœç´¢å’Œç´¢å¼•æ‰«æï¼Œä»¥é˜²æ­¢å¹»è¯»ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;ç´¢å¼•ä¸Šçš„ç­‰å€¼æŸ¥è¯¢ï¼ˆå”¯ä¸€ç´¢å¼•ï¼‰ï¼Œç»™ä¸å­˜åœ¨çš„è®°å½•åŠ é”æ—¶ä¼˜åŒ–ä¸ºé—´éš™é”ã€‚&lt;/li&gt;
&lt;li&gt;ç´¢å¼•ä¸Šçš„ç­‰å€¼æŸ¥è¯¢ï¼ˆæ™®é€šç´¢å¼•ï¼‰ï¼Œå‘å³éå†æ—¶æœ€åä¸€ä¸ªå€¼ä¸æ»¡è¶³æŸ¥è¯¢éœ€æ±‚æ—¶ï¼Œnext-key lock é€€åŒ–ä¸ºé—´éš™é”ã€‚&lt;/li&gt;
&lt;li&gt;ç´¢å¼•ä¸Šçš„èŒƒå›´æŸ¥è¯¢ï¼ˆå”¯ä¸€ç´¢å¼•ï¼‰ï¼Œä¼šè®¿é—®åˆ°ä¸æ»¡è¶³æ¡ä»¶çš„ç¬¬ä¸€ä¸ªå€¼ä¸ºæ­¢ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;span style=&#34;color:red&#34;&gt;æ³¨æ„ï¼šé—´éš™é”çš„å”¯ä¸€ç›®çš„æ˜¯é˜²æ­¢å…¶ä»–äº‹åŠ¡æ’å…¥é—´éš™ï¼Œé—´éš™é”å¯ä»¥å…±å­˜ï¼Œä¸€ä¸ªäº‹åŠ¡é‡‡ç”¨çš„é—´éš™é”ä¸ä¼šé˜»æ­¢å¦ä¸€ä¸ªäº‹åŠ¡åœ¨åŒä¸€é—´éš™ä¸Šä½¿ç”¨é—´éš™é” &lt;/span&gt;&lt;/p&gt;</description>
        </item>
        <item>
        <title>Mysql -- dockeréƒ¨ç½²é›†ç¾¤ä¹‹ä¸»ä»å¤åˆ¶æ–¹æ¡ˆ</title>
        <link>https://x-xkang.com/p/mysql-docker%E9%83%A8%E7%BD%B2%E9%9B%86%E7%BE%A4%E4%B9%8B%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6%E6%96%B9%E6%A1%88/</link>
        <pubDate>Fri, 02 Dec 2022 11:52:10 +0800</pubDate>
        
        <guid>https://x-xkang.com/p/mysql-docker%E9%83%A8%E7%BD%B2%E9%9B%86%E7%BE%A4%E4%B9%8B%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6%E6%96%B9%E6%A1%88/</guid>
        <description>&lt;h3 id=&#34;ä¸€ç¯å¢ƒå‡†å¤‡&#34;&gt;ä¸€ã€ç¯å¢ƒå‡†å¤‡&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;OS: win10&lt;/li&gt;
&lt;li&gt;docker engine: v20.10.14&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;äºŒåˆ›å»ºmysqlæœåŠ¡å®¹å™¨&#34;&gt;äºŒã€åˆ›å»ºMySQLæœåŠ¡å®¹å™¨&lt;/h3&gt;
&lt;h4 id=&#34;1åˆ›å»º-master-èŠ‚ç‚¹æœåŠ¡&#34;&gt;1.åˆ›å»º master èŠ‚ç‚¹æœåŠ¡&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;ç¼–è¾‘æ•°æ®åº“é…ç½®æ–‡ä»¶ï¼Œå°†é…ç½®æ–‡ä»¶ä»¥åŠæ•°æ®å­˜å‚¨ç›®å½•æŒ‚è½½åˆ°å®¿ä¸»æœºä¸Š&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;masterèŠ‚ç‚¹é…ç½®æ–‡ä»¶&lt;code&gt;mysql-master.cnf&lt;/code&gt;å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;[mysqld]
# å®šä¹‰æœåŠ¡id 
server-id=1

#å¯ç”¨äºŒè¿›åˆ¶æ—¥å¿—
log-bin=mysql-bin

# è®¾ç½®ä¸è¦å¤åˆ¶çš„æ•°æ®åº“(å¯è®¾ç½®å¤šä¸ª)
# binlog-ignore-db=information_schema

# è®¾ç½®éœ€è¦å¤åˆ¶çš„æ•°æ®åº“ éœ€è¦å¤åˆ¶çš„ä¸»æ•°æ®åº“åå­—
binlog-do-db=testdb

#è®¾ç½®logbinæ ¼å¼
binlog_format=STATEMENT

# å¼€å¯gtid
enforce-gtid-consistency=on
gtid-mode=on
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;åˆ›å»º&lt;code&gt;master&lt;/code&gt;èŠ‚ç‚¹æœåŠ¡çš„å®¹å™¨&lt;code&gt;mysql-master&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;docker run -d -p 3310:3306 -v D:&lt;span class=&#34;se&#34;&gt;\w&lt;/span&gt;orkspace&lt;span class=&#34;se&#34;&gt;\d&lt;/span&gt;ocker-volumes&lt;span class=&#34;se&#34;&gt;\m&lt;/span&gt;ysql&lt;span class=&#34;se&#34;&gt;\m&lt;/span&gt;aster&lt;span class=&#34;se&#34;&gt;\m&lt;/span&gt;ysql-master.cnf:/etc/mysql/conf.d/mysql-master.cnf -v D:&lt;span class=&#34;se&#34;&gt;\w&lt;/span&gt;orkspace&lt;span class=&#34;se&#34;&gt;\d&lt;/span&gt;ocker-volumes&lt;span class=&#34;se&#34;&gt;\m&lt;/span&gt;ysql&lt;span class=&#34;se&#34;&gt;\m&lt;/span&gt;aster&lt;span class=&#34;se&#34;&gt;\d&lt;/span&gt;ata:/var/lib/mysql  -e &lt;span class=&#34;nv&#34;&gt;MYSQL_ROOT_PASSWORD&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;123456&lt;/span&gt;  --name mysql-master mysql:5.7
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4 id=&#34;2-åˆ›å»º-slave-èŠ‚ç‚¹æœåŠ¡&#34;&gt;2. åˆ›å»º slave èŠ‚ç‚¹æœåŠ¡&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;åˆ›å»ºé…ç½®æ–‡ä»¶ &lt;code&gt;mysql-slave-1.cnf&lt;/code&gt; å¦‚ä¸‹ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;[mysqld]
# è®¾ç½® server-id æ³¨æ„ä¸è¦ä¸ master èŠ‚ç‚¹é‡å¤
server-id=2
binlog-format=STATEMENT
relay-log=mysql-relay
gtid-mode=ON
enforce-gtid-consistency=true
read-only=1
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;åˆ›å»º &lt;code&gt;slave&lt;/code&gt; èŠ‚ç‚¹æœåŠ¡&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;docker run -d -p 3311:3306 -v D:&lt;span class=&#34;se&#34;&gt;\w&lt;/span&gt;orkspace&lt;span class=&#34;se&#34;&gt;\d&lt;/span&gt;ocker-volumes&lt;span class=&#34;se&#34;&gt;\m&lt;/span&gt;ysql&lt;span class=&#34;se&#34;&gt;\s&lt;/span&gt;lave-1&lt;span class=&#34;se&#34;&gt;\m&lt;/span&gt;ysql-slave-1.cnf:/etc/mysql/conf.d/mysql-slave-1.cnf -v D:&lt;span class=&#34;se&#34;&gt;\w&lt;/span&gt;orkspace&lt;span class=&#34;se&#34;&gt;\d&lt;/span&gt;ocker-volumes&lt;span class=&#34;se&#34;&gt;\m&lt;/span&gt;ysql&lt;span class=&#34;se&#34;&gt;\s&lt;/span&gt;lave-1&lt;span class=&#34;se&#34;&gt;\d&lt;/span&gt;ata&lt;span class=&#34;se&#34;&gt;\:&lt;/span&gt;/var/lib/mysql  -e &lt;span class=&#34;nv&#34;&gt;MYSQL_ROOT_PASSWORD&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;123456&lt;/span&gt;  --name mysql-slave-1 mysql:5.7
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4 id=&#34;3-åˆ›å»ºåŒæ­¥æ•°æ®ä½¿ç”¨çš„ç”¨æˆ·&#34;&gt;3. åˆ›å»ºåŒæ­¥æ•°æ®ä½¿ç”¨çš„ç”¨æˆ·&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;è¿›å…¥&lt;code&gt;master&lt;/code&gt;èŠ‚ç‚¹&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;docker &lt;span class=&#34;nb&#34;&gt;exec&lt;/span&gt; -it mysql-master mysql -uroot -p123456
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;åˆ›å»ºç”¨æˆ·ï¼Œè®°ä½æ­¤æ—¶åˆ›å»ºçš„ç”¨æˆ·å¯†ç &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;k&#34;&gt;CREATE&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;USER&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;slave&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;%&amp;#39;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;IDENTIFIED&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;BY&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;123456&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;GRANT&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;REPLICATION&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SLAVE&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;ON&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;TO&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;slave&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;%&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;æŸ¥çœ‹ &lt;code&gt;master&lt;/code&gt; èŠ‚ç‚¹çŠ¶æ€ï¼Œåœ¨master èŠ‚ç‚¹æ‰§è¡Œ&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;n&#34;&gt;mysql&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;show&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;master&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;status&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;File&lt;/th&gt;
&lt;th&gt;Position&lt;/th&gt;
&lt;th&gt;Binlog_Do_DB&lt;/th&gt;
&lt;th&gt;Binlog_Ignore_DB&lt;/th&gt;
&lt;th&gt;Executed_Gtid_Set&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;mysql-bin.000002&lt;/td&gt;
&lt;td&gt;157&lt;/td&gt;
&lt;td&gt;testdb&lt;/td&gt;
&lt;td&gt;mysql,information_schema&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;è®°ä½Fileå’ŒPositionï¼Œåé¢å…³è”ä¸»ä»èŠ‚ç‚¹çš„æ—¶å€™ä¼šç”¨&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æŸ¥çœ‹ &lt;code&gt;master&lt;/code&gt; èŠ‚ç‚¹çš„IPåœ°å€ï¼Œå…³è”ä¸»ä»èŠ‚ç‚¹çš„æ—¶å€™è¦ç”¨&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;docker inspect mysql-master
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://x-xkang.com/images/mysql-cluster-docker/master-ip.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;master-ip&#34;
	
	
&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¿›å…¥ &lt;code&gt;slave&lt;/code&gt; èŠ‚ç‚¹&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;docker &lt;span class=&#34;nb&#34;&gt;exec&lt;/span&gt; -it mysql-slave-1 mysql -uroot -p123456
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ‰§è¡ŒSQLå…³è”ä¸»ä»å¤åˆ¶èŠ‚ç‚¹&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;n&#34;&gt;mysql&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CHANGE&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;MASTER&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;TO&lt;/span&gt; 
  &lt;span class=&#34;n&#34;&gt;MASTER_HOST&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;172.17.0.2&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;master&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;èŠ‚ç‚¹&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;IP&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;MASTER_PORT&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3306&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;master&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;èŠ‚ç‚¹ç«¯å£&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;MASTER_USER&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;slave&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;ä¸Šé¢åˆ›å»ºçš„ä¸»ä»åŒæ­¥ç”¨æˆ·&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;MASTER_PASSWORD&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;123456&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;ç”¨æˆ·å¯†ç &lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;MASTER_LOG_FILE&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;mysql-bin.000003&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;   &lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;master&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;èŠ‚ç‚¹çš„æ—¥å¿—æ–‡ä»¶&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;MASTER_LOG_POS&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;   
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å¼€å¯ &lt;code&gt;slave&lt;/code&gt;ï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;n&#34;&gt;mysql&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;start&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;slave&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;Query&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;OK&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;rows&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;affected&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;warning&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;03&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æŸ¥çœ‹ &lt;code&gt;slave&lt;/code&gt;å¼€å¯çŠ¶æ€&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;n&#34;&gt;mysql&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;show&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;slave&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;status&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;\&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;G&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://x-xkang.com/images/mysql-cluster-docker/slave-status.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;slave-status&#34;
	
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;ä¸‰åˆ›å»ºè¿æ¥ç”¨æˆ·å¹¶æˆæƒ&#34;&gt;ä¸‰ã€åˆ›å»ºè¿æ¥ç”¨æˆ·å¹¶æˆæƒ&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;è¿›å…¥ &lt;code&gt;master&lt;/code&gt; èŠ‚ç‚¹ï¼Œæ‰§è¡Œ&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;åˆ›å»ºç”¨æˆ·&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;CREATE&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;USER&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;test&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;%&amp;#39;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;IDENTIFIED&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;BY&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;123456&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;æˆæƒ&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;grant&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;select&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;insert&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;update&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;delete&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;on&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;testdb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;test&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;%&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;[æ³¨]æµ‹è¯•è¿‡ç¨‹ä¸­ä¸è¦ä½¿ç”¨rootè´¦å·æµ‹è¯•ä»åº“çš„&lt;code&gt;read-only&lt;/code&gt;æƒé™ï¼Œå› ä¸ºæ‹¥æœ‰ super æƒé™çš„è´¦å·ä¼šå¿½ç•¥é™åˆ¶&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨ &lt;code&gt;master&lt;/code&gt; èŠ‚ç‚¹ä¸Šçš„&lt;code&gt;testdb&lt;/code&gt; åº“æ–°å»ºæ•°æ®è¡¨ &lt;code&gt;user&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;https://x-xkang.com/images/mysql-cluster-docker/master-connection.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;master-connection&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://x-xkang.com/images/mysql-cluster-docker/master-t1.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;master-t1&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;æŸ¥çœ‹ &lt;code&gt;slave&lt;/code&gt; èŠ‚ç‚¹æ•°æ®åº“ï¼Œ&lt;code&gt;user&lt;/code&gt; å·²ç»åŒæ­¥æˆåŠŸï¼Œè‡³æ­¤mysql çš„ä¸»ä»æ¶æ„é›†ç¾¤å°±å·²ç»éƒ¨ç½²å®Œæˆï¼Œå¦‚æœæƒ³å¢åŠ  slaveèŠ‚ç‚¹çš„è¯ï¼Œé‡å¤&lt;a class=&#34;link&#34; href=&#34;#2-%e5%88%9b%e5%bb%ba-slave-%e8%8a%82%e7%82%b9%e6%9c%8d%e5%8a%a1&#34; &gt;2.2&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://x-xkang.com/images/mysql-cluster-docker/slave-t1.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;slave-t1&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;[æ³¨æ„]&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å…³è”ä¸»ä»èŠ‚ç‚¹æ—¶ï¼Œç¡®ä¿IPå’Œç«¯å£æ˜¯é€šçš„ï¼Œä¸ç„¶åœ¨ä»èŠ‚ç‚¹æ‰§è¡Œ &lt;code&gt;start slave&lt;/code&gt; æ—¶ï¼ŒæŸ¥çœ‹ç»“æœ &lt;code&gt;show slave status&lt;/code&gt; è¿æ¥ç»“æœæ˜¯å¤±è´¥çš„;&lt;/li&gt;
&lt;li&gt;æµ‹è¯•è´¦å·ä¸è¦ç”¨ &lt;code&gt;root&lt;/code&gt; æƒé™ï¼Œä¼šå¿½ç•¥ä»èŠ‚ç‚¹çš„è¯»å†™é™åˆ¶ï¼Œä»èŠ‚ç‚¹ä¹Ÿä¸€æ ·å¯ä»¥æ’å…¥ã€æ›´æ–°ã€åˆ é™¤æ•°æ®;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;slave&lt;/code&gt; èŠ‚ç‚¹æœåŠ¡ä¸€å®šè¦å°† &lt;code&gt;read_only&lt;/code&gt; è®¾ç½®æˆ1ï¼Œå¯ä»¥åœ¨&lt;code&gt;.cnf&lt;/code&gt;é…ç½®æ–‡ä»¶ä¸­é…ç½®ï¼Œä¹Ÿå¯ä»¥åœ¨&lt;code&gt;mysql&lt;/code&gt;ç»ˆç«¯ä¸­è®¾ç½®&lt;code&gt;set global read_only=1;&lt;/code&gt;ä¸ç„¶æœ‰å†™æƒé™çš„è´¦å·åœ¨ &lt;code&gt;slave&lt;/code&gt; èŠ‚ç‚¹ä¹Ÿä¸€æ ·å¯ä»¥æ’å…¥æˆ–æ›´æ–°æ•°æ®;&lt;/li&gt;
&lt;/ul&gt;</description>
        </item>
        <item>
        <title>Mysql -- ç´¢å¼•æµ…æ</title>
        <link>https://x-xkang.com/p/mysql-%E7%B4%A2%E5%BC%95%E6%B5%85%E6%9E%90/</link>
        <pubDate>Sat, 26 Nov 2022 11:17:45 +0800</pubDate>
        
        <guid>https://x-xkang.com/p/mysql-%E7%B4%A2%E5%BC%95%E6%B5%85%E6%9E%90/</guid>
        <description>&lt;h3 id=&#34;ä¸€ç´¢å¼•çš„åˆ†ç±»&#34;&gt;ä¸€ã€ç´¢å¼•çš„åˆ†ç±»&lt;/h3&gt;
&lt;h4 id=&#34;1æ ¹æ®æ•°æ®ç»“æ„å¯åˆ†ä¸º&#34;&gt;1ã€æ ¹æ®æ•°æ®ç»“æ„å¯åˆ†ä¸º&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Btreeç´¢å¼•ï¼ˆB+tree, b-treeï¼‰&lt;/li&gt;
&lt;li&gt;å“ˆå¸Œç´¢å¼•&lt;/li&gt;
&lt;li&gt;full-text å…¨æ–‡ç´¢å¼•&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;2æ ¹æ®ç‰©ç†å­˜å‚¨å¯åˆ†ä¸º&#34;&gt;2ã€æ ¹æ®ç‰©ç†å­˜å‚¨å¯åˆ†ä¸º&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;èšç°‡ç´¢å¼•&lt;/li&gt;
&lt;li&gt;äºŒçº§ç´¢å¼•(è¾…åŠ©ç´¢å¼•)&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;3æ ¹æ®å­—æ®µç‰¹æ€§å¯åˆ†ä¸º&#34;&gt;3ã€æ ¹æ®å­—æ®µç‰¹æ€§å¯åˆ†ä¸º&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;ä¸»é”®ç´¢å¼•&lt;/li&gt;
&lt;li&gt;æ™®é€šç´¢å¼•&lt;/li&gt;
&lt;li&gt;å‰ç¼€ç´¢å¼•&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;4æ ¹æ®å­—æ®µä¸ªæ•°å¯åˆ†ä¸º&#34;&gt;4ã€æ ¹æ®å­—æ®µä¸ªæ•°å¯åˆ†ä¸º&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;å•åˆ—ç´¢å¼•&lt;/li&gt;
&lt;li&gt;è”åˆç´¢å¼•ï¼ˆç¬¦åˆç´¢å¼•ï¼Œç»„åˆç´¢å¼•ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;äºŒæ ¹æ®æ•°æ®ç»“æ„åˆ†ç±»&#34;&gt;äºŒã€æ ¹æ®æ•°æ®ç»“æ„åˆ†ç±»&lt;/h3&gt;
&lt;p&gt;MySQLæŒ‰æ•°æ®ç»“æ„åˆ†ç±»å¯åˆ†ä¸ºï¼šB+treeç´¢å¼•ï¼ŒHashç´¢å¼•ï¼ŒFull-textç´¢å¼•&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;-&lt;/th&gt;
&lt;th&gt;InnoDB&lt;/th&gt;
&lt;th&gt;MyIsam&lt;/th&gt;
&lt;th&gt;Memory&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;B+treeç´¢å¼•&lt;/td&gt;
&lt;td&gt;âˆš&lt;/td&gt;
&lt;td&gt;âˆš&lt;/td&gt;
&lt;td&gt;âˆš&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Hashç´¢å¼•&lt;/td&gt;
&lt;td&gt;Ã—&lt;/td&gt;
&lt;td&gt;Ã—&lt;/td&gt;
&lt;td&gt;âˆš&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;B-treeç´¢å¼•&lt;/td&gt;
&lt;td&gt;âˆšï¼ˆMySQL5.6+ï¼‰&lt;/td&gt;
&lt;td&gt;âˆš&lt;/td&gt;
&lt;td&gt;Ã—&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;æ³¨ï¼šInnoDB å®é™…ä¸Šä¹Ÿæ”¯æŒHashç´¢å¼•ï¼Œä½†æ˜¯InnoDBä¸­Hashç´¢å¼•çš„åˆ›å»ºç”±å­˜å‚¨å¼•æ“è‡ªåŠ¨ä¼˜åŒ–åˆ›å»ºï¼Œä¸èƒ½äººä¸ºå¹²é¢„
æ˜¯å¦ä¸ºè¡¨åˆ›å»ºHashç´¢å¼•ï¼Œ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;p&gt;B+treeæ˜¯MySQLä¸­è¢«å­˜å‚¨å¼•æ“é‡‡ç”¨æœ€å¤šçš„ç´¢å¼•ç±»å‹ï¼ŒB+treeä¸­çš„Bä»£è¡¨å¹³è¡¡ï¼ˆbalanceï¼‰ï¼Œè€Œä¸æ˜¯äºŒå‰ï¼ˆbinaryï¼‰ï¼Œå› ä¸ºB+treeæ˜¯ä»æœ€æ—©çš„å¹³è¡¡äºŒå‰æ ‘æ¼”åŒ–è€Œæ¥çš„ï¼Œä¸‹é¢æ¼”ç¤ºB+treeæ•°æ®ç»“æ„ä¸å…¶ä»–æ•°æ®ç»“æ„çš„å¯¹æ¯”ã€‚&lt;/p&gt;
&lt;h4 id=&#34;1-btree-å’Œ-b-treeçš„å¯¹æ¯”&#34;&gt;1. B+tree å’Œ B-treeçš„å¯¹æ¯”&lt;/h4&gt;
&lt;p&gt;&lt;img src=&#34;https://x-xkang.com/images/mysql-index/B-tree-01.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;B-tree&#34;
	
	
&gt;
[ç½‘ç»œå›¾ç‰‡] B-treeç¤ºæ„å›¾&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;B+treeéå¶å­ç»“ç‚¹åªå­˜å‚¨é”®å€¼ä¿¡æ¯ï¼Œæ•°æ®è®°å½•éƒ½å­˜æ”¾åœ¨å¶å­èŠ‚ç‚¹ä¸­ï¼Œè€ŒB-treeçš„éå¶å­èŠ‚ç‚¹ä¹Ÿå­˜å‚¨æ•°æ®ï¼ŒB+treeå•ä¸ªèŠ‚ç‚¹çš„å­˜å‚¨é‡æ›´å°ï¼Œåœ¨ç›¸åŒçš„ç£ç›˜IOæƒ…å†µä¸‹å¯ä»¥æŸ¥åˆ°æ›´å¤šèŠ‚ç‚¹æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;B+tree æ‰€æœ‰å¶å­ç»“ç‚¹ä¹‹é—´éƒ½é‡‡ç”¨å•é“¾è¡¨è¿æ¥ï¼Œé€‚åˆMySQLä¸­å¸¸è§çš„åŸºäºèŒƒå›´çš„é¡ºåºæ£€ç´¢åœºæ™¯ï¼Œè€ŒB-treeæ— æ³•åšåˆ°è¿™ä¸€ç‚¹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;https://x-xkang.com/images/mysql-index/B&amp;#43;tree-01.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;B&amp;#43;tree&#34;
	
	
&gt;
[ç½‘ç»œå›¾ç‰‡] B+treeç¤ºæ„å›¾&lt;/p&gt;
&lt;h4 id=&#34;2-btree-å’Œ-çº¢é»‘æ ‘çš„å¯¹æ¯”&#34;&gt;2. B+tree å’Œ çº¢é»‘æ ‘çš„å¯¹æ¯”&lt;/h4&gt;
&lt;p&gt;&lt;img src=&#34;https://x-xkang.com/images/mysql-index/red-black-tree.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;red-black-tree&#34;
	
	
&gt;
[ç½‘ç»œå›¾ç‰‡] çº¢é»‘æ ‘ç¤ºæ„å›¾&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;çº¢é»‘æ ‘&lt;/strong&gt;æ˜¯ä¸€ç§&lt;strong&gt;å¼±å¹³è¡¡äºŒå‰æŸ¥æ‰¾æ ‘&lt;/strong&gt;ï¼Œé€šè¿‡ä»»ä½•ä¸€æ¡ä»æ ¹åˆ°å¶å­çš„è·¯å¾„ä¸Šå„ä¸ªèŠ‚ç‚¹ç€è‰²æ–¹å¼çš„é™åˆ¶ï¼Œ&lt;strong&gt;çº¢é»‘æ ‘ç¡®ä¿æ²¡æœ‰ä¸€æ¡è·¯å¾„ä¼šæ¯”å…¶ä»–è·¯å¾„é•¿å‡ºä¸¤å€&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¯¹äºæœ‰Nä¸ªèŠ‚ç‚¹çš„B+treeï¼Œå…¶æœç´¢çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(logdN)ï¼Œå…¶ä¸­**d(Degree)**ä¸ºB+treeçš„åº¦ï¼Œè¡¨ç¤ºèŠ‚ç‚¹å…è®¸çš„æœ€å¤§å­èŠ‚ç‚¹æ•°ä¸ºdä¸ªï¼Œåœ¨å®é™…åº”ç”¨å½“ä¸­ï¼Œdå€¼ä¸€èˆ¬æ˜¯å¤§äº100çš„ï¼Œå³ä½¿æ•°æ®é‡è¾¾åˆ°åƒä¸‡çº§åˆ«æ—¶B+treeçš„é«˜åº¦ä¾ç„¶ç»´æŒåœ¨3-4å·¦å³ï¼Œä¿è¯äº†3-4æ¬¡ç£ç›˜I/Oæ“ä½œå°±èƒ½æŸ¥è¯¢åˆ°ç›®æ ‡æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;çº¢é»‘æ ‘&lt;/strong&gt;æ˜¯äºŒå‰æ ‘ï¼ŒèŠ‚ç‚¹å­èŠ‚ç‚¹ä¸ªæ•°ä¸ºä¸¤ä¸ªï¼Œæ„å‘³ç€å…¶æœç´¢çš„ç®—æ³•æ—¶é—´å¤æ‚åº¦ä¸º O(logN)ï¼Œæ ‘çš„é«˜åº¦ä¹Ÿä¼šæ¯” B+tree é«˜å‡ºä¸å°‘ï¼Œå› æ­¤çº¢é»‘æ ‘æ£€ç´¢åˆ°ç›®æ ‡æ•°æ®æ‰€éœ€ç»å†çš„ç£ç›˜I/Oæ¬¡æ•°æ›´å¤šã€‚&lt;/p&gt;
&lt;h4 id=&#34;3-btree-å’Œ-hashçš„å¯¹æ¯”&#34;&gt;3. B+tree å’Œ Hashçš„å¯¹æ¯”&lt;/h4&gt;
&lt;p&gt;Hash ç´¢å¼•ç»“æ„çš„ç‰¹æ®Šæ€§ï¼Œå…¶æ£€ç´¢æ•ˆç‡éå¸¸é«˜ï¼Œç´¢å¼•çš„æ£€ç´¢å¯ä»¥ä¸€æ¬¡å®šä½ï¼Œä¸åƒB-Tree ç´¢å¼•éœ€è¦ä»æ ¹èŠ‚ç‚¹åˆ°æèŠ‚ç‚¹ï¼Œæœ€åæ‰èƒ½è®¿é—®åˆ°é¡µèŠ‚ç‚¹è¿™æ ·å¤šæ¬¡çš„IOè®¿é—®ï¼Œæ‰€ä»¥ Hash ç´¢å¼•çš„æŸ¥è¯¢æ•ˆç‡è¦è¿œé«˜äº B-Tree ç´¢å¼•ã€‚è™½ç„¶ Hash ç´¢å¼•æ•ˆç‡é«˜ï¼Œä½†æ˜¯ Hash ç´¢å¼•æœ¬èº«ç”±äºå…¶ç‰¹æ®Šæ€§ä¹Ÿå¸¦æ¥äº†å¾ˆå¤šé™åˆ¶å’Œå¼Šç«¯ï¼Œä¸»è¦æœ‰ä»¥ä¸‹è¿™äº›ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Hash ç´¢å¼•ä»…ä»…èƒ½æ»¡è¶³ = , IN å’Œ &amp;lt;=&amp;gt;(è¡¨ç¤ºNULLå®‰å…¨çš„ç­‰ä»·) æŸ¥è¯¢ï¼Œä¸èƒ½ä½¿ç”¨èŒƒå›´æŸ¥è¯¢&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;ç”±äº Hash ç´¢å¼•æ¯”è¾ƒçš„æ˜¯è¿›è¡Œ Hash è¿ç®—ä¹‹åçš„ Hashå€¼ï¼Œæ‰€ä»¥å®ƒåªèƒ½ç”¨äºç­‰å€¼çš„è¿‡æ»¤ï¼Œä¸èƒ½ç”¨äºåŸºäºèŒƒå›´çš„è¿‡æ»¤ï¼Œå› ä¸ºç»è¿‡ç›¸åº”çš„ Hashç®—æ³•å¤„ç†ä¹‹åçš„ Hash å€¼çš„å¤§å°å…³ç³»ï¼Œå¹¶ä¸èƒ½ä¿è¯å’ŒHashè¿ç®—å‰å®Œå…¨ä¸€æ ·&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;Hash ç´¢å¼•æ— æ³•é€‚ç”¨æ•°æ®çš„æ’åºæ“ä½œ&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;ç”±äº Hash ç´¢å¼•ä¸­å­˜æ”¾çš„æ˜¯ç»è¿‡ Hash è®¡ç®—ä¹‹åçš„ Hashå€¼ï¼Œè€Œä¸”Hashå€¼çš„å¤§å°å…³ç³»å¹¶ä¸ä¸€å®šå’Œ Hashè¿ç®—å‰çš„é”®å€¼å®Œå…¨ä¸€æ ·ï¼Œæ‰€ä»¥æ•°æ®åº“æ— æ³•åˆ©ç”¨ç´¢å¼•çš„æ•°æ®æ¥é¿å…ä»»ä½•æ’åºè¿ç®—ï¼›&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;Hash ç´¢å¼•ä¸èƒ½åˆ©ç”¨éƒ¨åˆ†ç´¢å¼•é”®æŸ¥è¯¢&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;å¯¹äºç»„åˆç´¢å¼•ï¼ŒHash ç´¢å¼•åœ¨è®¡ç®— Hash å€¼çš„æ—¶å€™æ˜¯ç»„åˆç´¢å¼•é”®åˆå¹¶åå†ä¸€èµ·è®¡ç®— Hash å€¼ï¼Œè€Œä¸æ˜¯å•ç‹¬è®¡ç®— Hashå€¼ï¼Œæ‰€ä»¥é€šè¿‡ç»„åˆç´¢å¼•çš„å‰é¢ä¸€ä¸ªæˆ–å‡ ä¸ªç´¢å¼•é”®è¿›è¡ŒæŸ¥è¯¢çš„æ—¶å€™ï¼ŒHash ç´¢å¼•ä¹Ÿæ— æ³•è¢«åˆ©ç”¨&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;Hash ç´¢å¼•ä¾ç„¶éœ€è¦å›è¡¨æ‰«æ&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Hash ç´¢å¼•æ˜¯å°†ç´¢å¼•é”®é€šè¿‡ Hash è¿ç®—ä¹‹åï¼Œå°† Hashè¿ç®—ç»“æœçš„ Hashå€¼å’Œæ‰€å¯¹åº”çš„è¡ŒæŒ‡é’ˆä¿¡æ¯å­˜æ”¾äºä¸€ä¸ª Hash è¡¨ä¸­ï¼Œç”±äºä¸åŒç´¢å¼•é”®å¯èƒ½å­˜åœ¨ç›¸åŒ Hash å€¼ï¼Œæ‰€ä»¥å³ä½¿å–æ»¡è¶³æŸä¸ª Hash é”®å€¼çš„æ•°æ®çš„è®°å½•æ¡æ•°ï¼Œä¹Ÿæ— æ³•ä» Hashç´¢å¼•ä¸­ç›´æ¥å®ŒæˆæŸ¥è¯¢ï¼Œè¿˜æ˜¯è¦é€šè¿‡è®¿é—®è¡¨ä¸­çš„å®é™…æ•°æ®è¿›è¡Œç›¸åº”çš„æ¯”è¾ƒï¼Œå¹¶å¾—åˆ°ç›¸åº”çš„ç»“æœã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;Hashç´¢å¼•é‡åˆ°å¤§é‡Hashå€¼ç›¸ç­‰çš„æƒ…å†µåæ€§èƒ½å¹¶ä¸ä¸€å®šå°±ä¼šæ¯”B-Treeç´¢å¼•é«˜&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;é€‰æ‹©æ€§æ¯”è¾ƒä½çš„ç´¢å¼•é”®ï¼Œå¦‚æœåˆ›å»º Hash ç´¢å¼•ï¼Œé‚£ä¹ˆå°†ä¼šå­˜åœ¨å¤§é‡è®°å½•æŒ‡é’ˆä¿¡æ¯å­˜äºåŒä¸€ä¸ªHashå€¼ç›¸å…³è”ã€‚è¿™æ ·è¦å®šä½æŸä¸€æ¡è®°å½•æ—¶å°±ä¼šéå¸¸éº»çƒ¦ï¼Œä¼šæµªè´¹å¤šæ¬¡è¡¨æ•°æ®çš„è®¿é—®ï¼Œè€Œé€ æˆæ•´ä½“æ€§èƒ½ä½ä¸‹&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;ç”±äºèŒƒå›´æŸ¥è¯¢æ˜¯MySQLæ•°æ®åº“æŸ¥è¯¢ä¸­å¸¸è§çš„åœºæ™¯ï¼ŒHashè¡¨ä¸é€‚åˆåšèŒƒå›´æŸ¥è¯¢ï¼Œå®ƒæ›´é€‚åˆåšç­‰å€¼æŸ¥è¯¢ã€‚å¦å¤–Hashè¡¨è¿˜å­˜åœ¨Hashå‡½æ•°é€‰æ‹©å’ŒHashå€¼å†²çªç­‰é—®é¢˜ã€‚å› æ­¤ï¼ŒB+treeç´¢å¼•è¦æ¯”Hashè¡¨ç´¢å¼•æœ‰æ›´å¹¿çš„é€‚ç”¨åœºæ™¯&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&#34;ä¸‰æ ¹æ®ç‰©ç†å­˜å‚¨åˆ†ç±»&#34;&gt;ä¸‰ã€æ ¹æ®ç‰©ç†å­˜å‚¨åˆ†ç±»&lt;/h3&gt;
&lt;p&gt;MySQLæ ¹æ®å¶å­èŠ‚ç‚¹æ˜¯å¦å­˜å‚¨çš„æ˜¯å®Œæ•´æ•°æ®å°†ç´¢å¼•åˆ†ä¸ºï¼šèšç°‡ç´¢å¼•ï¼ŒäºŒçº§ç´¢å¼•ï¼ˆè¾…åŠ©ç´¢å¼•ï¼‰ã€‚&lt;/p&gt;
&lt;h4 id=&#34;1èšç°‡ç´¢å¼•&#34;&gt;1.èšç°‡ç´¢å¼•&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;èšç°‡ç´¢å¼•&lt;/strong&gt;çš„æ¯ä¸ªå¶å­èŠ‚ç‚¹éƒ½å­˜å‚¨äº†ä¸€è¡Œå®Œæ•´çš„è¡¨æ•°æ®ï¼Œå¶å­èŠ‚ç‚¹ä¹‹é—´æŒ‰ç…§idåˆ—å‡åºè¿æ¥ï¼Œå¯ä»¥æ–¹ä¾¿çš„è¿›è¡Œé¡ºåºæ£€ç´¢ã€‚
&lt;img src=&#34;https://x-xkang.com/images/mysql-index/clustering-index.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;clustering-index&#34;
	
	
&gt;
[ç½‘ç»œå›¾ç‰‡]
MySQLä¸­çš„InnoDB å­˜å‚¨å¼•æ“è¦æ±‚å¿…é¡»æœ‰èšç°‡ç´¢å¼•ï¼Œé»˜è®¤åœ¨ä¸»é”®å­—æ®µä¸Šå»ºç«‹èšç°‡ç´¢å¼•ï¼Œåœ¨æ²¡æœ‰ä¸»é”®çš„æƒ…å†µä¸‹ï¼Œæ•°æ®è¡¨çš„ç¬¬ä¸€ä¸ªéç©ºå”¯ä¸€ç´¢å¼•å°†è¢«å»ºç«‹ä¸ºèšç°‡ç´¢å¼•ï¼Œ
åœ¨å‰ä¸¤è€…éƒ½æ²¡æœ‰çš„æƒ…å†µä¸‹ï¼ŒInnoDBå°†è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªéšå¼çš„è‡ªå¢idåˆ—ï¼Œå¹¶åœ¨æ­¤åˆ—ä¸Šå»ºç«‹èšç°‡ç´¢å¼•ã€‚&lt;/p&gt;
&lt;p&gt;MyISAMå­˜å‚¨å¼•æ“ä¸å­˜åœ¨èšç°‡ç´¢å¼•ï¼Œä¸»é”®ç´¢å¼•å’Œéä¸»é”®ç´¢å¼•çš„ç»“æ„æ˜¯ä¸€æ ·çš„ï¼Œç´¢å¼•çš„å¶å­èŠ‚ç‚¹ä¸å­˜å‚¨è¡¨æ•°æ®ï¼Œå­˜æ”¾çš„æ˜¯è¡¨æ•°æ®çš„åœ°å€ï¼Œæ‰€ä»¥MyISAMå­˜å‚¨å¼•æ“çš„è¡¨å¯ä»¥æ²¡æœ‰ä¸»é”®ã€‚MyISAMè¡¨çš„ç´¢å¼•å’Œæ•°æ®æ˜¯åˆ†å¼€å­˜å‚¨çš„ï¼Œ&lt;/p&gt;
&lt;h4 id=&#34;2äºŒçº§ç´¢å¼•&#34;&gt;2.äºŒçº§ç´¢å¼•&lt;/h4&gt;
&lt;p&gt;&lt;img src=&#34;https://x-xkang.com/images/mysql-index/second-index-01.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;second-index-01&#34;
	
	
&gt;
[ç½‘ç»œå›¾ç‰‡]&lt;/p&gt;
&lt;p&gt;äºŒçº§ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å¹¶ä¸å­˜å‚¨ä¸€è¡Œå®Œæ•´çš„æ•°æ®ï¼Œè€Œæ˜¯å­˜å‚¨äº†èšç°‡ç´¢å¼•æ‰€åœ¨çš„åˆ—ã€‚&lt;/p&gt;
&lt;p&gt;å›è¡¨æŸ¥è¯¢ï¼šç”±äºäºŒçº§ç´¢å¼•çš„å¶å­èŠ‚ç‚¹ä¸å­˜å‚¨å®Œæ•´çš„è¡¨æ•°æ®ï¼Œç´¢å¼•å½“é€šè¿‡äºŒçº§ç´¢å¼•æŸ¥è¯¢èšç°‡ç´¢å¼•åˆ—å€¼åï¼Œè¿˜éœ€è¦å›åˆ°èšç°‡ç´¢å¼•ä¹Ÿå°±æ˜¯è¡¨æœ¬èº«è¿›ä¸€æ­¥è·å–æ•°æ®
&lt;img src=&#34;https://x-xkang.com/images/mysql-index/second-index-02.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;second-index-02&#34;
	
	
&gt;
[ç½‘ç»œå›¾ç‰‡]&lt;/p&gt;
&lt;p&gt;å›è¡¨æŸ¥è¯¢éœ€è¦é¢å¤–çš„B+treeæœç´¢è¿‡ç¨‹ï¼Œå¿…ç„¶å¢åŠ æŸ¥è¯¢æ¶ˆè€—,
éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé€šè¿‡äºŒçº§ç´¢å¼•æŸ¥è¯¢æ—¶ï¼Œå›è¡¨ä¸æ˜¯å¿…é¡»çš„è¿‡ç¨‹ï¼Œå½“select çš„æ‰€æœ‰å­—æ®µåœ¨å•ä¸ªäºŒçº§ç´¢å¼•ä¸­éƒ½èƒ½æ‰¾åˆ°æ—¶ï¼Œå°±ä¸éœ€è¦å›è¡¨ï¼ŒMySQLç§°æ­¤æ—¶çš„äºŒçº§ç´¢å¼•ä¸ºè¦†ç›–ç´¢å¼•æˆ–è€…è§¦å‘äº†ç´¢å¼•è¦†ç›–ã€‚
å¯ä»¥ç”¨explain å‘½ä»¤æŸ¥çœ‹SQLè¯­å¥çš„æ‰§è¡Œè®¡åˆ’ï¼Œæ‰§è¡Œè®¡åˆ’çš„extraå­—æ®µä¸­è‹¥å‡ºç°Using indexï¼Œè¡¨ç¤ºæŸ¥è¯¢è§¦å‘äº†ç´¢å¼•è¦†ç›–ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å››æŒ‰å­—æ®µç‰¹æ€§åˆ†ç±»&#34;&gt;å››ã€æŒ‰å­—æ®µç‰¹æ€§åˆ†ç±»&lt;/h3&gt;
&lt;p&gt;MySQLç´¢å¼•æŒ‰ç…§å­—æ®µç‰¹æ€§å¯ä»¥åˆ†ä¸ºï¼š&lt;strong&gt;ä¸»é”®ç´¢å¼•ï¼Œæ™®é€šç´¢å¼•ï¼Œå‰ç¼€ç´¢å¼•&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä¸»é”®ç´¢å¼•
å»ºç«‹åœ¨ä¸»é”®ä¸Šçš„ç´¢å¼•ç§°ä¸º&lt;strong&gt;ä¸»é”®ç´¢å¼•&lt;/strong&gt;ï¼Œä¸€å¼ æ•°æ®è¡¨åªèƒ½æœ‰ä¸€ä¸ªä¸»é”®ç´¢å¼•ï¼Œç´¢å¼•åˆ—å€¼ä¸å…è®¸æœ‰ç©ºå€¼ï¼Œé€šå¸¸åœ¨åˆ›å»ºè¡¨æ—¶ä¸€èµ·åˆ›å»ºã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å”¯ä¸€ç´¢å¼•
å»ºç«‹åœ¨ Uniqueå­—æ®µä¸Šçš„ç´¢å¼•ç§°ä¸º&lt;strong&gt;å”¯ä¸€ç´¢å¼•&lt;/strong&gt;ï¼Œä¸€å¼ è¡¨å¯ä»¥æœ‰å¤šä¸ªå”¯ä¸€ç´¢å¼•ï¼Œç´¢å¼•åˆ—å€¼å…è®¸ä¸ºç©ºï¼Œåˆ—å€¼ä¸­å‡ºç°å¤šä¸ªç©ºå€¼ä¸ä¼šå‡ºç°é‡å¤å†²çªã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ™®é€šç´¢å¼•
å»ºç«‹åœ¨æ™®é€šå­—æ®µä¸Šçš„ç´¢å¼•è¢«ç§°ä¸º&lt;strong&gt;æ™®é€šç´¢å¼•&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å‰ç¼€ç´¢å¼•
&lt;strong&gt;å‰ç¼€ç´¢å¼•&lt;/strong&gt;æ˜¯æŒ‡å¯¹å­—ç¬¦ç±»å‹å­—æ®µçš„å‰å‡ ä¸ªå­—ç¬¦æˆ–å¯¹äºŒè¿›åˆ¶ç±»å‹å­—æ®µçš„å‰å‡ ä¸ªbyteså»ºç«‹çš„ç´¢å¼•ï¼Œè€Œä¸æ˜¯åœ¨æ•´ä¸ªå­—æ®µä¸Šå»ºç´¢å¼•ã€‚å‰ç¼€ç´¢å¼•å¯ä»¥å»ºç«‹åœ¨ç±»å‹ä¸ºcharã€varcharã€binaryã€varbinaryçš„åˆ—ä¸Šï¼Œå¯ä»¥å¤§å¤§å‡å°‘ç´¢å¼•å ç”¨çš„å­˜å‚¨ç©ºé—´ï¼Œä¹Ÿèƒ½æå‡ç´¢å¼•çš„æŸ¥è¯¢æ•ˆç‡&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;</description>
        </item>
        <item>
        <title>Redis æŒä¹…åŒ–ç­–ç•¥</title>
        <link>https://x-xkang.com/p/redis-%E6%8C%81%E4%B9%85%E5%8C%96%E7%AD%96%E7%95%A5/</link>
        <pubDate>Wed, 29 Jun 2022 15:34:24 +0800</pubDate>
        
        <guid>https://x-xkang.com/p/redis-%E6%8C%81%E4%B9%85%E5%8C%96%E7%AD%96%E7%95%A5/</guid>
        <description>&lt;p&gt;Redisæä¾›ä¸¤ç§æŒä¹…åŒ–æ–¹å¼ï¼šä¸€ç§æ˜¯é»˜è®¤çš„RDBæŒä¹…åŒ–æ–¹å¼ï¼Œå¦ä¸€ç§æ˜¯AOFï¼ˆappend only fileï¼‰æŒä¹…åŒ–æ–¹å¼&lt;/p&gt;
&lt;h3 id=&#34;ä¸€-rdb&#34;&gt;ä¸€ã€ RDB&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;åŸç†æ˜¯Redisä¼šé€šè¿‡å•ç‹¬åˆ›å»ºï¼ˆforkï¼‰ä¸€ä¸ªä¸å½“å‰è¿›ç¨‹ä¸€æ¨¡ä¸€æ ·çš„å­è¿›ç¨‹æ¥è¿›è¡ŒæŒä¹…åŒ–ï¼Œè¿™ä¸ªå­è¿›ç¨‹çš„æ‰€æœ‰æ•°æ®ï¼ˆå˜é‡ã€ç¯å¢ƒå˜é‡ã€ç¨‹åºè®¡æ•°å™¨ç­‰ï¼‰éƒ½å’ŒåŸè¿›ç¨‹ä¸€æ¨¡ä¸€æ ·ï¼Œä¼šå…ˆå°†æ•°æ®å†™å…¥åˆ°ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ä¸­ï¼Œå¾…æŒä¹…åŒ–ç»“æŸäº†ï¼Œå†ç”¨è¿™ä¸ªä¸´æ—¶æ–‡ä»¶æ›¿æ¢ä¸Šæ¬¡æŒä¹…åŒ–å¥½çš„æ–‡ä»¶ï¼Œæ•´ä¸ªè¿‡ç¨‹å†²ï¼Œä¸»è¿›ç¨‹ä¸è¿›è¡Œä»»ä½•çš„ioæ“ä½œï¼Œè¿™å°±ç¡®ä¿äº†æé«˜çš„æ€§èƒ½ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;1æŒä¹…åŒ–æ–‡ä»¶åœ¨å“ª&#34;&gt;1ã€æŒä¹…åŒ–æ–‡ä»¶åœ¨å“ª&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;å¯åŠ¨&lt;code&gt;redis-server&lt;/code&gt; çš„ç›®å½•ä¸‹&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;2ä»€ä¹ˆæ—¶å€™forkå­è¿›ç¨‹æˆ–è€…ä»€ä¹ˆæ—¶å€™è§¦å‘-rdbæŒä¹…åŒ–æœºåˆ¶&#34;&gt;2ã€ä»€ä¹ˆæ—¶å€™forkå­è¿›ç¨‹ï¼Œæˆ–è€…ä»€ä¹ˆæ—¶å€™è§¦å‘ rdbæŒä¹…åŒ–æœºåˆ¶&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;RDB&lt;/code&gt; æ–¹å¼æŒä¹…åŒ–æ•°æ®æ˜¯é€šè¿‡ &lt;code&gt;fork&lt;/code&gt; å­è¿›ç¨‹ï¼Œåœ¨å­è¿›ç¨‹ä¸­è¿›è¡Œæ•°æ®åŒæ­¥&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;shutdownæ—¶ï¼Œå¦‚æœæ²¡æœ‰å¼€å¯&lt;code&gt;aof&lt;/code&gt;ï¼Œä¼šè§¦å‘é…ç½®æ–‡ä»¶ä¸­é»˜è®¤çš„å¿«ç…§é…ç½®
æ‰§è¡Œå‘½ä»¤ &lt;code&gt;save&lt;/code&gt; æˆ–è€… &lt;code&gt;bgsave&lt;/code&gt; &lt;code&gt;save&lt;/code&gt;æ˜¯åªç®¡ä¿å­˜ï¼Œä¸ç®¡å…¶ä»–ï¼Œå…¨éƒ¨é˜»å¡ï¼Œä½¿ç”¨ä¸»è¿›ç¨‹è¿›è¡ŒæŒä¹…åŒ–
&lt;code&gt;bgsave&lt;/code&gt; redis ä¼šåœ¨åå°å¼‚æ­¥è¿›è¡Œå¿«ç…§æ“ä½œï¼ŒåŒæ—¶å¯ä»¥å“åº”å®¢æˆ·ç«¯çš„è¯·æ±‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;3ä¼˜ç‚¹&#34;&gt;3ã€ä¼˜ç‚¹&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;é€‚åˆæ•°æ®æ¢å¤&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;4ç¼ºç‚¹&#34;&gt;4ã€ç¼ºç‚¹&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;æ•°æ®ä¸¢å¤±å¤š&lt;/p&gt;
&lt;/blockquote&gt;
&lt;!-- **aof(--fix) ls -l --block-size=M**æ˜¯ä»€ä¹ˆï¼Ÿ --&gt;
&lt;blockquote&gt;
&lt;p&gt;åŸç†æ˜¯å°†Redisçš„æ“ä½œæ—¥å¿—ä»¥è¿½åŠ çš„æ–¹å¼å†™å…¥æ–‡ä»¶ï¼Œè¯»æ“ä½œæ˜¯ä¸è®°å½•çš„&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;äºŒaof&#34;&gt;äºŒã€AOF&lt;/h3&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆä¼šå‡ºç°&lt;strong&gt;AOF&lt;/strong&gt;æŒä¹…åŒ–æ–¹å¼&lt;/p&gt;
&lt;h4 id=&#34;1è¿™ä¸ªæŒä¹…åŒ–æ–‡ä»¶åœ¨å“ª&#34;&gt;1ã€è¿™ä¸ªæŒä¹…åŒ–æ–‡ä»¶åœ¨å“ª&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;å¯åŠ¨ &lt;code&gt;redis-server&lt;/code&gt; çš„ç›®å½•ä¸‹ä¼šç”Ÿæˆ &lt;code&gt;appendonly.aof&lt;/code&gt;æ–‡ä»¶&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;2è§¦å‘æœºåˆ¶æ ¹æ®é…ç½®æ–‡ä»¶çš„é…ç½®é¡¹--appendfsync&#34;&gt;2ã€è§¦å‘æœºåˆ¶ï¼ˆæ ¹æ®é…ç½®æ–‡ä»¶çš„é…ç½®é¡¹&amp;ndash;appendfsyncï¼‰&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;no: è¡¨ç¤ºæ“ä½œç³»ç»Ÿè¿›è¡Œæ•°æ®ç¼“å­˜åŒæ­¥åˆ°ç£ç›˜ï¼ˆå¿«ï¼ŒæŒä¹…åŒ–æ²¡ä¿è¯ï¼šå†™æ»¡ç¼“å†²åŒºæ‰ä¼šåŒæ­¥ï¼Œè‹¥åœ¨ç¼“å†²åŒºæœªå†™æ»¡å‰ shutdown æˆ–å…¶ä»–æ„å¤–å…³æœºï¼Œåˆ™è¿™éƒ¨åˆ†æ•°æ®ä¼šä¸¢å¤±ï¼‰
always: åŒæ­¥æŒä¹…åŒ–ï¼Œæ¯æ¬¡å‘ç”Ÿæ•°æ®å˜æ›´æ—¶ï¼ˆå¢åˆ æ”¹æ“ä½œï¼‰ï¼Œç«‹å³è®°å½•åˆ°ç£ç›˜ï¼ˆæ…¢ï¼Œå®‰å…¨ï¼‰
everysec: è¡¨ç¤ºæ¯ç§’åŒæ­¥ä¸€æ¬¡ï¼ˆé»˜è®¤å€¼ï¼Œå¾ˆå¿«ï¼Œä½†å¯èƒ½ä¼šä¸¢å¤±1ç§’çš„æ•°æ®ï¼‰&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;3aof-é‡å†™æœºåˆ¶&#34;&gt;3ã€AOF é‡å†™æœºåˆ¶&lt;/h4&gt;
&lt;p&gt;é‡å†™ AOF æ–‡ä»¶ä¼š &lt;code&gt;fork&lt;/code&gt; å­è¿›ç¨‹å»æ‰§è¡Œï¼Œä¼šå°†å†…å­˜ä¸­çš„æ•°æ®å†™å…¥æ–°çš„ &lt;code&gt;AOF&lt;/code&gt; æ–‡ä»¶ï¼Œå¹¶ä¸”æ˜¯ä»¥&lt;code&gt;RDB&lt;/code&gt; çš„æ–¹å¼å†™å…¥ï¼Œé‡å†™ç»“æŸåä¼šæ›¿ä»£æ—§çš„&lt;code&gt;AOF&lt;/code&gt; æ–‡ä»¶ï¼Œåç»­çš„å®¢æˆ·ç«¯å‘½ä»¤æ“ä½œåˆé‡æ–°ä»¥ &lt;code&gt;AOF&lt;/code&gt;çš„æ ¼å¼å†™å…¥ï¼Œ&lt;code&gt;redis.conf&lt;/code&gt; ä¸­é…ç½®è§¦å‘ &lt;code&gt;AOF&lt;/code&gt; æ–‡ä»¶é‡å†™çš„æ–‡ä»¶å¤§å°å€¼&lt;code&gt;auto-aof-rewrite-percentage&lt;/code&gt; ä¸å®œå¤ªå°ï¼Œå› ä¸ºä¼šé¢‘ç¹è§¦å‘é‡å†™&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è§¦å‘æ—¶æœº&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;redis.conf&lt;/code&gt; çš„é…ç½®é¡¹ &lt;code&gt;auto-aof-rewrite-min-size&lt;/code&gt; é»˜è®¤å€¼æ˜¯ 64mbï¼Œ å½“ &lt;code&gt;AOF&lt;/code&gt; æ–‡ä»¶å¤§å°è¶…è¿‡è¿™ä¸ªé…ç½®å€¼æ—¶ä¼šè‡ªåŠ¨å¼€å¯é‡å†™ `ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;redis.conf&lt;/code&gt; çš„é…ç½®é¡¹ &lt;code&gt;auto-aof-rewrite-percentage&lt;/code&gt; é»˜è®¤å€¼æ˜¯100ï¼Œ å½“ &lt;code&gt;AOF&lt;/code&gt; æ–‡ä»¶å¤§å°çš„å¢é•¿ç‡å¤§äºé…ç½®å€¼æ—¶ä¼šè‡ªåŠ¨å¼€å¯é‡å†™ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;4ä¼˜ç‚¹&#34;&gt;4ã€ä¼˜ç‚¹&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¿è¯æ•°æ®å®‰å…¨&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;5ç¼ºç‚¹&#34;&gt;5ã€ç¼ºç‚¹&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;æ•°æ®æ¢å¤æ…¢&lt;/p&gt;
&lt;/blockquote&gt;</description>
        </item>
        <item>
        <title>RedisåŸºç¡€çŸ¥è¯†ä¹‹ç¼“å­˜é›ªå´©ã€å‡»ç©¿å’Œç©¿é€</title>
        <link>https://x-xkang.com/p/redis%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E4%B9%8B%E7%BC%93%E5%AD%98%E9%9B%AA%E5%B4%A9%E5%87%BB%E7%A9%BF%E5%92%8C%E7%A9%BF%E9%80%8F/</link>
        <pubDate>Tue, 28 Jun 2022 14:58:25 +0800</pubDate>
        
        <guid>https://x-xkang.com/p/redis%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E4%B9%8B%E7%BC%93%E5%AD%98%E9%9B%AA%E5%B4%A9%E5%87%BB%E7%A9%BF%E5%92%8C%E7%A9%BF%E9%80%8F/</guid>
        <description>&lt;h3 id=&#34;ä¸€redis-ç¼“å­˜é›ªå´©&#34;&gt;ä¸€ã€Redis ç¼“å­˜é›ªå´©&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å‡ºç°åœºæ™¯&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;å¦‚æœä½¿ç”¨redisè®°å½•å¤§é‡çš„çƒ­ç‚¹æ•°æ®ï¼Œä¸”è¿‡æœŸæ—¶é—´ä¸ºåŒä¸€ä¸ªå¸¸é‡ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šå‡ºç°å¤§æ‰¹çš„ç¼“å­˜æ•°æ®ä¼šåœ¨åŒä¸€æ—¶é—´æˆ–è¾ƒçŸ­çš„æ—¶é—´åŒºé—´å†…å¤±æ•ˆï¼Œredisä¼šæ ¹æ®æ·˜æ±°ç­–ç•¥è¿›è¡Œä¼˜åŒ–ï¼Œå¦‚æœæ•°æ®é‡æ¯”è¾ƒå¤§ä¼šå¯¼è‡´çº¿ç¨‹å‡ºç°çŸ­æš‚çš„é˜»å¡ï¼›å¦å¤–ï¼Œå› ä¸ºå¤§é‡çš„ç¼“å­˜å¤±æ•ˆï¼Œä¼šå¯¼è‡´è¯·æ±‚ç›´æ¥è½åœ¨DBä¸Šï¼Œè¯·æ±‚æ•°è¾ƒå¤§æƒ…å†µä¸‹ä¼šç›´æ¥å¯¼è‡´æ•°æ®åº“ç˜«ç—ªï¼Œç„¶åæ•´ä¸ªä¸šåŠ¡ç³»ç»Ÿå˜ä¸ºä¸å¯ç”¨çŠ¶æ€&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;è§£å†³æ–¹æ¡ˆ&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;é’ˆå¯¹è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è®¾ç½®è¿‡æœŸæ—¶é—´æ—¶åŠ ä¸Šä¸€ä¸ªéšæœºå€¼ï¼Œç±»ä¼¼ &lt;code&gt;redis.set(key, value, expiredTime + Math.random()*10000)&lt;/code&gt;ï¼Œè¿™æ ·è®¾ç½®å°±ä¸ä¼šå‡ºç°åœ¨çŸ­æ—¶é—´å†…å¤§é‡ç¼“å­˜keyå¤±æ•ˆçš„æƒ…å†µã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;äºŒredis-ç¼“å­˜ç©¿é€&#34;&gt;äºŒã€Redis ç¼“å­˜ç©¿é€&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å‡ºç°åœºæ™¯&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;å¦‚æœç”¨æˆ·è¯·æ±‚çš„çƒ­ç‚¹æ•°æ®æœ¬èº«æ˜¯ä¸å­˜åœ¨çš„ï¼Œæ¯”å¦‚idä¸º-1ï¼Œæˆ–è€…id=&amp;lsquo;&amp;lsquo;çš„æ•°æ®ï¼ŒæŸ¥è¯¢ç¼“å­˜ä¸å­˜åœ¨åä¼šå°†è¯·æ±‚ç›´æ¥æ‰“åˆ°DBä¸Šï¼Œæœ€ç»ˆåœ¨DBä¸­ä¹Ÿæ²¡æœ‰æŸ¥åˆ°æ­¤æ•°æ®ï¼Œæ­¤æ—¶Redisç¼“å­˜å°±æ˜¯å»äº†ä½œç”¨ï¼Œæå¹¶å‘çš„æƒ…å†µä¸‹ä¼šé™ä½æ•°æ®åº“æ€§èƒ½ï¼Œç”šè‡³ç˜«ç—ª&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;è§£å†³æ–¹æ¡ˆ&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;å¢åŠ å‚æ•°æ ¡éªŒï¼Œæ‹¦æˆªæ‰å¤§é‡çš„éæ³•å‚æ•°è¯·æ±‚ï¼›&lt;/li&gt;
&lt;li&gt;ç¼“å­˜ç©ºå€¼ï¼Œå› ä¸ºæ•°æ®åº“ä¸­æœ¬æ¥å°±ä¸å­˜åœ¨è¿™äº›æ•°æ®ï¼Œå› æ­¤å¯ä»¥åœ¨ç¬¬ä¸€æ¬¡é‡å»ºç¼“å­˜æ—¶å°†value è®°å½•ä¸º nullï¼Œä¸‹æ¬¡è¯·æ±‚æ—¶ä»Redisè·å–åˆ° null å€¼ç›´æ¥è¿”å›ï¼ˆæ³¨æ„ï¼Œè¦å¯¹redisæŸ¥è¯¢çš„è¿”å›å€¼è¿›è¡Œä¸¥æ ¼æ ¡éªŒï¼ŒåŒºåˆ†keyä¸å­˜åœ¨è¿”å›çš„ç©ºå€¼å’Œä¸»åŠ¨è®¾ç½®çš„ç©ºå€¼nullï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;å¸ƒéš†è¿‡æ»¤å™¨ï¼Œå°†DBä¸­çš„çƒ­ç‚¹æ•°æ®åŠ è½½è‡³å¸ƒéš†è¿‡æ»¤å™¨ä¸­ï¼ˆå¸ƒéš†è¿‡æ»¤å™¨çš„ç‰¹æ€§ï¼šè‹¥åœ¨è¿‡æ»¤å™¨ä¸­å­˜åœ¨ï¼Œä¸ä¸€å®šçœŸæ˜¯å­˜åœ¨ï¼›è‹¥ä¸å­˜åœ¨æ—¶ï¼Œä¸€å®šä¸å­˜åœ¨ï¼‰ï¼Œæ¯æ¬¡è¯·æ±‚å‰å…ˆæ ¡éªŒå¸ƒéš†è¿‡æ»¤å™¨æ˜¯å¦å­˜åœ¨è¯¥keyï¼Œä¸å­˜åœ¨çš„è¯ç›´æ¥returnï¼›&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;ä¸‰redis-ç¼“å­˜å‡»ç©¿&#34;&gt;ä¸‰ã€Redis ç¼“å­˜å‡»ç©¿&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å‡ºç°åœºæ™¯&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;é«˜å¹¶å‘è¯·æ±‚åŒä¸€ä¸ªçƒ­ç‚¹æ•°æ®ï¼Œåœ¨çƒ­ç‚¹æ•°æ®å¤±æ•ˆçš„ç¬é—´ï¼Œå¤§é‡è¯·æ±‚åœ¨ç¼“å­˜ä¸­æ²¡æœ‰å‘½ä¸­ä¼šç›´æ¥è½åœ¨DBä¸Šè¿›è¡ŒæŸ¥è¯¢ï¼Œå¯¼è‡´DBå‹åŠ›ç¬é—´å¢åŠ &lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;è§£å†³æ–¹æ¡ˆ&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;å¢åŠ äº’æ–¥é”ï¼Œåœ¨ç¬¬ä¸€ä¸ªè¯·æ±‚æ²¡æœ‰åœ¨ç¼“å­˜å‘½ä¸­å¼€å§‹åœ¨DBè¿›è¡ŒæŸ¥è¯¢å¹¶é‡åŠ ç¼“å­˜æ—¶åŠ ä¸Šä¸€ä¸ªäº’æ–¥é”ï¼Œåœ¨ç¼“å­˜é‡å»ºå®Œæˆä¹‹å‰ï¼Œå¯¹è¿™åŒä¸€çƒ­ç‚¹æ•°æ®çš„è¯·æ±‚å°†ä¼šè¢«äº’æ–¥é”æ‹¦æˆªï¼Œè¢«æ‹¦æˆªçš„è¿™äº›è¯·æ±‚æ ¹æ®ä¸šåŠ¡éœ€æ±‚ï¼Œå¯ä»¥å»¶æ—¶é‡è¯•ç›´åˆ°æ‹¿åˆ°æ•°æ®æˆ–ç›´æ¥è¿”å›å¤±è´¥ç­‰ï¼›
çƒ­ç‚¹æ•°æ®ä¸è®¾ç½®è¿‡æœŸæ—¶é—´ï¼ˆä¸å»ºè®®ï¼Œéšç€çƒ­ç‚¹æ•°æ®çš„å¢åŠ ï¼Œæ— è¿‡æœŸæ—¶é—´çš„keyä¹Ÿè¶Šæ¥è¶Šå¤šï¼Œæˆ–å¯¼è‡´Redisçš„å­˜å‚¨å‹åŠ›å¢åŠ ï¼‰&lt;/p&gt;
&lt;/blockquote&gt;</description>
        </item>
        <item>
        <title>Mysql Deadlock</title>
        <link>https://x-xkang.com/p/mysql-deadlock/</link>
        <pubDate>Mon, 22 Nov 2021 10:48:54 +0800</pubDate>
        
        <guid>https://x-xkang.com/p/mysql-deadlock/</guid>
        <description>&lt;h2 id=&#34;é—®é¢˜æè¿°&#34;&gt;é—®é¢˜æè¿°&lt;/h2&gt;
&lt;p&gt;ç”Ÿäº§ç¯å¢ƒæ¯éš”ä¸€æ®µæ—¶é—´ä¼šå‡ºç°mysqlæ•°æ®åº“çš„æ­»é”æ—¥å¿—:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://x-xkang.com/images/mysql-dead-lock/question-show.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;quest-show&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;åŒä¸€æ¡updateè¯­å¥ï¼Œwhere æ¡ä»¶ä¸åŒï¼Œä½†æ˜¯ä¼šè§¦å‘æ­»é”ï¼Œäºæ˜¯æŸ¥çœ‹é˜¿é‡Œäº‘çš„æ•°æ®åº“æ­»é”æ—¥å¿—ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://x-xkang.com/images/mysql-dead-lock/deadlock-show.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;quest-show&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;update è¯­å¥å¦‚æœä½¿ç”¨çš„æ˜¯ä¸»é”®ç´¢å¼•ï¼Œä¼šå°†ä¸»é”®ç´¢å¼•é”ä½ï¼Œå¦‚æœæ˜¯æ™®é€šç´¢å¼•ï¼Œä¼šå…ˆå°†æ™®é€šç´¢å¼•é”ä½ï¼Œç„¶åæ ¹æ®æ™®é€šç´¢å¼•çš„ä¸»é”®idå†é”ä½ä¸»é”®ç´¢å¼•ï¼ŒåŒä¸€æ¡updateè¯­å¥çš„ç´¢å¼•æ‰§è¡Œåº”è¯¥æ˜¯ä¸€æ ·çš„ï¼Œä¸åº”è¯¥å­˜åœ¨äº’ç›¸ç­‰å¾…é‡Šæ”¾çš„æƒ…å†µï¼Œäºæ˜¯æœ‰ç‚¹é™·å…¥åƒµå±€ï¼Œgoogleä¸€ä¸‹æœ‰é‡åˆ°ç›¸ä¼¼é—®é¢˜çš„å¸–å­ï¼ŒæŸ¥çœ‹äº†æ‰§è¡Œè®¡åˆ’ï¼Œä¹‹å‰ä¹Ÿçœ‹äº†æ‰§è¡Œè®¡åˆ’ï¼Œä½†æ˜¯å¿½ç•¥äº†&lt;code&gt;type&lt;/code&gt;å­—æ®µå’Œ&lt;code&gt;extra&lt;/code&gt;å­—æ®µï¼Œç»“æœå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://x-xkang.com/images/mysql-dead-lock/explain-show.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;explain-show&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://x-xkang.com/images/mysql-dead-lock/explain-extra-show.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;explain-show&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;ç´¢å¼•åˆå¹¶æŸ¥è¯¢ï¼Œä¼šåŒæ—¶ä½¿ç”¨&lt;code&gt;idx_status_vmstatus&lt;/code&gt; å’Œ &lt;code&gt;uniq_instance&lt;/code&gt; æ‰«æè®°å½•å¹¶ç»™æ™®é€šç´¢å¼•åŠ é”ï¼Œç„¶åé€šè¿‡æ™®é€šç´¢å¼•ä¸­çš„ä¸»é”®IDå»é”å®šä¸»é”®ç´¢å¼•ï¼Œé—®é¢˜å°±å‡ºç°åœ¨è¿™é‡Œï¼Œç”±äº idx_status_vmstatus ç´¢å¼•æ‰«æå’Œ &lt;code&gt;uniq_instance&lt;/code&gt;ç´¢å¼•æ‰«ææ˜¯åŒæ—¶çš„ï¼Œå¦‚æœä¸¤æ¡updateè¯­å¥åŒæ—¶æ‰§è¡Œï¼Œåˆ™ äº‹åŠ¡2 å…ˆé”å®š é”å®š &lt;code&gt;uniq_instance&lt;/code&gt; æˆåŠŸåé”å®šå¯¹åº”çš„ä¸»é”®ï¼Œç„¶åäº‹åŠ¡1 é”å®š&lt;code&gt;idx_status_vmstatus&lt;/code&gt; æˆåŠŸåä¹Ÿå»é”å®šä¸»é”®,æ­¤æ—¶ä¸»é”®å·²è¢«äº‹åŠ¡2é”å®šï¼Œäºæ˜¯é˜»å¡ç­‰å¾…&lt;code&gt;primary&lt;/code&gt;é‡Šæ”¾ï¼Œæ¥ç€äº‹åŠ¡2å¼€å§‹æ‰«æ &lt;code&gt;idx_status_vmstatus&lt;/code&gt; å‘ç°æ™®é€šç´¢å¼•è¢«äº‹åŠ¡1é”ä½ï¼Œäºæ˜¯é˜»å¡ç­‰å¾…&lt;code&gt;idx_status_vmstatus&lt;/code&gt;ï¼Œäºæ˜¯å‡ºç°æœ€ç»ˆçš„ äº‹åŠ¡2ç­‰å¾… äº‹åŠ¡2é‡Šæ”¾&lt;code&gt;idx_status_vmstatus&lt;/code&gt;ï¼Œäº‹åŠ¡1ç­‰å¾…äº‹åŠ¡1é‡Šæ”¾&lt;code&gt;primary&lt;/code&gt;ï¼Œå³å‡ºç°æ­»é”ã€‚&lt;/p&gt;
&lt;p&gt;è§£å†³æ–¹æ¡ˆä¹Ÿæ¯”è¾ƒç®€å•ï¼Œå…ˆæŸ¥å‡ºä¸»é”®IDï¼Œä½¿ç”¨ä¸»é”®IDå†æ›´æ–°è®°å½•ï¼Œå› ä¸ºä½¿ç”¨ä¸»é”®IDç›´æ¥åŠ é”çš„è¯ï¼Œé”ç²’åº¦æ›´å°ï¼ŒåŠæ—¶åŒæ—¶æ›´æ–°ä¸€æ¡è®°å½•ï¼Œä¹Ÿä¸ä¼šå‡ºç°åŒæ—¶ç­‰å¾…å¯¹æ–¹å°†é”é‡Šæ”¾çš„åœºæ™¯ã€‚é—®é¢˜æè¿°çš„æ¯”è¾ƒç®€å•ï¼Œä½†åœ¨æ’æŸ¥è¿‡ç¨‹ä¸­è¿˜æ˜¯èµ°äº†ä¸å°‘å¼¯è·¯çš„ã€‚&lt;/p&gt;</description>
        </item>
        <item>
        <title>Mysql -- å…³é”®å­—çš„æ‰§è¡Œé¡ºåº</title>
        <link>https://x-xkang.com/p/mysql-%E5%85%B3%E9%94%AE%E5%AD%97%E7%9A%84%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F/</link>
        <pubDate>Sat, 25 Sep 2021 17:18:01 +0800</pubDate>
        
        <guid>https://x-xkang.com/p/mysql-%E5%85%B3%E9%94%AE%E5%AD%97%E7%9A%84%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F/</guid>
        <description>&lt;p&gt;æˆ‘ä»¬å¹³æ—¶ä½¿ç”¨çš„æŸ¥è¯¢ sql åŸºæœ¬æ ¼å¼å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;k&#34;&gt;SELECT&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;DISTINCT&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;select_list&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;FROM&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;left_table&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;join_type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;JOIN&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;right_table&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;ON&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;join_condition&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;WHERE&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;where_condition&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;GROUP&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;BY&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;group_by_condition&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;HAVING&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;having_condition&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;ORDER&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;BY&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;order_by&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;LIMIT&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;limit_number&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å®é™…çš„æ‰§è¡Œé¡ºåºå¹¶ä¸æ˜¯å¦‚ä¸Šä¹¦å†™é¡ºåºä¸€æ ·çš„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;FROM&lt;/code&gt;: å¯¹ from å·¦å³çš„è¡¨è®¡ç®—&lt;code&gt;ç¬›å¡å°”ç§¯&lt;/code&gt;ï¼Œäº§ç”Ÿè™šæ‹Ÿè¡¨&lt;code&gt;VT1&lt;/code&gt;ï¼›&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ON&lt;/code&gt;: å¯¹ç¬›å¡å°”ç§¯è¿›è¡Œç­›é€‰ï¼Œåªæœ‰ç¬¦åˆæ¡ä»¶çš„è¡Œæ‰ä¼šè¢«è®°å½•åˆ°è™šæ‹Ÿè¡¨&lt;code&gt;VT2&lt;/code&gt;ä¸­ï¼›&lt;/li&gt;
&lt;li&gt;&lt;code&gt;JOIN&lt;/code&gt;: å¦‚æœæ˜¯ OUT JOINï¼Œé‚£ä¹ˆå°†ä¿ç•™è¡¨ä¸­ï¼ˆå¦‚å·¦è¡¨æˆ–è€…å³è¡¨ï¼‰æœªåŒ¹é…çš„è¡Œä½œä¸ºå¤–éƒ¨è¡Œæ·»åŠ åˆ°è™šæ‹Ÿè¡¨&lt;code&gt;VT2&lt;/code&gt;ä¸­ï¼Œä»è€Œäº§ç”Ÿäº†è™šæ‹Ÿè¡¨&lt;code&gt;VT3&lt;/code&gt;ï¼›&lt;/li&gt;
&lt;li&gt;&lt;code&gt;WHERE&lt;/code&gt;: å¯¹ JOIN ä¹‹åçš„è™šæ‹Ÿè¡¨&lt;code&gt;VT3&lt;/code&gt;è¿›è¡Œè¿›ä¸€æ­¥çš„ç­›é€‰ï¼Œæ»¡è¶³æ¡ä»¶çš„ç•™ä¸‹ç”Ÿæˆè™šæ‹Ÿè¡¨&lt;code&gt;VT4&lt;/code&gt;ï¼›&lt;/li&gt;
&lt;li&gt;&lt;code&gt;GROUP BY&lt;/code&gt;: å¯¹è™šæ‹Ÿè¡¨&lt;code&gt;VT4&lt;/code&gt;è¿›è¡Œåˆ†ç»„ï¼Œç”Ÿæˆ&lt;code&gt;VT5&lt;/code&gt;ï¼›&lt;/li&gt;
&lt;li&gt;&lt;code&gt;HAVING&lt;/code&gt;: å¯¹åˆ†ç»„åçš„&lt;code&gt;VT5&lt;/code&gt;è¿›è¡Œç­›é€‰ï¼Œç”Ÿæˆè™šæ‹Ÿè¡¨&lt;code&gt;VT6&lt;/code&gt;ï¼›&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SELECT&lt;/code&gt;: é€‰æ‹© SELECT æŒ‡å®šçš„åˆ—ï¼Œæ’å…¥åˆ°è™šæ‹Ÿè¡¨&lt;code&gt;VT7&lt;/code&gt;ä¸­ï¼›&lt;/li&gt;
&lt;li&gt;&lt;code&gt;DISTINCT&lt;/code&gt;: å¯¹è™šæ‹Ÿè¡¨&lt;code&gt;VT7&lt;/code&gt;ä¸­çš„æ•°æ®è¿›è¡Œå»é‡ï¼Œäº§ç”Ÿ&lt;code&gt;VT8&lt;/code&gt;ï¼›&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ORDER BY&lt;/code&gt;: å¯¹è™šæ‹Ÿè¡¨&lt;code&gt;VT8&lt;/code&gt;çš„ä¸­çš„æ•°æ®è¿›è¡Œæ’åºç”Ÿæˆ&lt;code&gt;VT9&lt;/code&gt;ï¼›&lt;/li&gt;
&lt;li&gt;&lt;code&gt;LIMIT&lt;/code&gt;: å–å‡º&lt;code&gt;VT9&lt;/code&gt;ä¸­æŒ‡å®šè¡Œçš„æ•°æ®ï¼Œäº§ç”Ÿè™šæ‹Ÿè¡¨&lt;code&gt;VT10&lt;/code&gt;ï¼Œå¹¶è¿”å›æ•°æ®&lt;/li&gt;
&lt;/ul&gt;</description>
        </item>
        <item>
        <title>Mysql -- äº‹åŠ¡æµ…æ</title>
        <link>https://x-xkang.com/p/mysql-%E4%BA%8B%E5%8A%A1%E6%B5%85%E6%9E%90/</link>
        <pubDate>Wed, 24 Mar 2021 11:18:58 +0800</pubDate>
        
        <guid>https://x-xkang.com/p/mysql-%E4%BA%8B%E5%8A%A1%E6%B5%85%E6%9E%90/</guid>
        <description>&lt;h2 id=&#34;ä¸€mysql-äº‹åŠ¡&#34;&gt;ä¸€ã€Mysql äº‹åŠ¡&lt;/h2&gt;
&lt;p&gt;MySQL äº‹åŠ¡ä¸»è¦ç”¨äºå¤„ç†æ“ä½œé‡å¤§ã€å¤æ‚åº¦é«˜çš„æ•°æ®&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;MySQL æ•°æ®åº“ä¸­åªæœ‰ Innodb å­˜å‚¨å¼•æ“æ”¯æŒäº‹åŠ¡æ“ä½œ&lt;/li&gt;
&lt;li&gt;äº‹åŠ¡å¤„ç†å¯ä»¥ç”¨æ¥ç»´æŠ¤æ•°æ®åº“çš„å®Œæ•´æ€§ï¼Œä¿è¯æˆæ‰¹çš„ SQL è¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œè¦ä¹ˆå…¨éƒ¨ä¸æ‰§è¡Œ&lt;/li&gt;
&lt;li&gt;äº‹åŠ¡ç”¨æ¥ç®¡ç†&lt;code&gt;insert&lt;/code&gt;ï¼Œ&lt;code&gt;update&lt;/code&gt;ï¼Œ&lt;code&gt;delete&lt;/code&gt;è¯­å¥&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;äºŒäº‹åŠ¡ç‰¹æ€§&#34;&gt;äºŒã€äº‹åŠ¡ç‰¹æ€§&lt;/h2&gt;
&lt;p&gt;ä¸€èˆ¬æ¥è¯´ï¼Œäº‹åŠ¡å¿…é¡»æ»¡è¶³ 4 ä¸ªæ¡ä»¶ï¼ˆACIDï¼‰ï¼Œå³åŸå­æ€§ã€ä¸€è‡´æ€§ã€æŒä¹…æ€§ã€éš”ç¦»æ€§ï¼Œå…·ä½“å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;h3 id=&#34;1åŸå­æ€§-atomicity&#34;&gt;&lt;strong&gt;1ã€åŸå­æ€§&lt;/strong&gt; (&lt;strong&gt;A&lt;/strong&gt;tomicity)&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¸€ä¸ªäº‹åŠ¡ï¼ˆTransactionï¼‰ä¸­çš„æ‰€æœ‰æ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨å®Œæˆï¼Œè¦ä¹ˆå…¨éƒ¨ä¸å®Œæˆï¼Œä¸ä¼šç»“æŸåœ¨ä¸­é—´æŸä¸ªç¯èŠ‚ï¼Œäº‹åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œä¼šè¢«å›æ»šï¼ˆRollbackï¼‰åˆ°äº‹åŠ¡å¼€å§‹å‰çš„çŠ¶æ€ï¼Œå°±åƒäº‹åŠ¡æ²¡æœ‰æ‰§è¡Œè¿‡ä¸€æ ·ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;2ä¸€è‡´æ€§consistency&#34;&gt;&lt;strong&gt;2ã€ä¸€è‡´æ€§&lt;/strong&gt;ï¼ˆ&lt;strong&gt;C&lt;/strong&gt;onsistencyï¼‰&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;åœ¨äº‹åŠ¡å¼€å§‹ä¹‹å‰ä»¥åŠäº‹åŠ¡ç»“æŸä¹‹åï¼Œæ•°æ®åº“çš„å®Œæ•´æ€§æ²¡æœ‰è¢«ç ´åã€‚è¿™æ ‡è¯†å†™å…¥çš„æ•°æ®å¿…é¡»å®Œå…¨ç¬¦åˆæ‰€æœ‰çš„é¢„è®¾è§„åˆ™ï¼Œè¿™åŒ…å«æ•°æ®çš„ç²¾ç¡®åº¦ï¼Œä¸²è”æ€§ä»¥åŠåç»­æ•°æ®åº“å¯ä»¥è‡ªå‘çš„å®Œæˆé¢„å®šçš„å·¥ä½œã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;3éš”ç¦»æ€§isolation&#34;&gt;&lt;strong&gt;3ã€éš”ç¦»æ€§&lt;/strong&gt;ï¼ˆ&lt;strong&gt;I&lt;/strong&gt;solationï¼‰&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;æ•°æ®åº“å…è®¸å¤šä¸ªå¹¶å‘äº‹åŠ¡åŒæ—¶å¯¹å…¶æ•°æ®è¿›è¡Œè¯»å†™å’Œä¿®æ”¹çš„èƒ½åŠ›ï¼Œéš”ç¦»æ€§å¯ä»¥é˜²æ­¢å¤šä¸ªäº‹åŠ¡å¹¶å‘æ‰§è¡Œæ—¶ç”±äºäº¤å‰æ‰§è¡Œè€Œå¯¼è‡´æ•°æ®çš„ä¸ä¸€è‡´ï¼Œäº‹åŠ¡éš”ç¦»åˆ†ä¸ºä»¥ä¸‹ä¸åŒçº§åˆ«ï¼š&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¯»æœªæäº¤ï¼ˆRead uncommitedï¼‰&lt;/strong&gt;: å…è®¸è„è¯»ï¼Œä¹Ÿå°±æ˜¯å¯èƒ½è¯»åˆ°å…¶ä»–ä¼šè¯ä¸­æœªæäº¤äº‹åŠ¡ä¿®æ”¹çš„æ•°æ®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¯»å·²æäº¤ï¼ˆRead commitedï¼‰&lt;/strong&gt;: åªèƒ½è¯»å–åˆ°å·²æäº¤çš„æ•°æ®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¯é‡å¤è¯»ï¼ˆRepeatable readï¼‰&lt;/strong&gt;: åœ¨åŒä¸€ä¸ªäº‹åŠ¡å†…çš„æŸ¥è¯¢éƒ½æ˜¯ä»å¼€å§‹æ—¶åˆ»ä¸€è‡´çš„ï¼ŒInnoDB å­˜å‚¨å¼•æ“é»˜è®¤çš„äº‹åŠ¡éš”ç¦»çº§åˆ«å°±æ˜¯&lt;strong&gt;å¯é‡å¤è¯»&lt;/strong&gt;ï¼Œåœ¨ SQL æ ‡å‡†ä¸­ï¼Œè¯¥éš”ç¦»çº§åˆ«æ¶ˆé™¤äº†ä¸å¯é‡å¤è¯»ï¼Œä½†è¿˜æ˜¯å­˜åœ¨å¹»è¯»ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¸²è¡ŒåŒ–ï¼ˆSerializableï¼‰&lt;/strong&gt;: å®Œå…¨ä¸²è¡ŒåŒ–çš„è¯»ï¼Œæ¯æ¬¡è¯»éƒ½éœ€è¦è·å¾—è¡¨çº§çš„å…±äº«é”ï¼Œè¯»å†™ç›¸äº’éƒ½ä¼šé˜»å¡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;4æŒä¹…æ€§durability&#34;&gt;&lt;strong&gt;4ã€æŒä¹…æ€§&lt;/strong&gt;ï¼ˆ&lt;strong&gt;D&lt;/strong&gt;urabilityï¼‰&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;äº‹åŠ¡å¤„ç†ç»“æŸåï¼Œå¯¹æ•°æ®çš„ä¿®æ”¹å°±æ˜¯æ°¸ä¹…çš„ï¼Œå‡ éç³»ç»Ÿæ•…éšœä¹Ÿä¸ä¼šä¸¢å¤±ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h2 id=&#34;ä¸‰äº‹åŠ¡çš„å¹¶å‘å¤„ç†&#34;&gt;ä¸‰ã€äº‹åŠ¡çš„å¹¶å‘å¤„ç†&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;å‡†å¤‡å·¥ä½œ&lt;/strong&gt;ï¼šåˆ›å»ºæ•°æ®è¡¨ï¼Œæ’å…¥ä¸€æ¡æ•°æ®&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sql&#34; data-lang=&#34;sql&#34;&gt;&lt;span class=&#34;k&#34;&gt;create&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;table&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;user&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;id&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;not&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;null&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;auto_increment&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;comment&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;ä¸»é”®ID&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;varchar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;30&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;not&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;null&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;default&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;#39;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;comment&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;ç”¨æˆ·å&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;primary&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;engine&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;innodb&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;charset&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;utf8mb4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;

&lt;span class=&#34;o&#34;&gt;#&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;æ’å…¥æ•°æ®&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;insert&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;into&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;`&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;user&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;`&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;`&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;`&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;values&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;è€ç‹01&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;strong&gt;äº‹åŠ¡å¹¶å‘å¯èƒ½å‡ºç°çš„æƒ…å†µï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è„è¯»&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸€ä¸ªäº‹åŠ¡è¯»åˆ°äº†å¦ä¸€ä¸ªæœªæäº¤äº‹åŠ¡ä¿®æ”¹è¿‡çš„æ•°æ®&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://x-xkang.com/images/mysql-transaction/dirty-read.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;dirty-read1&#34;
	
	
&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;1ã€ä¼šè¯ &lt;code&gt;B&lt;/code&gt; å¼€å¯ä¸€ä¸ªäº‹åŠ¡ï¼ŒæŠŠ&lt;code&gt;id=1&lt;/code&gt;çš„&lt;code&gt;name&lt;/code&gt;æ”¹ä¸º&lt;code&gt;è€ç‹01&lt;/code&gt;ï¼›&lt;/p&gt;
&lt;p&gt;2ã€ä¼šè¯ &lt;code&gt;A&lt;/code&gt; ä¹Ÿå¼€å¯ä¸€ä¸ªäº‹åŠ¡ï¼Œè¯»å–&lt;code&gt;id=1&lt;/code&gt;çš„&lt;code&gt;name&lt;/code&gt;ï¼Œæ¬¡æ—¶çš„æŸ¥è¯¢ç»“æœä¸º&lt;code&gt;è€ç‹02&lt;/code&gt;ï¼›&lt;/p&gt;
&lt;p&gt;3ã€ä¼šè¯ &lt;code&gt;B&lt;/code&gt; çš„äº‹åŠ¡å›æ»šäº†ä¿®æ”¹çš„æ“ä½œï¼Œè¿™æ ·ä¼šè¯ &lt;code&gt;A&lt;/code&gt; è¯»åˆ°çš„æ•°æ®å°±æ˜¯ä¸å­˜åœ¨çš„ï¼›&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªç°è±¡å°±æ˜¯è„è¯»ã€‚ï¼ˆè„è¯»åªä¼šåœ¨è¯»æœªæäº¤çš„éš”ç¦»çº§åˆ«ä¸­æ‰ä¼šå‡ºç°ï¼‰ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸å¯é‡å¤è¯»&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸€ä¸ªäº‹åŠ¡åªèƒ½è¯»åˆ°å¦ä¸€ä¸ªå·²ç»æäº¤çš„äº‹åŠ¡ä¿®æ”¹è¿‡çš„æ•°æ®ï¼Œå¹¶ä¸”å…¶ä»–äº‹åŠ¡æ¯å¯¹è¯¥æ•°æ®è¿›è¡Œä¸€æ¬¡ä¿®æ”¹å¹¶æäº¤åï¼Œè¯¥äº‹åŠ¡éƒ½èƒ½æŸ¥è¯¢å¾—åˆ°æœ€æ–°å€¼ã€‚ï¼ˆä¸å¯é‡å¤è¯»åœ¨è¯»æœªæäº¤å’Œè¯»å·²æäº¤éš”ç¦»çº§åˆ«éƒ½å¯èƒ½ä¼šå‡ºç°ï¼‰&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://x-xkang.com/images/mysql-transaction/non-repeatable-read.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;non-repeatable-read&#34;
	
	
&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;1ã€ä¼šè¯ &lt;code&gt;A&lt;/code&gt; å¼€å¯äº‹åŠ¡ï¼ŒæŸ¥è¯¢&lt;code&gt;id=1&lt;/code&gt;çš„ name æ˜¯&lt;code&gt;è€ç‹01&lt;/code&gt;ï¼›&lt;/p&gt;
&lt;p&gt;2ã€ä¼šè¯ &lt;code&gt;B&lt;/code&gt; å°†&lt;code&gt;id=1&lt;/code&gt;çš„ name æ›´æ–°ä¸º&lt;code&gt;è€ç‹02&lt;/code&gt;ï¼ˆéšå¼äº‹åŠ¡ï¼Œautocommit=1ï¼Œæ‰§è¡Œå®Œ sql ä¼šè‡ªåŠ¨ commitï¼‰ï¼›&lt;/p&gt;
&lt;p&gt;3ã€ä¼šè¯ &lt;code&gt;A&lt;/code&gt; å†æŸ¥è¯¢æ—¶&lt;code&gt;id=1&lt;/code&gt;çš„ name ä¸º&lt;code&gt;è€ç‹02&lt;/code&gt;ï¼›&lt;/p&gt;
&lt;p&gt;4ã€ä¼šè¯ &lt;code&gt;B&lt;/code&gt; åˆå°†&lt;code&gt;id=1&lt;/code&gt;çš„ name æ›´æ–°ä¸º&lt;code&gt;è€ç‹03&lt;/code&gt;ï¼›&lt;/p&gt;
&lt;p&gt;5ã€ä¼šè¯ &lt;code&gt;A&lt;/code&gt; å†æŸ¥è¯¢&lt;code&gt;id=1&lt;/code&gt;çš„ name æ—¶ï¼Œç»“æœä¸º&lt;code&gt;è€ç‹03&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç§ç°è±¡å°±æ˜¯ä¸å¯é‡å¤è¯»ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¹»è¯»&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸€ä¸ªäº‹åŠ¡å…ˆæ ¹æ®æŸäº›æ¡ä»¶æŸ¥å‡ºä¸€äº›è®°å½•ï¼Œä¹‹åå¦ä¸€ä¸ªäº‹åŠ¡åˆæƒ³è¡¨ä¸­æ’å…¥äº†ç¬¦åˆè¿™äº›æ¡ä»¶çš„è®°å½•ï¼ŒåŸå…ˆçš„äº‹åŠ¡å†æ¬¡æŒ‰ç…§è¯¥æ¡ä»¶æŸ¥è¯¢æ—¶ï¼Œèƒ½å¤ŸæŠŠå¦ä¸€ä¸ªäº‹åŠ¡æ’å…¥çš„æ•°æ®ä¹ŸæŸ¥å‡ºæ¥ã€‚
ï¼ˆå¹»è¯»åœ¨è¯»æœªæäº¤ã€è¯»å·²æäº¤ã€å¯é‡å¤è¯»éš”ç¦»çº§åˆ«ä¸­éƒ½å¯èƒ½ä¼šå‡ºç°ï¼‰&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://x-xkang.com/images/mysql-transaction/phantom-read.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;phantom-read&#34;
	
	
&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;1ã€ä¼šè¯ &lt;code&gt;A&lt;/code&gt; å¼€å§‹äº‹åŠ¡ï¼ŒæŸ¥è¯¢&lt;code&gt;id&amp;gt;0&lt;/code&gt;çš„æ•°æ®ï¼Œç»“æœåªæœ‰ name=è€ç‹ 01 çš„ä¸€æ¡æ•°æ®&lt;/p&gt;
&lt;p&gt;2ã€ä¼šè¯ &lt;code&gt;B&lt;/code&gt; åƒæ•°æ®è¡¨ä¸­æ’å…¥äº†ä¸€æ¡&lt;code&gt;name=è€ç‹02&lt;/code&gt;çš„æ•°æ®ï¼ˆéšå¼äº‹åŠ¡ï¼Œæ‰§è¡Œ sql åè‡ªåŠ¨ commitï¼‰&lt;/p&gt;
&lt;p&gt;3ã€ä¼šè¯ &lt;code&gt;A&lt;/code&gt; çš„äº‹åŠ¡å†æ¬¡æŸ¥è¯¢ &lt;code&gt;id&amp;gt;0&lt;/code&gt;çš„æ•°æ®&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸åŒéš”ç¦»çº§åˆ«ä¸‹å‡ºç°äº‹åŠ¡å¹¶å‘é—®é¢˜çš„å¯èƒ½&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;éš”ç¦»çº§åˆ«&lt;/th&gt;
&lt;th&gt;è„è¯»&lt;/th&gt;
&lt;th&gt;ä¸å¯é‡å¤è¯»&lt;/th&gt;
&lt;th&gt;å¹»è¯»&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;è¯»æœªæäº¤&lt;/td&gt;
&lt;td&gt;å¯èƒ½&lt;/td&gt;
&lt;td&gt;å¯èƒ½&lt;/td&gt;
&lt;td&gt;å¯èƒ½&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;è¯»å·²æäº¤&lt;/td&gt;
&lt;td&gt;ä¸å¯èƒ½&lt;/td&gt;
&lt;td&gt;å¯èƒ½&lt;/td&gt;
&lt;td&gt;å¯èƒ½&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å¯é‡å¤è¯»&lt;/td&gt;
&lt;td&gt;ä¸å¯èƒ½&lt;/td&gt;
&lt;td&gt;ä¸å¯èƒ½&lt;/td&gt;
&lt;td&gt;å¯èƒ½&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ä¸²è¡ŒåŒ–&lt;/td&gt;
&lt;td&gt;ä¸å¯èƒ½&lt;/td&gt;
&lt;td&gt;ä¸å¯èƒ½&lt;/td&gt;
&lt;td&gt;ä¸å¯èƒ½&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h2 id=&#34;å››äº‹åŠ¡çš„å®ç°åŸç†&#34;&gt;å››ã€äº‹åŠ¡çš„å®ç°åŸç†&lt;/h2&gt;
&lt;p&gt;é¦–å…ˆäº†è§£ä¸€ä¸‹ redo log å’Œ undo log&lt;/p&gt;
&lt;h3 id=&#34;1redo-log&#34;&gt;1ã€&lt;strong&gt;redo log&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;MYSQL ä¸ºäº†æå‡æ€§èƒ½ä¸ä¼šæŠŠæ¯æ¬¡çš„ä¿®æ”¹éƒ½å®æ—¶åŒæ­¥åˆ°ç£ç›˜ï¼Œè€Œæ˜¯ä¼šä¼˜å…ˆå­˜å‚¨åˆ° Buffer Poolï¼ˆç¼“å†²æ± ï¼‰é‡Œé¢ï¼ŒæŠŠè¿™ä¸ªå½“åšç¼“å­˜æ¥ç”¨ï¼Œç„¶åä½¿ç”¨åå°çº¿ç¨‹å»åšç¼“å†²æ± å’Œç£ç›˜ä¹‹é—´çš„åŒæ­¥&lt;/p&gt;
&lt;p&gt;å¦‚æœè¿˜æ²¡æ¥å¾—åŠåŒæ­¥æ•°æ®å°±å‡ºç°å®•æœºæˆ–è€…æ–­ç”µï¼Œå°±ä¼šå¯¼è‡´ä¸¢å¤±éƒ¨åˆ†å·²æäº¤äº‹åŠ¡çš„ä¿®æ”¹ä¿¡æ¯ï¼Œ&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥å¼•å…¥äº†&lt;strong&gt;redo log&lt;/strong&gt;æ¥è®°å½•å·²æˆåŠŸæäº¤äº‹åŠ¡çš„ä¿®æ”¹ä¿¡æ¯ï¼Œå¹¶ä¸”æŠŠ redo log æŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œç³»ç»Ÿé‡å¯ä¹‹åè¯»å– redo log æ¢å¤æœ€æ–°æ•°æ®&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;redo log&lt;/strong&gt; æ˜¯ç”¨æ¥æ¢å¤æ•°æ®çš„ï¼Œç”¨äºä¿éšœå·²æäº¤äº‹åŠ¡çš„æŒä¹…åŒ–ç‰¹æ€§ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;2undo-log&#34;&gt;2ã€&lt;strong&gt;undo log&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;undo log å«åšå›æ»šæ—¥å¿—ï¼Œç”¨äºè®°å½•æ•°æ®&lt;strong&gt;è¢«ä¿®æ”¹å‰&lt;/strong&gt;çš„ä¿¡æ¯ï¼Œä¸ redo log è®°å½•çš„æ•°æ®ç›¸åï¼Œredo log æ˜¯è®°å½•ä¿®æ”¹åçš„æ•°æ®ï¼Œundo log è®°å½•çš„æ˜¯æ•°æ®çš„é€»è¾‘å˜åŒ–ï¼Œä¸ºäº†å‘ç”Ÿé”™è¯¯æ—¶å›æ»šä¹‹å‰çš„æ“ä½œï¼Œéœ€è¦å°†ä¹‹å‰çš„æ“ä½œéƒ½è®°å½•ä¸‹æ¥ï¼Œç„¶ååœ¨å‘ç”Ÿé”™è¯¯æ—¶æ‰å¯ä»¥å›æ»š&lt;/p&gt;
&lt;p&gt;æ¯æ¬¡å†™å…¥æ•°æ®æˆ–è€…ä¿®æ”¹æ•°æ®ä¹‹å‰éƒ½ä¼šæŠŠä¿®æ”¹å‰çš„ä¿¡æ¯è®°å½•åˆ° undo log&lt;/p&gt;
&lt;h3 id=&#34;3äº‹åŠ¡ç‰¹æ€§çš„å…·ä½“å®ç°åŸç†&#34;&gt;3ã€&lt;strong&gt;&lt;code&gt;äº‹åŠ¡ç‰¹æ€§çš„å…·ä½“å®ç°åŸç†&lt;/code&gt;&lt;/strong&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;äº‹åŠ¡çš„åŸå­æ€§é€šè¿‡ &lt;strong&gt;&lt;code&gt;undo log&lt;/code&gt;&lt;/strong&gt; æ¥å®ç°çš„&lt;/li&gt;
&lt;li&gt;äº‹åŠ¡çš„æŒä¹…æ€§æ˜¯é€šè¿‡ &lt;strong&gt;&lt;code&gt;redo log&lt;/code&gt;&lt;/strong&gt; å®ç°çš„&lt;/li&gt;
&lt;li&gt;äº‹åŠ¡çš„éš”ç¦»æ€§æ˜¯é€šè¿‡ &lt;strong&gt;&lt;code&gt;è¯»å†™é”&lt;/code&gt; + &lt;code&gt;MVCC&lt;/code&gt;&lt;/strong&gt; å®ç°çš„&lt;/li&gt;
&lt;li&gt;äº‹åŠ¡çš„ä¸€è‡´æ€§æ˜¯é€šè¿‡ **&lt;code&gt;åŸå­æ€§&lt;/code&gt;ã€&lt;code&gt;æŒä¹…æ€§&lt;/code&gt;ã€&lt;code&gt;éš”ç¦»æ€§&lt;/code&gt;**æ¥å®ç°çš„&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;31åŸå­æ€§çš„å®ç°&#34;&gt;3.1ã€åŸå­æ€§çš„å®ç°&lt;/h4&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ¯æ¡æ•°æ®å˜æ›´ï¼ˆinsert/update/deleteï¼‰æ“ä½œéƒ½ä¼šè®°å½•ä¸€æ¡&lt;code&gt;undo log&lt;/code&gt;ï¼Œå¹¶ä¸”&lt;code&gt;undo log&lt;/code&gt;å¿…é¡»å…ˆäºæ•°æ®æŒä¹…åŒ–åˆ°ç£ç›˜ä¸Šã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ‰€è°“çš„å›æ»šå°±æ˜¯æ ¹æ®&lt;code&gt;undo log&lt;/code&gt;åšé€†å‘æ“ä½œï¼Œæ¯”å¦‚&lt;code&gt;delete&lt;/code&gt;çš„é€†å‘æ“ä½œæ˜¯&lt;code&gt;insert&lt;/code&gt;ï¼Œ&lt;code&gt;insert&lt;/code&gt;çš„é€†å‘æ“ä½œæ˜¯&lt;code&gt;delete&lt;/code&gt;ï¼Œ&lt;code&gt;update&lt;/code&gt;çš„é€†å‘æ“ä½œæ˜¯&lt;code&gt;update&lt;/code&gt;ç­‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¸ºäº†åšåˆ°åŒæ—¶æˆåŠŸæˆ–è€…åŒæ—¶å¤±è´¥ï¼Œå½“ç³»ç»Ÿå‘ç”Ÿé”™è¯¯æˆ–è€…æ‰§è¡Œ&lt;code&gt;rollback&lt;/code&gt;æ—¶éœ€æ ¹æ®&lt;code&gt;undo log&lt;/code&gt;è¿›è¡Œå›æ»š&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;32æŒä¹…æ€§çš„å®ç°&#34;&gt;3.2ã€æŒä¹…æ€§çš„å®ç°&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;Mysql çš„æ•°æ®å­˜å‚¨æœºåˆ¶æ˜¯å°†æ•°æ®æœ€ç»ˆæŒä¹…åŒ–åˆ°ç£ç›˜ä¸Šï¼Œå¹¶ä¸”é¢‘ç¹çš„è¿›è¡Œç£ç›˜ IO æ˜¯éå¸¸æ¶ˆè€—æ€§èƒ½çš„ï¼Œä¸ºäº†æå‡æ€§èƒ½ï¼ŒInnoDB æä¾›äº†ç¼“å†²æ± ï¼ˆBuffer Poolï¼‰ï¼Œç¼“å†²æ± ä¸­åŒ…å«äº†ç£ç›˜æ•°æ®ä¹Ÿçš„æ˜ å°„ï¼Œå¯ä»¥å½“åšç¼“å­˜æ¥ä½¿ç”¨&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è¯»æ•°æ®&lt;/strong&gt;ï¼šä¼šé¦–å…ˆä»ç¼“å†²æ± ä¸­è¯»å–ï¼Œè‹¥æ²¡æœ‰ï¼Œåˆ™ä»ç£ç›˜è¯»å–å¹¶æ”¾å…¥ç¼“å†²æ± ä¸­&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å†™æ•°æ®&lt;/strong&gt;ï¼šä¼šé¦–å…ˆå†™å…¥ç¼“å†²æ± ä¸­ï¼Œç¼“å†²æ± ä¸­çš„æ•°æ®ä¼šå®šæœŸåŒæ­¥åˆ°ç£ç›˜ä¸­&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;code&gt;é‚£ä¹ˆé—®é¢˜æ¥äº†&lt;/code&gt;ï¼Œå¦‚æœåœ¨ç¼“å†²æ± çš„æ•°æ®è¿˜æ²¡æœ‰åŒæ­¥åˆ°ç£ç›˜ä¸Šæ—¶ï¼Œå‡ºç°äº†æœºå™¨å®•æœºæˆ–è€…æ–­ç”µï¼Œå¯èƒ½ä¼šå‡ºç°æ•°æ®ä¸¢å¤±çš„é—®é¢˜ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦è®°å½•å·²æäº¤äº‹åŠ¡çš„æ•°æ®ï¼Œäºæ˜¯ï¼Œ&lt;code&gt;redo log&lt;/code&gt;ç™»åœºäº†ï¼Œ
&lt;code&gt;redo log&lt;/code&gt; åœ¨æ‰§è¡Œæ•°æ®å˜æ›´ï¼ˆinsert/update/deleteï¼‰æ“ä½œçš„æ—¶å€™ï¼Œä¼šå˜æ›´åçš„ç»“æœè®°å½•åœ¨ç¼“å†²åŒºï¼Œå¾…&lt;code&gt;commit&lt;/code&gt;äº‹åŠ¡ä¹‹ååŒæ­¥åˆ°ç£ç›˜&lt;/p&gt;
&lt;p&gt;è‡³äº&lt;code&gt;redo log&lt;/code&gt;ä¹Ÿè¦è¿›è¡Œç£ç›˜ IOï¼Œä¸ºä»€ä¹ˆè¿˜è¦ç”¨&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;(1)ã€&lt;code&gt;redo log&lt;/code&gt;æ˜¯é¡ºåºå­˜å‚¨ï¼Œè€Œç¼“å­˜åŒæ­¥æ˜¯éšæœºæ“ä½œ&lt;/p&gt;
&lt;p&gt;(2)ã€ç¼“å­˜åŒæ­¥æ˜¯ä»¥æ•°æ®é¡µä¸ºå•ä½ï¼Œæ¯æ¬¡ä¼ è¾“çš„æ•°æ®å¤§å°å°äº&lt;code&gt;redo log&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;33éš”ç¦»æ€§çš„å®ç°&#34;&gt;3.3ã€éš”ç¦»æ€§çš„å®ç°&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¯»æœªæäº¤&lt;/strong&gt;ï¼š è¯»å†™å¹¶è¡Œï¼Œè¯»çš„æ“ä½œä¸èƒ½æ’æ–¥å†™çš„æ“ä½œï¼Œå› æ­¤ä¼šå‡ºç°&lt;code&gt;è„è¯»&lt;/code&gt;,&lt;code&gt;ä¸å¯é‡å¤è¯»&lt;/code&gt;,&lt;code&gt;å¹»è¯»&lt;/code&gt;çš„é—®é¢˜&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¯»å·²æäº¤&lt;/strong&gt;ï¼š ä½¿ç”¨&lt;code&gt;æ’ä»–é”X&lt;/code&gt;ï¼Œæ›´æ–°æ•°æ®éœ€è¦è·å–&lt;code&gt;æ’ä»–é”&lt;/code&gt;ï¼Œå·²ç»è·å–&lt;code&gt;æ’ä»–é”&lt;/code&gt;çš„æ•°æ®ï¼Œä¸å¯ä»¥å†è·å–&lt;code&gt;å…±äº«é”S&lt;/code&gt;ä»¥åŠ&lt;code&gt;æ’ä»–é”X&lt;/code&gt;ï¼Œè¯»å–æ•°æ®ä½¿ç”¨äº†&lt;code&gt;MVCC&lt;/code&gt;ï¼ˆMutil-Version Concurrency Controlï¼‰å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶æœºåˆ¶ï¼ˆåç»­å•ç‹¬å±•å¼€ï¼‰ä»¥åŠ&lt;code&gt;Read view&lt;/code&gt;çš„æ¦‚å¿µï¼Œæ¯æ¬¡è¯»å–éƒ½ä¼šäº§ç”Ÿæ–°çš„&lt;code&gt;Read view&lt;/code&gt;ï¼Œå› æ­¤å¯ä»¥è§£å†³&lt;code&gt;è„è¯»&lt;/code&gt;é—®é¢˜ï¼Œä½†è§£å†³ä¸äº†&lt;code&gt;ä¸å¯é‡å¤è¯»&lt;/code&gt;å’Œ&lt;code&gt;å¹»è¯»çš„é—®é¢˜&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¯é‡å¤è¯»&lt;/strong&gt;ï¼š åŒä¸Šä¹Ÿæ˜¯åˆ©ç”¨&lt;code&gt;MVCC&lt;/code&gt;æœºåˆ¶å®ç°ï¼Œä½†æ˜¯åªåœ¨ç¬¬ä¸€æ¬¡æŸ¥è¯¢çš„æ—¶å€™åˆ›å»º&lt;code&gt;Read view&lt;/code&gt;ï¼Œåç»­çš„æŸ¥è¯¢è¿˜æ˜¯æ²¿ç”¨ä¹‹å‰çš„&lt;code&gt;Read view&lt;/code&gt;ï¼Œå› æ­¤å¯ä»¥è§£å†³&lt;code&gt;ä¸å¯é‡å¤è¯»&lt;/code&gt;çš„é—®é¢˜ï¼Œå…·ä½“ä¸åœ¨è¿™å±•å¼€ï¼Œä½†è¿˜æ˜¯æœ‰å¯èƒ½å‡ºç°å¹»è¯»&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¸²è¡ŒåŒ–&lt;/strong&gt; ï¼šè¯»æ“ä½œçš„æ—¶å€™åŠ &lt;code&gt;å…±äº«é”&lt;/code&gt;ï¼Œå…¶ä»–äº‹åŠ¡å¯ä»¥å¹¶å‘è¯»ï¼Œä½†æ˜¯ä¸èƒ½å¹¶å‘å†™ï¼Œæ‰§è¡Œå†™æ“ä½œçš„æ—¶å€™åŠ &lt;code&gt;æ’ä»–é”&lt;/code&gt;ï¼Œå…¶ä»–äº‹åŠ¡æ—¢ä¸èƒ½å¹¶å‘å†™ï¼Œä¹Ÿä¸èƒ½å¹¶å‘è¯»ï¼Œä¸²è¡ŒåŒ–å¯ä»¥è§£å†³äº‹åŠ¡å¹¶å‘ä¸­å‡ºç°çš„&lt;code&gt;è„è¯»&lt;/code&gt;ã€&lt;code&gt;ä¸å¯é‡å¤è¯»&lt;/code&gt;ã€&lt;code&gt;å¹»è¯»&lt;/code&gt;é—®é¢˜ï¼Œä½†æ˜¯å¹¶å‘æ€§èƒ½å´å› ä¸ºåŠ é”çš„å¼€é”€å˜å¾—å¾ˆå·®&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;34ä¸€è‡´æ€§çš„å®ç°&#34;&gt;3.4ã€ä¸€è‡´æ€§çš„å®ç°&lt;/h4&gt;
&lt;p&gt;ä¸€è‡´æ€§çš„å®ç°å…¶å®æ˜¯é€šè¿‡&lt;code&gt;åŸå­æ€§&lt;/code&gt;ã€&lt;code&gt;æŒä¹…æ€§&lt;/code&gt;ï¼Œ&lt;code&gt;éš”ç¦»æ€§&lt;/code&gt;å…±åŒå®Œæˆçš„&lt;/p&gt;
&lt;h2 id=&#34;äº”ç»“æŸè¯­&#34;&gt;äº”ã€ç»“æŸè¯­&lt;/h2&gt;
&lt;p&gt;äº†è§£ MySQL çš„äº‹åŠ¡æœºåˆ¶ï¼Œä»¥åŠå®ç°åŸç†ï¼Œå¯¹äºä½¿ç”¨æˆ–è€…ä¼˜åŒ–éƒ½æœ‰å¾ˆå¤§çš„å¸®åŠ©ï¼Œè¦ä¿æŒçŸ¥å…¶ç„¶å’ŒçŸ¥å…¶æ‰€ä»¥ç„¶çš„å¿ƒæ€å’ŒæŒç»­å­¦ä¹ çš„åŠ²å¤´ï¼Œäº†è§£æ›´å¤šå…³äº Mysql ç›¸å…³çš„çŸ¥è¯†ï¼&lt;/p&gt;
&lt;hr&gt;</description>
        </item>
        <item>
        <title>Mysql è¿æ¥æ± é—®é¢˜</title>
        <link>https://x-xkang.com/p/mysql-%E8%BF%9E%E6%8E%A5%E6%B1%A0%E9%97%AE%E9%A2%98/</link>
        <pubDate>Fri, 12 Mar 2021 17:42:20 +0800</pubDate>
        
        <guid>https://x-xkang.com/p/mysql-%E8%BF%9E%E6%8E%A5%E6%B1%A0%E9%97%AE%E9%A2%98/</guid>
        <description>&lt;h2 id=&#34;ä¸€é—®é¢˜æè¿°&#34;&gt;ä¸€ã€é—®é¢˜æè¿°&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;1ã€ç”Ÿäº§ç¯å¢ƒä¸»ç«™æ¯éš”ä¸€æ®µæ—¶é—´å°±ä¼šå‡ºç°å¡é¡¿ï¼Œæ¥å£å“åº”æ…¢ï¼Œç”šè‡³è¶…æ—¶çš„æƒ…å†µã€&lt;br&gt;
2ã€æµ‹è¯•ç¯å¢ƒé‡ç°ä¸äº†ï¼ˆä¸€æŠ¹è¯¡å¼‚çš„å…‰ï¼‰&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;äºŒé—®é¢˜æ’æŸ¥&#34;&gt;äºŒã€é—®é¢˜æ’æŸ¥&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;é’ˆå¯¹å“åº”æ…¢çš„æ¥å£è¿›è¡Œä¼˜åŒ–ï¼Œä¹‹å‰çš„ä»£ç é£æ ¼ä¹Ÿå­˜åœ¨é—®é¢˜ï¼Œè¿˜æ˜¯æœ‰äº›æ»¥ç”¨sync/awaitï¼Œä¸€äº›æ²¡æœ‰ä¾èµ–å…³ç³»çš„æ“ä½œï¼Œå…¨éƒ¨åˆ†å¼€æ¯è¡ŒawaitåŒæ­¥æ‰§è¡Œï¼Œåˆ†æåæŠŠéƒ¨åˆ†DBæ“ä½œåˆå¹¶ä¸€ä¸ªPromiseæ‰§è¡Œ
é˜¿é‡Œäº‘æŸ¥äº†ä¸€ä¸‹mysqlçš„slow_logï¼Œæœ‰æŒºå¤šçš„æ…¢æŸ¥è¯¢ï¼Œä¼˜åŒ–äº†ä¸€éƒ¨åˆ†SQLï¼Œä¸šåŠ¡é€»è¾‘å¤ªå¤æ‚ï¼Œä½†æ˜¯ï¼æ²¡æœ‰è§£å†³é—®é¢˜ï¼Œä¸»ç«™è¿˜æ˜¯éš”ä¸€æ®µæ—¶é—´å°±å¡
æ‰¾åˆ°éƒ¨åˆ†æ¥å£æ—¥å¿—ï¼Œè¶…æ—¶çš„æ¥å£è¿”å›çš„æ˜¯Knex.jsæ•°æ®åº“ç®¡ç†å·¥å…·æŠ›å‡ºçš„å¼‚å¸¸ï¼Œ&lt;code&gt;KnexTimeoutError: Knex: Timeout acquiring a connection. The pool is probably full.&lt;/code&gt;ï¼Œå¯èƒ½æ˜¯è¿æ¥æ± å·²æ»¡ï¼Œè·å–è¿æ¥å¤±è´¥å¯¼è‡´çš„
çœ‹äº†ä¸€ä¸‹æ•°æ®åº“è¿æ¥æ± çš„é…ç½®ï¼Œæœ€å¤§è¿æ¥æ•°æ˜¯30ï¼Œè·å–è¿æ¥çš„è¶…æ—¶æ—¶é—´æ˜¯60sï¼Œå¯èƒ½æ˜¯å¹¶å‘é‡å¤§åŠ ä¸Šéƒ¨åˆ†æ“ä½œæœªé‡Šæ”¾è¿æ¥å¯¼è‡´åç»­çš„æ“ä½œæ— æ³•æ­£å¸¸è·å–æ•°æ®åº“è¿æ¥æ± çš„è¿æ¥ï¼Œå¤§æ¦‚åˆå®šä½äº†ä¸€ä¸‹å¯èƒ½çš„é—®é¢˜ç‚¹&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;1ï¼Œä¸»ç«™çš„ä¿¡æ¯åˆ—è¡¨ä¼šéš”å‡ ç§’é’Ÿè½®è¯¢ï¼Œè·å–æœ€æ–°çš„æ•°æ®ï¼Œå¦‚æœ1000ä¸ªç”¨æˆ·åœ¨çº¿ï¼Œè½®è¯¢å‘¨æœŸå†…å°±ä¼šæœ‰1000ä¸ªæŸ¥è¯¢ï¼Œä¸­é—´ä¹Ÿæ²¡æœ‰åšç¼“å­˜å¤„ç†ï¼Œå¯¼è‡´å¹¶å‘åˆ°DBçš„è¯·æ±‚ä¼šæ¯”è¾ƒå¤š&lt;/li&gt;
&lt;li&gt;2ï¼Œä¸ºäº†ç»´æŠ¤DBçš„çŠ¶æ€ç»Ÿä¸€ï¼Œç”¨æˆ·çš„éƒ¨åˆ†æ“ä½œç”¨äº†äº‹åŠ¡ï¼Œä¸€äº›äº‹åŠ¡å†…åŒ…å«äº†å¤ªå¤šæ“ä½œï¼ˆæ„Ÿè§‰æ˜¯é•¿æœŸå ç”¨è¿æ¥æœªé‡Šæ”¾çš„ç½ªé­ç¥¸é¦–ï¼‰&lt;/li&gt;
&lt;li&gt;3ï¼Œæµ‹è¯•ç¯å¢ƒé‡ç°ä¸äº†æ˜¯å› ä¸ºæ²¡æœ‰ç»è¿‡å‹æµ‹ï¼Œåªæµ‹è¯•äº†åŠŸèƒ½ï¼Œæ²¡æœ‰æµ‹è¯•æ€§èƒ½ï¼Œæ—¥å¸¸æµ‹è¯•ä¹Ÿæ²¡æœ‰å¤§å¹¶å‘&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;ä¸‰é—®é¢˜éªŒè¯&#34;&gt;ä¸‰ã€é—®é¢˜éªŒè¯&lt;/h2&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å°†æ•°æ®åº“è¿æ¥æ± çš„æ•°é‡æ”¹æˆäº†1ï¼Œä½¿ç”¨äº‹åŠ¡çš„æ¥å£ä¸­åšäº†å»¶æ—¶çš„&lt;code&gt;transaction.commit()&lt;/code&gt;æ“ä½œï¼Œç„¶åå¦å¤–ä¸€ä¸ªè¯·æ±‚å†å»æ­£å¸¸æŸ¥è¯¢ï¼Œ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç»“æœæ˜¾ç¤ºï¼Œå¦‚æœä¸€ä¸ªç”¨æˆ·è°ƒç”¨äº†äº‹åŠ¡æ“ä½œçš„æ¥å£ï¼Œç„¶åå†è°ƒç”¨æŸ¥è¯¢æ¥å£ï¼ŒæŸ¥è¯¢ä¼šä¸€ç›´é˜»å¡åœ¨è·å–è¿æ¥çš„æ­¥éª¤ï¼Œç›´è‡³äº‹åŠ¡commitä¹‹åé‡Šæ”¾è¿æ¥ï¼Œå¦‚æœåœ¨é…ç½®çš„timeoutæ—¶é—´ä¹‹å‰æ²¡æœ‰è·å–åˆ°ï¼ŒKnexå°±ä¼šæŠ›å‡º&lt;code&gt;Timeout acquiring a connection. The pool is probably full&lt;/code&gt;çš„å¼‚å¸¸ï¼Œ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¹Ÿä¾§é¢å°è¯äº†ä¸ºä»€ä¹ˆæµ‹è¯•ç¯å¢ƒå¤ç°ä¸äº†è¿™ç§æƒ…å†µï¼Œæ¯•ç«Ÿåœ¨æ²¡æœ‰å‹æµ‹çš„å‰æä¸‹ã€‚ä¸¤ä¸ªæµ‹è¯•é€šè¿‡æ‰‹åŠ¨æ“ä½œï¼Œå¹¶å‘é‡æ˜¯è¾¾ä¸åˆ°é…ç½®çš„æ•°é‡çš„ï¼Œä¹Ÿå°±ä¸ä¼šå‡ºç°å¡é¡¿çš„æƒ…å†µ&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;å››è§£å†³æ–¹æ¡ˆ&#34;&gt;å››ã€è§£å†³æ–¹æ¡ˆ&lt;/h2&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;1ï¼Œä¼˜åŒ–é•¿äº‹åŠ¡çš„æ“ä½œï¼Œå‡å°‘ä¸å¿…è¦çš„äº‹åŠ¡ï¼Œæé«˜å¤„ç†æ•ˆç‡ï¼ˆéš¾åº¦è¾ƒå¤§ï¼Œä¸šåŠ¡é€»è¾‘æ¯”è¾ƒå¤æ‚ï¼‰ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;2ï¼Œåˆç†èŒƒå›´å†…å¢åŠ æ•°æ®åº“è¿æ¥æ± çš„æœ€å¤§è¿æ¥æ•°é…ç½®ï¼Œçº¿ä¸Šçš„mysqlå¯è¿æ¥300ä¸ªï¼Œåç«¯3ä¸ªæœåŠ¡ï¼Œç°åœ¨é…ç½®æ˜¯10ã€30ã€30ï¼Œå…ˆæŠŠä¸»ç«™æ”¹50çœ‹çœ‹ï¼Œè¿æ¥æ•°å¤ªå¤§ä¹Ÿä¼šå¯¼è‡´ç£ç›˜I/Oæ•ˆç‡å¤§å¹…é™ä½åˆä¼šå¯¼è‡´å…¶ä»–é—®é¢˜ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;3ï¼Œè½®è¯¢è·å–åˆ—è¡¨çš„æ“ä½œï¼Œå¯ä»¥æ”¹æˆæœåŠ¡ç«¯ä¸»åŠ¨å»æ¨ï¼ˆä½¿ç”¨socket.ioï¼‰ï¼Œç„¶ååŠ ä¸€ä¸ªä¸­é—´ç¼“å­˜ï¼ˆredisï¼‰ï¼Œæ¯•ç«Ÿåˆ—è¡¨æ•°æ®å˜åŒ–çš„é¢‘ç‡ä¸æ˜¯å¾ˆé«˜ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;4ï¼Œæ•°æ®åº“æ‰©å±•æˆè¯»å†™åˆ†ç¦»ï¼Œupdateå’Œinsertçš„æ“ä½œç›´æ¥æ“ä½œä¸»åº“ï¼Œå¤§éƒ¨åˆ†selectæ“ä½œè½¬ç§»åˆ°ä»åº“ï¼Œå³ä½¿æœ‰éƒ¨åˆ†çš„äº‹åŠ¡æ“ä½œæ…¢ï¼Œä¹Ÿä¸ä¼šå¯¼è‡´ä¸»ç«™çš„åŸºæœ¬æŸ¥è¯¢å¡ä½&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;äº”å†™åœ¨æœ€å&#34;&gt;äº”ã€å†™åœ¨æœ€å&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;ç³»ç»Ÿçš„ä¸šåŠ¡é€»è¾‘æ¯”è¾ƒå¤æ‚ï¼Œä»ä¸šåŠ¡ä»£ç å±‚é¢ä¸‹æ‰‹æˆæœ¬è¿˜æ˜¯æ¯”è¾ƒé«˜ï¼Œæ¥å£çš„è€¦åˆéƒ½æ¯”è¾ƒé«˜ï¼Œé‡æ„éƒ½æ¯”æ”¹çš„æˆæœ¬ä½ï¼Œå¼€å§‹çš„è®¾è®¡ï¼Œå¯èƒ½ä¹Ÿæ²¡æœ‰è€ƒè™‘æ‰©å±•çš„é—®é¢˜ï¼Œå¹¶å‘çš„é—®é¢˜ç­‰ï¼Œ
åŒ…æ‹¬æ¯ä¸ªæœåŠ¡ä¹‹é—´çš„é€šä¿¡é—®é¢˜ï¼ŒåæœŸå†æ…¢æ…¢ä¼˜åŒ–å§ï¼Œä¸æ€•æœ‰é—®é¢˜ï¼Œå°±æ€•ä¸€ç›´æ²¡é‡åˆ°è¿‡é—®é¢˜ï¼åŠ æ²¹~ã€‚&lt;/p&gt;
&lt;/blockquote&gt;</description>
        </item>
        
    </channel>
</rss>
